<!-- build time:Mon Jan 01 2024 00:42:37 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="KangKang" href="https://blog.0kangkang0.top/rss.xml"><link rel="alternate" type="application/atom+xml" title="KangKang" href="https://blog.0kangkang0.top/atom.xml"><link rel="alternate" type="application/json" title="KangKang" href="https://blog.0kangkang0.top/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://blog.0kangkang0.top/2023/11/06/AJAX+Node.js+Webpack/"><title>AJAX+Node.js+Webpack | kangkang = KangKang</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">AJAX+Node.js+Webpack</h1><div class="meta"><span class="item" title="创建时间：2023-11-06 18:50:56"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-11-06T18:50:56+08:00">2023-11-06</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">kangkang</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="/img/00013-1028390107.png"></li><li class="item" data-background-image="/img/00034-3635204744.png"></li><li class="item" data-background-image="/img/00047-4079796903.png"></li><li class="item" data-background-image="/img/00045-4079796901.png"></li><li class="item" data-background-image="/img/00038-207222746.png"></li><li class="item" data-background-image="/img/00007-229583667.png"></li></ul></div><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div></header><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.0kangkang0.top/2023/11/06/AJAX+Node.js+Webpack/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="KangKang"><meta itemprop="description" content=", "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="KangKang"></span><div class="body md" itemprop="articleBody"><h1 id="一-ajax入门"><a class="anchor" href="#一-ajax入门">#</a> 一、Ajax 入门</h1><h2 id="知识点自测"><a class="anchor" href="#知识点自测">#</a> 知识点自测</h2><ol><li><p>如下对象取值的方式哪个正确？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'黑马'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>A: obj.a</p><p>B: obj()a</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;A 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>哪个赋值会让浏览器解析成标签显示？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#ul'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span>我是span标签&lt;/span></span><span class="token template-punctuation string">`</span></span></pre></td></tr></table></figure><p>A: ul.innerText = str</p><p>B: ul.innerHTML = str</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 选择 B, innerText 会把字符串当做普通文本现在在 ul 标签之间，innerHTML 会试着把字符串解析成标签，如果是普通文本则显示普通文本字符串 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>哪个是获取输入框值的方式？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> theInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#input'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>A: theInput.innerHTML</p><p>B: theInput.value</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 答案是 B, 表单标签设置或获取值用 value 属性，其他标签用 innerHTML/innerText, 进行设置 / 获取 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>哪个是用于获取标签内容？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> theP <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#p'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>A: theP.innerHTML = ' 内容'</p><p>B: theP.innerHTML</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 答案是 B, 单独出现是获取值在原地，如果看到 = 这个符号，是把右侧的值赋予给左侧的属性，影响标签展示效果 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>哪个是数组的映射方法？</p><p>A: arr.forEach</p><p>B: arr.map</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 答案是 B&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>数组转字符串并指定拼接符的是哪个？</p><p>A: arr.join()</p><p>B: arr.split()</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 答案是 A&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>函数传参的方式哪个是正确的？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">showAlert</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> className</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>A：showAlert (' 消息 ', ' 类名 ')</p><p>B：showAlert()</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 答案是 A&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下哪套代码可以实现对象属性的简写？</p><p>A：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> username <span class="token operator">=</span> <span class="token string">'老李'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">username</span><span class="token operator">:</span> username</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>B：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token string">'老李'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">username</span><span class="token operator">:</span> user</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 答案是 A&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下代码的值是多少？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">10</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> age <span class="token operator">></span> <span class="token number">18</span> <span class="token operator">?</span> <span class="token string">'成年了'</span> <span class="token operator">:</span> <span class="token string">'未成年'</span></pre></td></tr></table></figure><p>A：‘成年了’</p><p>B：‘未成年’</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 答案是 B&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下哪个方法可以添加一个额外类名？</p><p>A：标签对象.classList.add ()</p><p>B：标签对象.classList.contains ()</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 答案是 A&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="目录"><a class="anchor" href="#目录">#</a> 目录</h2><ul><li>AJAX 概念和 axios 使用</li><li>认识 URL</li><li>URL 查询参数</li><li>常用请求方法和数据提交</li><li>HTTP 协议 - 报文</li><li>接口文档</li><li>案例 - 用户登录</li><li>form-serialize 插件</li></ul><h2 id="学习目标"><a class="anchor" href="#学习目标">#</a> 学习目标</h2><ol><li>掌握 axios 相关参数，从服务器获取并解析展示数据</li><li>掌握接口文档的查看和使用</li><li>掌握在浏览器的 network 面板中查看请求和响应的内容</li><li>了解请求和响应报文的组成部分</li></ol><h2 id="01ajax-概念和-axios-使用"><a class="anchor" href="#01ajax-概念和-axios-使用">#</a> 01.AJAX 概念和 axios 使用</h2><h3 id="目标"><a class="anchor" href="#目标">#</a> 目标</h3><p>了解 AJAX 概念并掌握 axios 库基本使用</p><h3 id="讲解"><a class="anchor" href="#讲解">#</a> 讲解</h3><ol><li><p>什么是 AJAX ? <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvR3VpZGUvQUpBWC9HZXR0aW5nX1N0YXJ0ZWQ=">mdn</span></p><ul><li><p>使用浏览器的 XMLHttpRequest 对象 与服务器通信</p></li><li><p>浏览器网页中，使用 AJAX 技术（XHR 对象）发起获取省份列表数据的请求，服务器代码响应准备好的省份列表数据给前端，前端拿到数据数组以后，展示到网页</p><p><img data-src="/img/image-20230403173156484.png" alt="image-20230403173156484"></p></li></ul></li><li><p>什么是服务器？</p><ul><li>可以暂时理解为提供数据的一台电脑</li></ul></li><li><p>为何学 AJAX ?</p><ul><li>以前我们的数据都是写在代码里固定的，无法随时变化</li><li>现在我们的数据可以从服务器上进行获取，让数据变活</li></ul></li><li><p>怎么学 AJAX ?</p><ul><li>这里使用一个第三方库叫 axios, 后续在学习 XMLHttpRequest 对象了解 AJAX 底层原理</li><li>因为 axios 库语法简单，让我们有更多精力关注在与服务器通信上，而且后续 Vue，React 学习中，也使用 axios 库与服务器通信</li></ul></li><li><p>需求：从服务器获取省份列表数据，展示到页面上（体验 axios 语法的使用）</p><blockquote><p>获取省份列表数据 - 目标资源地址：<span class="exturl" data-url="aHR0cDovL2htYWpheC5pdGhlaW1hLm5ldC9hcGkvcHJvdmluY2U=">http://hmajax.itheima.net/api/province</span></p></blockquote><ul><li><p>完成效果：</p><p><img data-src="/img/image-20230220113157010.png" alt="image-20230220113157010"></p></li></ul></li><li><p>接下来讲解 axios 语法，步骤：</p></li><li><p>引入 axios.js 文件到自己的网页中</p><blockquote><p>axios.js 文件链接: <span class="exturl" data-url="aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9heGlvcy9kaXN0L2F4aW9zLm1pbi5qcw==">https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js</span></p></blockquote></li><li><p>明确 axios 函数的使用语法</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'目标资源地址'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// 对服务器返回的数据做后续处理</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>注意：请求的 url 地址，就是标记资源的网址</p><p>注意：then 方法这里先体验使用，由来后续会讲到</p></blockquote></li><li><p>对应代码</p></li></ol><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>AJAX概念和axios使用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token comment">&lt;!--</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    axios 库地址：https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js</pre></td></tr><tr><td data-num="14"></td><td><pre>    省份数据地址：http://hmajax.itheima.net/api/province</pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    目标：使用 axios 库，获取省份列表数据，展示到页面上</pre></td></tr><tr><td data-num="17"></td><td><pre>    1. 引入 axios 库</pre></td></tr><tr><td data-num="18"></td><td><pre>  --></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-p<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 2. 使用 axios 函数</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token comment">// 好习惯：多打印，确认属性名</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token comment">// 把准备好省份列表，插入到页面</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="小结"><a class="anchor" href="#小结">#</a> 小结</h3><ol><li><p>AJAX 有什么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 浏览器和服务器之间通信，动态数据交互 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>AJAX 如何学：</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 先掌握 axios 库使用，再了解 XMLHttpRequest 原理 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>这一节 axios 体验步骤（语法）？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 引入 axios 库，使用 axios 相关语法 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="02认识-url"><a class="anchor" href="#02认识-url">#</a> 02. 认识 URL</h2><h3 id="目标-2"><a class="anchor" href="#目标-2">#</a> 目标</h3><p>了解 URL 的组成和作用</p><h3 id="讲解-2"><a class="anchor" href="#讲解-2">#</a> 讲解</h3><ol><li><p>为什么要认识 URL ? <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvR3VpZGUvQUpBWC9HZXR0aW5nX1N0YXJ0ZWQ=">mdn</span></p><ul><li>虽然是后端给我的一个地址，但是哪部分标记的是服务器电脑，哪部分标记的是资源呢？所以为了和服务器有效沟通我们要认识一下</li></ul></li><li><p>什么是 URL ？</p><ul><li><p>统一资源定位符，简称网址，用于定位网络中的资源（资源指的是：网页，图片，数据，视频，音频等等）</p><p><img data-src="/img/image-20230403185206384.png" alt="image-20230403185206384"></p></li></ul></li><li><p>URL 的组成？</p><ul><li><p>协议，域名，资源路径（URL 组成有很多部分，我们先掌握这 3 个重要的部分即可）</p><p><img data-src="/img/image-20230403185305934.png" alt="image-20230403185305934"></p></li></ul></li><li><p>什么是 http 协议？</p><ul><li><p>叫超文本传输协议，规定了浏览器和服务器传递数据的格式（而格式具体有哪些稍后我们就会学到）</p><p><img data-src="/img/image-20230403185356997.png" alt="image-20230403185356997"></p></li></ul></li><li><p>什么是域名？</p><ul><li><p>标记服务器在互联网当中的方位，网络中有很多服务器，你想访问哪一台，就需要知道它的域名才可以</p><p><img data-src="/img/image-20230403185406674.png" alt="image-20230403185406674"></p></li></ul></li><li><p>什么是资源路径？</p><ul><li><p>一个服务器内有多个资源，用于标识你要访问的资源具体的位置</p><p><img data-src="/img/image-20230403185428276.png" alt="image-20230403185428276"></p></li></ul></li><li><p>接下来做个需求，访问新闻列表的 URL 网址，打印新闻数据</p><ul><li>效果图如下：</li></ul><p><img data-src="/img/image-20230220122455915.png" alt="image-20230220122455915"></p><blockquote><p>新闻列表数据 URL 网址：<span class="exturl" data-url="aHR0cDovL2htYWpheC5pdGhlaW1hLm5ldC9hcGkvbmV3cw==">http://hmajax.itheima.net/api/news</span></p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/news'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>url 解释：从黑马服务器使用 http 协议，访问 /api/news 路径下的新闻列表资源</p></blockquote></li></ol><h3 id="小结-2"><a class="anchor" href="#小结-2">#</a> 小结</h3><ol><li><p>URL 是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 统一资源定位符，网址，用于访问服务器上资源<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>请解释这个 URL，每个部分作用？</p><p><span class="exturl" data-url="aHR0cDovL2htYWpheC5pdGhlaW1hLm5ldC9hcGkvbmV3cw==">http://hmajax.itheima.net/api/news</span></p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 协议:// 域名 / 资源路径<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="03url-查询参数"><a class="anchor" href="#03url-查询参数">#</a> 03.URL 查询参数</h2><h3 id="目标-3"><a class="anchor" href="#目标-3">#</a> 目标</h3><p>掌握 - 通过 URL 传递查询参数，获取匹配的数据</p><h3 id="讲解-3"><a class="anchor" href="#讲解-3">#</a> 讲解</h3><ol><li><p>什么是查询参数？</p><ul><li><p>携带给服务器额外信息，让服务器返回我想要的某一部分数据而不是全部数据</p></li><li><p>举例：查询河北省下属的城市列表，需要先把河北省传递给服务器</p><p><img data-src="/img/image-20230404101257205.png" alt="image-20230404101257205"></p></li></ul></li><li><p>查询参数的语法 ？</p><ul><li>在 url 网址后面用？拼接格式：<span class="exturl" data-url="aHR0cDovL3h4eHguY29tL3h4eC94eHg/JUU1JThGJTgyJUU2JTk1JUIwJUU1JTkwJThEMT0lRTUlODAlQkMxJmFtcDslRTUlOEYlODIlRTYlOTUlQjAlRTUlOTAlOEQyPSVFNSU4MCVCQzI=">http://xxxx.com/xxx/xxx? 参数名 1 = 值 1 &amp; 参数名 2 = 值 2</span></li><li>参数名一般是后端规定的，值前端看情况传递即可</li></ul></li><li><p>axios 如何携带查询参数？</p><ul><li><p>使用 params 选项即可</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'目标资源地址'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">参数名</span><span class="token operator">:</span> 值</pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// 对服务器返回的数据做后续处理</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>查询城市列表的 url 地址：<span class="exturl" data-url="aHR0cDovL2htYWpheC5pdGhlaW1hLm5ldC9hcGkvY2l0eT9wbmFtZT0lRTYlQjIlQjMlRTUlOEMlOTclRTclOUMlODE=">http://hmajax.itheima.net/api/city</span></p><p>参数名：pname （值要携带省份名字）</p></blockquote></li></ul></li><li><p>需求：获取 “河北省” 下属的城市列表，展示到页面，对应代码：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>查询参数<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">&lt;!-- </span></pre></td></tr><tr><td data-num="11"></td><td><pre>    城市列表: http://hmajax.itheima.net/api/city</pre></td></tr><tr><td data-num="12"></td><td><pre>    参数名: pname</pre></td></tr><tr><td data-num="13"></td><td><pre>    值：省份名字</pre></td></tr><tr><td data-num="14"></td><td><pre>  --></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/city'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token comment">// 查询参数</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token literal-property property">pname</span><span class="token operator">:</span> <span class="token string">'辽宁省'</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li></ol><h3 id="小结-3"><a class="anchor" href="#小结-3">#</a> 小结</h3><ol><li><p>URL 查询参数有什么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 浏览器提供给服务器额外信息，获取对应的数据<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>axios 要如何携带查询参数？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 使用 params 选项，携带参数名和值在对象结构中<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="04案例-查询-地区列表"><a class="anchor" href="#04案例-查询-地区列表">#</a> 04. 案例 - 查询 - 地区列表</h2><h3 id="目标-4"><a class="anchor" href="#目标-4">#</a> 目标</h3><p>巩固查询参数的使用，并查看多对查询参数如何传递</p><h3 id="讲解-4"><a class="anchor" href="#讲解-4">#</a> 讲解</h3><ol><li><p>需求：根据输入的省份名字和城市名字，查询下属地区列表</p><ul><li><p>完成效果如下：</p><p><img data-src="/img/image-20230220125428695.png" alt="image-20230220125428695"></p></li><li><p>相关参数</p><blockquote><p>查询地区: <span class="exturl" data-url="aHR0cDovL2htYWpheC5pdGhlaW1hLm5ldC9hcGkvYXJlYQ==">http://hmajax.itheima.net/api/area</span></p><p>参数名：</p><p>pname：省份名字</p><p>cname：城市名字</p></blockquote></li></ul></li><li><p>正确代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="2"></td><td><pre>      获取地区列表: http://hmajax.itheima.net/api/area</pre></td></tr><tr><td data-num="3"></td><td><pre>      查询参数:</pre></td></tr><tr><td data-num="4"></td><td><pre>        pname: 省份或直辖市名字</pre></td></tr><tr><td data-num="5"></td><td><pre>        cname: 城市名字</pre></td></tr><tr><td data-num="6"></td><td><pre>    */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 目标：根据省份和城市名字，查询地区列表</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 1. 查询按钮 - 点击事件</span></pre></td></tr><tr><td data-num="9"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.sel-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 2. 获取省份和城市名字</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">let</span> pname <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.province'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">let</span> cname <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.city'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 3. 基于 axios 请求地区列表数据</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/area'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            pname<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            cname</pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// console.log(result)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 4. 把数据转 li 标签插入到页面上</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">let</span> list <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list</pre></td></tr><tr><td data-num="25"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">let</span> theLi <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">areaName</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li class="list-group-item"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>areaName<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/li></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>theLi<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list-group'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> theLi</pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-4"><a class="anchor" href="#小结-4">#</a> 小结</h3><ol><li><p>ES6 对象属性和值简写的前提是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 当属性名和 value 位置变量名同名即可简写<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="05常用请求方法和数据提交"><a class="anchor" href="#05常用请求方法和数据提交">#</a> 05. 常用请求方法和数据提交</h2><h3 id="目标-5"><a class="anchor" href="#目标-5">#</a> 目标</h3><p>掌握如何向服务器提交数据，而不单单是获取数据</p><h3 id="讲解-5"><a class="anchor" href="#讲解-5">#</a> 讲解</h3><ol><li><p>想要提交数据，先来了解什么是请求方法</p><ul><li><p>请求方法是一些固定单词的英文，例如：GET，POST，PUT，DELETE，PATCH（这些都是 http 协议规定的），每个单词对应一种对服务器资源要执行的操作</p><p><img data-src="/img/image-20230220130833363.png" alt="image-20230220130833363"></p><p><img data-src="/img/image-20230404104319428.png" alt="image-20230404104319428"></p></li><li><p>前面我们获取数据其实用的就是 GET 请求方法，但是 axios 内部设置了默认请求方法就是 GET，我们就没有写</p></li><li><p>但是提交数据需要使用 POST 请求方法</p></li></ul></li><li><p>什么时候进行数据提交呢？</p><ul><li><p>例如：多端要查看同一份订单数据，或者使用同一个账号进行登录，那订单 / 用户名 + 密码，就需要保存在服务器上，随时随地进行访问</p><p><img data-src="/img/image-20230404104328384.png" alt="image-20230404104328384"></p><p><img data-src="/img/image-20230404104333584.png" alt="image-20230404104333584"></p></li></ul></li><li><p>axios 如何提交数据到服务器呢？</p><ul><li><p>需要学习，method 和 data 这 2 个新的选项了（大家不用担心，这 2 个学完，axios 常用的选项就都学完了）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'目标资源地址'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'请求方法'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">参数名</span><span class="token operator">:</span> 值</pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 对服务器返回的数据做后续处理</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ul></li><li><p>需求：注册账号，提交用户名和密码到服务器保存</p><blockquote><p>注册用户 URL 网址：<span class="exturl" data-url="aHR0cDovL2htYWpheC5pdGhlaW1hLm5ldC9hcGkvcmVnaXN0ZXI=">http://hmajax.itheima.net/api/register</span></p><p>请求方法：POST</p><p>参数名：</p><p>username：用户名（要求中英文和数字组成，最少 8 位）</p><p>password：密码（最少 6 位）</p></blockquote><p><img data-src="/img/image-20230404104350387.png" alt="image-20230404104350387"></p></li><li><p>正确代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  注册用户：http://hmajax.itheima.net/api/register</pre></td></tr><tr><td data-num="3"></td><td><pre>  请求方法：POST</pre></td></tr><tr><td data-num="4"></td><td><pre>  参数名：</pre></td></tr><tr><td data-num="5"></td><td><pre>    username：用户名（中英文和数字组成，最少 8 位）</pre></td></tr><tr><td data-num="6"></td><td><pre>    password：密码  （最少 6 位）</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>  目标：点击按钮，通过 axios 提交用户和密码，完成注册</pre></td></tr><tr><td data-num="9"></td><td><pre>*/</pre></td></tr><tr><td data-num="10"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/register'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'itheima007'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'7654321'</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-5"><a class="anchor" href="#小结-5">#</a> 小结</h3><ol><li><p>请求方法最常用的是哪 2 个，分别有什么作用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;POST 提交数据，GET 查询数据<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>axios 的核心配置项？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;url：目标资源地址，method：请求方法，params：查询参数，data：提交的数据<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="06axios-错误处理"><a class="anchor" href="#06axios-错误处理">#</a> 06.axios 错误处理</h2><h3 id="目标-6"><a class="anchor" href="#目标-6">#</a> 目标</h3><p>掌握接收 axios 响应错误信息的处理语法</p><h3 id="讲解-6"><a class="anchor" href="#讲解-6">#</a> 讲解</h3><ol><li><p>如果注册相同的用户名，则会遇到注册失败的请求，也就是 axios 请求响应失败了，你会在控制台看到如图的错误：</p><p><img data-src="/img/image-20230220131753051.png" alt="image-20230220131753051"></p></li><li><p>在 axios 语法中要如何处理呢？</p><ul><li>因为，普通用户不会去控制台里看错误信息，我们要编写代码拿到错误并展示给用户在页面上</li></ul></li><li><p>使用 axios 的 catch 方法，捕获这次请求响应的错误并做后续处理，语法如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">//... 请求选项</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// 处理成功数据</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// 处理失败错误</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>需求：再次重复注册相同用户名，提示用户注册失败的原因</p><p><img data-src="/img/image-20230404104440224.png" alt="image-20230404104440224"></p><p><img data-src="/img/image-20230404104447501.png" alt="image-20230404104447501"></p></li><li><p>对应代码</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/register'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'itheima007'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'7654321'</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token comment">// 成功</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token comment">// 失败</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token comment">// 处理错误信息</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-6"><a class="anchor" href="#小结-6">#</a> 小结</h3><ol><li><p>axios 如何拿到请求响应失败的信息？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 通过 axios 函数调用后，在后面接着调用 .catch 方法捕获<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="07http-协议-请求报文"><a class="anchor" href="#07http-协议-请求报文">#</a> 07.HTTP 协议 - 请求报文</h2><h3 id="目标-7"><a class="anchor" href="#目标-7">#</a> 目标</h3><p>了解 HTTP 协议中，请求报文的组成和作用</p><h3 id="讲解-7"><a class="anchor" href="#讲解-7">#</a> 讲解</h3><ol><li><p>首先，HTTP 协议规定了浏览器和服务器返回内容的 &lt;span style=&quot;color: red;&quot;&gt; 格式 &lt;/span&gt;</p></li><li><p>请求报文：是浏览器按照协议规定发送给服务器的内容，例如刚刚注册用户时，发起的请求报文：</p><p><img data-src="/img/image-20230404104508764.png" alt="image-20230404104508764"></p><p><img data-src="/img/image-20230220132229960.png" alt="image-20230220132229960"></p></li><li><p>这里的格式包含：</p><ul><li>请求行：请求方法，URL，协议</li><li>请求头：以键值对的格式携带的附加信息，比如：Content-Type（指定了本次传递的内容类型）</li><li>空行：分割请求头，空行之后的是发送给服务器的资源</li><li>请求体：发送的资源</li></ul></li><li><p>我们切换到浏览器中，来看看刚才注册用户发送的这个请求报文以及内容去哪里查看呢</p></li><li><p>代码：直接在上个代码基础上复制，然后运行查看请求报文对应关系即可</p></li></ol><h3 id="小结-7"><a class="anchor" href="#小结-7">#</a> 小结</h3><ol><li><p>浏览器发送给服务器的内容叫做，请求报文</p></li><li><p>请求报文的组成是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 请求行，请求头，空行，请求体<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>通过 Chrome 的网络面板如何查看请求体？</p><p><img data-src="/img/image-20230220132617016.png" alt="image-20230220132617016"></p></li></ol><h2 id="08请求报文-错误排查"><a class="anchor" href="#08请求报文-错误排查">#</a> 08. 请求报文 - 错误排查</h2><h3 id="目标-8"><a class="anchor" href="#目标-8">#</a> 目标</h3><p>了解学习了查看请求报文之后的作用，可以用来辅助错误排查</p><h3 id="讲解-8"><a class="anchor" href="#讲解-8">#</a> 讲解</h3><ol><li>学习了查看请求报文有什么用呢？<ul><li>可以用来确认我们代码发送的请求数据是否真的正确</li></ul></li><li>配套模板代码里，对应 08 标题文件夹里是我同桌的代码，它把登录也写完了，但是无法登录，我们来到模板代码中，找到运行后，在 &lt;span style=&quot;color: red;&quot;&gt; 不逐行查看代码的情况下 &lt;/span&gt;，查看请求报文，看看它登录提交的相关信息对不对，帮他找找问题出现的原因</li><li>发现请求体数据有问题，往代码中定位，找到类名写错误了</li><li>代码：在配套文件夹素材里，找到需要对应代码，直接运行，根据报错信息，找到错误原因</li></ol><h3 id="小结-8"><a class="anchor" href="#小结-8">#</a> 小结</h3><ol><li><p>学会了查看请求报文，对实际开发有什么帮助呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 可以快速确认我们发送的内容是否正确<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="09http-协议-响应报文"><a class="anchor" href="#09http-协议-响应报文">#</a> 09.HTTP 协议 - 响应报文</h2><h3 id="目标-9"><a class="anchor" href="#目标-9">#</a> 目标</h3><p>了解响应报文的组成</p><h3 id="讲解-9"><a class="anchor" href="#讲解-9">#</a> 讲解</h3><ol><li><p>响应报文：是服务器按照协议固定的格式，返回给浏览器的内容</p><p><img data-src="/img/image-20230404104556531.png" alt="image-20230404104556531"></p><p><img data-src="/img/image-20230220133141151.png" alt="image-20230220133141151"></p></li><li><p>响应报文的组成：</p><ul><li>响应行（状态行）：协议，HTTP 响应状态码，状态信息</li><li>响应头：以键值对的格式携带的附加信息，比如：Content-Type（告诉浏览器，本次返回的内容类型）</li><li>空行：分割响应头，控制之后的是服务器返回的资源</li><li>响应体：返回的资源</li></ul></li><li><p>HTTP 响应状态码：</p><ul><li><p>用来表明请求是否成功完成</p></li><li><p>例如：404（客户端要找的资源，在服务器上不存在）</p><p><img data-src="/img/image-20230220133344116.png" alt="image-20230220133344116"></p></li></ul></li></ol><h3 id="小结-9"><a class="anchor" href="#小结-9">#</a> 小结</h3><ol><li><p>响应报文的组成？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 响应行，响应头，空行，响应体<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>HTTP 响应状态码是做什么的？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 表明请求是否成功完成，2xx 都是成功的<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="10接口文档"><a class="anchor" href="#10接口文档">#</a> 10. 接口文档</h2><h3 id="目标-10"><a class="anchor" href="#目标-10">#</a> 目标</h3><p>掌握接口文档的使用，配合 axios 与服务器进行数据交互</p><h3 id="讲解-10"><a class="anchor" href="#讲解-10">#</a> 讲解</h3><ol><li><p>接口文档：描述接口的文章（一般是后端工程师，编写和提供）</p></li><li><p>接口：指的使用 AJAX 和 服务器通讯时，使用的 URL，请求方法，以及参数，例如：<span class="exturl" data-url="aHR0cHM6Ly9hcGlmb3guY29tL2FwaWRvYy9zaGFyZWQtMWIwZGQ4NGYtZmFhOC00MzVkLWIzNTUtNWE4YTMyOWUzNGE4">AJAX 阶段接口文档</span></p></li><li><p>例如：获取城市列表接口样子</p><p><img data-src="/img/image-20230404104720587.png" alt="image-20230404104720587"></p></li><li><p>需求：打开 AJAX 阶段接口文档，查看登录接口，并编写代码，完成一次登录的效果吧</p></li><li><p>代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 用户登录</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'itheima007'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'7654321'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-10"><a class="anchor" href="#小结-10">#</a> 小结</h3><ol><li><p>接口文档是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 由后端提供的描述接口的文章<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>接口文档里包含什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 请求的 URL 网址，请求方法，请求参数和说明<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="11案例-用户登录-主要业务"><a class="anchor" href="#11案例-用户登录-主要业务">#</a> 11. 案例 - 用户登录 - 主要业务</h2><h3 id="目标-11"><a class="anchor" href="#目标-11">#</a> 目标</h3><p>尝试通过页面获取用户名和密码，进行登录</p><h3 id="讲解-11"><a class="anchor" href="#讲解-11">#</a> 讲解</h3><ol><li><p>先来到备课代码中，运行完成的页面，查看要完成的登录效果（登录成功和失败）</p></li><li><p>需求：编写代码，查看接口文档，填写相关信息，完成登录业务</p></li><li><p>分析实现的步骤</p><ol><li><p>点击登录，获取并判断用户名和长度</p></li><li><p>提交数据和服务器通信</p></li><li><p>提示信息，反馈给用户（这节课先来完成前 2 个步骤）</p><p><img data-src="/img/image-20230404104851497.png" alt="image-20230404104851497"></p></li></ol></li><li><p>代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 目标 1：点击登录时，用户名和密码长度判断，并提交数据和服务器通信</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 1.1 登录 - 点击事件</span></pre></td></tr><tr><td data-num="4"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn-login'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 1.2 获取用户名和密码</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">const</span> username <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.username'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">const</span> password <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.password'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// console.log(username, password)</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">// 1.3 判断长度</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>username<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'用户名必须大于等于8位'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">return</span> <span class="token comment">// 阻止代码继续执行</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>password<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'密码必须大于等于6位'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> <span class="token comment">// 阻止代码继续执行</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token comment">// 1.4 基于 axios 提交用户名和密码</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token comment">//console.log (' 提交数据到服务器 ')</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      username<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      password</pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-11"><a class="anchor" href="#小结-11">#</a> 小结</h3><ol><li><p>总结下用户登录案例的思路？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;1. 登录按钮 - 绑定点击事件<br>2. 从页面输入框里，获取用户名和密码<br>3. 判断长度是否符合要求<br>4. 基于 axios 提交用户名和密码<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="12案例-用户登录-提示信息"><a class="anchor" href="#12案例-用户登录-提示信息">#</a> 12. 案例 - 用户登录 - 提示信息</h2><h3 id="目标-12"><a class="anchor" href="#目标-12">#</a> 目标</h3><p>根据准备好的提示标签和样式，给用户反馈提示</p><h3 id="讲解-12"><a class="anchor" href="#讲解-12">#</a> 讲解</h3><ol><li><p>需求：使用提前准备好的提示框，来把登录成功 / 失败结果提示给用户</p><p><img data-src="/img/image-20230404104955330.png" alt="image-20230404104955330"></p><p><img data-src="/img/image-20230404105003019.png" alt="image-20230404105003019"></p></li><li><p>使用提示框，反馈提示消息，因为有 4 处地方需要提示框，所以封装成函数</p><ol><li><p>获取提示框</p></li><li><p>封装提示框函数，重复调用，满足提示需求</p><p>功能：</p><ol><li>显示提示框</li><li>不同提示文字 msg，和成功绿色失败红色 isSuccess 参数（true 成功，false 失败）</li><li>过 2 秒后，让提示框自动消失</li></ol></li></ol></li><li><p>对应提示框核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 2.2 封装提示框函数，重复调用，满足提示需求</pre></td></tr><tr><td data-num="3"></td><td><pre> * 功能：</pre></td></tr><tr><td data-num="4"></td><td><pre> * 1. 显示提示框</pre></td></tr><tr><td data-num="5"></td><td><pre> * 2. 不同提示文字 msg，和成功绿色失败红色 isSuccess（true 成功，false 失败）</pre></td></tr><tr><td data-num="6"></td><td><pre> * 3. 过 2 秒后，让提示框自动消失</pre></td></tr><tr><td data-num="7"></td><td><pre>*/</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">function</span> <span class="token function">alertFn</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> isSuccess</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 1> 显示提示框</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  myAlert<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token comment">// 2> 实现细节</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  myAlert<span class="token punctuation">.</span>innerText <span class="token operator">=</span> msg</pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> bgStyle <span class="token operator">=</span> isSuccess <span class="token operator">?</span> <span class="token string">'alert-success'</span> <span class="token operator">:</span> <span class="token string">'alert-danger'</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  myAlert<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>bgStyle<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token comment">// 3> 过 2 秒隐藏</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    myAlert<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 提示：避免类名冲突，重置背景色</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    myAlert<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>bgStyle<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><h3 id="小结-12"><a class="anchor" href="#小结-12">#</a> 小结</h3><ol><li><p>我们什么时候需要封装函数？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 遇到相同逻辑，重复代码要复用的时候<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>如何封装一个函数呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 先明确要完成的需求，以及需要的参数，再来实现其中的细节，然后在需要的地方调用<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>我们的提示框是如何控制出现 / 隐藏的？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 添加或移除显示的类名即可<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="13form-serialize-插件"><a class="anchor" href="#13form-serialize-插件">#</a> 13.form-serialize 插件</h2><h3 id="目标-13"><a class="anchor" href="#目标-13">#</a> 目标</h3><p>使用 form-serialize 插件，快速收集目标表单范围内表单元素的值</p><h3 id="讲解-13"><a class="anchor" href="#讲解-13">#</a> 讲解</h3><ol><li><p>我们前面收集表单元素的值，是一个个标签获取的</p><p><img data-src="/img/image-20230404105134538.png" alt="image-20230404105134538"></p></li><li><p>如果一套表单里有很多很多表单元素，如何一次性快速收集出来呢？</p><p><img data-src="/img/image-20230404105141226.png" alt="image-20230404105141226"></p></li><li><p>使用 form-serialize 插件提供的 serialize 函数就可以办到</p></li><li><p>form-serialize 插件语法：</p><ol><li><p>引入 form-serialize 插件到自己网页中</p></li><li><p>使用 serialize 函数</p><ul><li><p>参数 1：要获取的 form 表单标签对象（要求表单元素需要有 name 属性 - 用来作为收集的数据中属性名）</p></li><li><p>参数 2：配置对象</p><ul><li>hash：<ul><li>true - 收集出来的是一个 JS 对象结构</li><li>false - 收集出来的是一个查询字符串格式</li></ul></li><li>empty：<ul><li>true - 收集空值</li><li>false - 不收集空值</li></ul></li></ul></li></ul></li></ol></li><li><p>需求：收集登录表单里用户名和密码</p></li><li><p>对应代码：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>form-serialize插件使用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example-form<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token comment">&lt;!-- </span></pre></td></tr><tr><td data-num="20"></td><td><pre>    目标：在点击提交时，使用 form-serialize 插件，快速收集表单元素值</pre></td></tr><tr><td data-num="21"></td><td><pre>    1. 把插件引入到自己网页中</pre></td></tr><tr><td data-num="22"></td><td><pre>  --></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./lib/form-serialize.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      <span class="token comment">/**</span></pre></td></tr><tr><td data-num="27"></td><td><pre>       * 2. 使用 serialize 函数，快速收集表单元素的值</pre></td></tr><tr><td data-num="28"></td><td><pre>       * 参数 1：要获取哪个表单的数据</pre></td></tr><tr><td data-num="29"></td><td><pre>       *  表单元素设置 name 属性，值会作为对象的属性名</pre></td></tr><tr><td data-num="30"></td><td><pre>       *  建议 name 属性的值，最好和接口文档参数名一致</pre></td></tr><tr><td data-num="31"></td><td><pre>       * 参数 2：配置对象</pre></td></tr><tr><td data-num="32"></td><td><pre>       *  hash 设置获取数据结构</pre></td></tr><tr><td data-num="33"></td><td><pre>       *    - true：JS 对象（推荐）一般请求体里提交给服务器</pre></td></tr><tr><td data-num="34"></td><td><pre>       *    - false: 查询字符串</pre></td></tr><tr><td data-num="35"></td><td><pre>       *  empty 设置是否获取空值</pre></td></tr><tr><td data-num="36"></td><td><pre>       *    - true: 获取空值（推荐）数据结构和标签结构一致</pre></td></tr><tr><td data-num="37"></td><td><pre>       *    - false：不获取空值</pre></td></tr><tr><td data-num="38"></td><td><pre>      */</pre></td></tr><tr><td data-num="39"></td><td><pre>      <span class="token keyword">const</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.example-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>form<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre>      <span class="token comment">// const data = serialize(form, &#123; hash: false, empty: true &#125;)</span></pre></td></tr><tr><td data-num="42"></td><td><pre>      <span class="token comment">// const data = serialize(form, &#123; hash: true, empty: false &#125;)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li></ol><h3 id="小结-13"><a class="anchor" href="#小结-13">#</a> 小结</h3><ol><li><p>我们什么时候使用 form-serialize 插件？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 快速收集表单元素的值 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>如何使用 form-serialize 插件？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;1. 先引入插件到自己的网页中，2. 准备 form 和表单元素的 name 属性，3. 使用 serialize 函数，传入 form 表单和配置对象<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>配置对象中 hash 和 empty 有什么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;hash 决定是收集为 JS 对象还是查询参数字符串，empty 决定是否收集空值<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="14案例-用户登录-form-serialize"><a class="anchor" href="#14案例-用户登录-form-serialize">#</a> 14. 案例 - 用户登录 - form-serialize</h2><h3 id="目标-14"><a class="anchor" href="#目标-14">#</a> 目标</h3><p>尝试通过 form-serialize 重新修改用户登录案例 - 收集用户名和密码</p><h3 id="讲解-14"><a class="anchor" href="#讲解-14">#</a> 讲解</h3><ol><li><p>基于模板代码，使用 form-serialize 插件来收集用户名和密码</p></li><li><p>在原来的代码基础上修改即可</p><ol><li><p>先引入插件</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 3.1 引入插件 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./lib/form-serialize.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li><li><p>然后修改代码</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 3.2 使用 serialize 函数，收集登录表单里用户名和密码</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.login-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>form<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// &#123;username: 'itheima007', password: '7654321'&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> username<span class="token punctuation">,</span> password <span class="token punctuation">&#125;</span> <span class="token operator">=</span> data</pre></td></tr></table></figure></li></ol></li></ol><h3 id="小结-14"><a class="anchor" href="#小结-14">#</a> 小结</h3><ol><li><p>如何把一个第三方插件使用在已完成的案例中？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 引入后，只需要使用在要修改的地方，修改一点就要确认测试一下<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="今日重点必须会"><a class="anchor" href="#今日重点必须会">#</a> 今日重点 (必须会)</h2><ol><li>axios 的配置项有哪几个，作用分别是什么？</li><li>接口文档都包含哪些信息？</li><li>在浏览器中如何查看查询参数 / 请求体，以及响应体数据？</li><li>请求报文和响应报文由几个部分组成，每个部分的作用？</li></ol><h1 id="二-ajax综合案例"><a class="anchor" href="#二-ajax综合案例">#</a> 二、AJAX 综合案例</h1><h2 id="知识点自测-2"><a class="anchor" href="#知识点自测-2">#</a> 知识点自测</h2><ol><li><p>以下代码运行结果是什么？（考察扩展运算符的使用）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'老李'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token operator">...</span>result</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span></pre></td></tr></table></figure><p>A：报错</p><p>B：18</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>什么是事件委托？</p><p>A：只能把单击事件委托给父元素绑定</p><p>B：可以把能冒泡的事件，委托给已存在的向上的任意标签元素绑定</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>事件对象 e.target 作用是什么？</p><p>A：获取到这次触发事件相关的信息</p><p>B：获取到这次触发事件目标标签元素</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>如果获取绑定在标签上自定义属性的值 10？</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>西游记<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>A：div 标签对象.innerHTML</p><p>B：div 标签对象.dataset.code</p><p>C：div 标签对象.code</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>哪个方法可以判断目标标签是否包含指定的类名？</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-div title info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>A: div 标签对象.className === 'title'</p><p>B: div 标签对象.classList.contains ('title')</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>伪数组取值哪种方式是正确的？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'老李'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'老刘'</span> <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>A: obj.0</p><p>B: obj[0]</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下哪个选项可以，往本地存储键为‘bgImg’，值为图片 url 网址的代码</p><p>A：localStorage.setItem('bgImg')</p><p>B：localStorage.getItem('bgImg')</p><p>C：localStorage.setItem ('bgImg', ' 图片 url 网址 ')</p><p>D：localStorage.getItem ('bgImg', ' 图片 url 网址 ')</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;C 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下代码运行结果是？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'老李'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'男'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr></table></figure><p>A：代码报错</p><p>B：[username, age, sex]</p><p>C：[&quot;username&quot;, &quot;age&quot;, &quot;sex&quot;]</p><p>D：[&quot;老李&quot;, 18, &quot;男&quot;]</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;C 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>下面哪个选项可以把数字字符串转成数字类型？</p><p>A：+’10‘</p><p>B：’10‘ + 0</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;A 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下代码运行后的结果是什么？（考察逻辑与的短路特性）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">18</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> result1 <span class="token operator">=</span> <span class="token punctuation">(</span>age <span class="token operator">||</span> <span class="token string">'有年龄'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> sex <span class="token operator">=</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> result2 <span class="token operator">=</span> sex <span class="token operator">||</span> <span class="token string">'没有性别'</span></pre></td></tr></table></figure><p>A：报错，报错</p><p>B：18，没有性别</p><p>C：有年龄，没有性别</p><p>D：18，’‘</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="目录-2"><a class="anchor" href="#目录-2">#</a> 目录</h2><ul><li>案例 - 图书管理</li><li>图片上传</li><li>案例 - 网站换肤</li><li>案例 - 个人信息设置</li></ul><h2 id="学习目标-2"><a class="anchor" href="#学习目标-2">#</a> 学习目标</h2><blockquote><p>今天主要就是练，巩固 axios 的使用</p></blockquote><ol><li>完成案例 - 图书管理系统（增删改查）经典业务</li><li>掌握图片上传的思路</li><li>完成案例 - 网站换肤并实现图片地址缓存</li><li>完成案例 - 个人信息设置</li></ol><h2 id="01案例_图书管理-介绍"><a class="anchor" href="#01案例_图书管理-介绍">#</a> 01. 案例_图书管理 - 介绍</h2><h3 id="目标-15"><a class="anchor" href="#目标-15">#</a> 目标</h3><p>案例 - 图书管理 - 介绍（介绍要完成的效果和练习到的思维）</p><h3 id="讲解-15"><a class="anchor" href="#讲解-15">#</a> 讲解</h3><ol><li><p>打开备课代码运行图书管理案例效果 - 介绍要完成的增删改查业务效果和 Bootstrap 弹框使用</p><p><img data-src="/img/image-20230404105414757.png" alt="image-20230404105414757"></p><p><img data-src="/img/image-20230404105421707.png" alt="image-20230404105421707"></p></li><li><p>分析步骤和对应的视频模块</p><ul><li>先学习 Bootstrap 弹框的使用（因为添加图书和编辑图书需要这个窗口来承载图书表单）</li><li>先做渲染图书列表（这样做添加和编辑以及删除可以看到数据变化，所以先做渲染）</li><li>再做新增图书功能</li><li>再做删除图书功能</li><li>再做编辑图书功能（注意：编辑和新增图书是 2 套弹框 - 后续做项目我们再用同 1 个弹框）</li></ul></li></ol><h3 id="小结-15"><a class="anchor" href="#小结-15">#</a> 小结</h3><ol><li><p>做完这个案例我们将会有什么收获呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 掌握前端经典增删改查的业务和思路，对以后开发很有帮助 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="02bootstrap-弹框_属性控制"><a class="anchor" href="#02bootstrap-弹框_属性控制">#</a> 02.Bootstrap 弹框_属性控制</h2><h3 id="目标-16"><a class="anchor" href="#目标-16">#</a> 目标</h3><p>使用属性方式控制 Bootstarp 弹框的显示和隐藏</p><h3 id="讲解-16"><a class="anchor" href="#讲解-16">#</a> 讲解</h3><ol><li><p>什么是 Bootstrap 弹框？</p><ul><li><p>不离开当前页面，显示单独内容，供用户操作</p><p><img data-src="/img/image-20230404105801739.png" alt="image-20230404105801739"></p></li></ul></li><li><p>需求：使用 Bootstrap 弹框，先做个简单效果，点击按钮，让弹框出现，点击 X 和 Close 让弹框隐藏</p><p><img data-src="/img/image-20230404105858660.png" alt="image-20230404105858660"></p></li><li><p>如何使用 Bootstrap 弹框呢？</p><ol><li><p>先引入 bootstrap.css 和 bootstrap.js 到自己网页中</p></li><li><p>准备弹框标签，确认结构（可以从 Bootstrap 官方文档的 Modal 里复制基础例子）- 运行到网页后，逐一对应标签和弹框每个部分对应关系</p></li><li><p>通过自定义属性，通知弹框的显示和隐藏，语法如下：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-bs-toggle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span> <span class="token attr-name">data-bs-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css选择器<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  显示弹框</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-bs-dismiss</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Close<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li></ol></li><li><p>去代码区实现一下</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Bootstrap 弹框<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">&lt;!-- 引入 bootstrap.css --></span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token comment">&lt;!-- </span></pre></td></tr><tr><td data-num="15"></td><td><pre>    目标：使用 Bootstrap 弹框</pre></td></tr><tr><td data-num="16"></td><td><pre>    1. 引入 bootstrap.css 和 bootstrap.js</pre></td></tr><tr><td data-num="17"></td><td><pre>    2. 准备弹框标签，确认结构</pre></td></tr><tr><td data-num="18"></td><td><pre>    3. 通过自定义属性，控制弹框的显示和隐藏</pre></td></tr><tr><td data-num="19"></td><td><pre>   --></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span> <span class="token attr-name">data-bs-toggle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span> <span class="token attr-name">data-bs-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.my-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>    显示弹框</pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token comment">&lt;!-- </span></pre></td></tr><tr><td data-num="25"></td><td><pre>    弹框标签</pre></td></tr><tr><td data-num="26"></td><td><pre>    bootstrap 的 modal 弹框，添加 modal 类名（默认隐藏）</pre></td></tr><tr><td data-num="27"></td><td><pre>   --></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal my-box<span class="token punctuation">"</span></span> <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-dialog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token comment">&lt;!-- 弹框 - 内容 --></span></pre></td></tr><tr><td data-num="31"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">&lt;!-- 弹框 - 头部 --></span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="34"></td><td><pre>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Modal title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="35"></td><td><pre>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn-close<span class="token punctuation">"</span></span> <span class="token attr-name">data-bs-dismiss</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token comment">&lt;!-- 弹框 - 身体 --></span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="39"></td><td><pre>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Modal body text goes here.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token comment">&lt;!-- 弹框 - 底部 --></span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="43"></td><td><pre>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-secondary<span class="token punctuation">"</span></span> <span class="token attr-name">data-bs-dismiss</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Close<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="44"></td><td><pre>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Save changes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="46"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="48"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>  <span class="token comment">&lt;!-- 引入 bootstrap.js --></span></pre></td></tr><tr><td data-num="51"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li></ol><h3 id="小结-16"><a class="anchor" href="#小结-16">#</a> 小结</h3><ol><li><p>用哪个属性绑定来控制弹框显示呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;data-bs-toggle 和 data-bs-target&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>用哪个属性来控制隐藏弹框呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;data-bs-dismiss 关闭的是标签所在的当前提示框 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="03bootstrap-弹框_js控制"><a class="anchor" href="#03bootstrap-弹框_js控制">#</a> 03.Bootstrap 弹框_JS 控制</h2><h3 id="目标-17"><a class="anchor" href="#目标-17">#</a> 目标</h3><p>使用 JS 方式控制 Bootstarp 弹框的显示和隐藏</p><h3 id="讲解-17"><a class="anchor" href="#讲解-17">#</a> 讲解</h3><ol><li><p>为什么需要 JS 方式控制呢？</p><ul><li><p>当我显示之前，隐藏之前，需要执行一些 JS 逻辑代码，就需要引入 JS 控制弹框显示 / 隐藏的方式了</p></li><li><p>例如：</p><ul><li>点击编辑姓名按钮，在弹框显示之前，在输入框填入默认姓名</li><li>点击保存按钮，在弹框隐藏之前，获取用户填入的名字并打印</li></ul><p><img data-src="/img/image-20230404110038828.png" alt="image-20230404110038828"></p></li></ul></li><li><p>所以在现实和隐藏之前，需要执行 JS 代码逻辑，就使用 JS 方式 控制 Bootstrap 弹框显示和隐藏</p><p>语法如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 创建弹框对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> modalDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'css选择器'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> modal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span>modelDom<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 显示弹框</span></pre></td></tr><tr><td data-num="6"></td><td><pre>modal<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 隐藏弹框</span></pre></td></tr><tr><td data-num="8"></td><td><pre>modal<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>去代码区实现一下</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1. 创建弹框对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> modalDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.name-box'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> modal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span>modalDom<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 编辑姓名 -> 点击 -> 赋予默认姓名 -> 弹框显示</span></pre></td></tr><tr><td data-num="6"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.edit-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.username'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'默认姓名'</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 2. 显示弹框</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  modal<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 保存 -> 点击 ->-> 获取姓名打印 -> 弹框隐藏</span></pre></td></tr><tr><td data-num="14"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.save-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token keyword">const</span> username <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.username'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="16"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'模拟把姓名保存到服务器上'</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token comment">// 2. 隐藏弹框</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  modal<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-17"><a class="anchor" href="#小结-17">#</a> 小结</h3><ol><li><p>什么时候用属性控制，什么时候用 JS 控制 Bootstrap 弹框的显示 / 隐藏？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 直接出现 / 隐藏用属性方式控制，如果需要先执行一段 JS 逻辑再显示 / 隐藏就用 JS 方式控制 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="04案例_图书管理_渲染列表"><a class="anchor" href="#04案例_图书管理_渲染列表">#</a> 04. 案例_图书管理_渲染列表</h2><h3 id="目标-18"><a class="anchor" href="#目标-18">#</a> 目标</h3><p>完成图书管理案例 - 图书列表数据渲染效果</p><h3 id="讲解-18"><a class="anchor" href="#讲解-18">#</a> 讲解</h3><ol><li><p>需求：基于 axios 获取到图书列表数据，并用 JS 代码渲染数据，到准备好的模板标签中</p><p><img data-src="/img/image-20230404110943200.png" alt="image-20230404110943200"></p></li><li><p>步骤：</p><ol><li><p>获取数据</p></li><li><p>渲染数据</p><p><img data-src="/img/image-20230404110953752.png" alt="image-20230404110953752"></p><p><img data-src="/img/image-20230404111014560.png" alt="image-20230404111014560"></p></li></ol></li><li><p>获取数据的时候，需要给自己起一个外号，为什么需要给自己起一个外号呢？</p><ul><li>我们所有人数据都来自同一个服务器上，为了区分每个同学不同的数据，需要大家设置一个外号告诉服务器，服务器就会返回你对应的图书数据了</li></ul></li><li><p>核心代码如下：</p><blockquote><p>因为默认展示列表，新增，修改，删除后都要重新获取并刷新列表，所以把获取数据渲染数据的代码封装在一个函数内，方便复用</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 1：渲染图书列表</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1.1 获取数据</pre></td></tr><tr><td data-num="4"></td><td><pre> *  1.2 渲染数据</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> creator <span class="token operator">=</span> <span class="token string">'老张'</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 封装 - 获取并渲染图书列表函数</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">function</span> <span class="token function">getBooksList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 1.1 获取数据</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/books'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token comment">// 外号：获取对应数据</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      creator</pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// console.log(result)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">const</span> bookList <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// console.log(bookList)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 1.2 渲染数据</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">const</span> htmlStr <span class="token operator">=</span> bookList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;tr></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>      &lt;td><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/td></span></pre></td></tr><tr><td data-num="24"></td><td><pre>      &lt;td><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>bookname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/td></span></pre></td></tr><tr><td data-num="25"></td><td><pre>      &lt;td><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/td></span></pre></td></tr><tr><td data-num="26"></td><td><pre>      &lt;td><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>publisher<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/td></span></pre></td></tr><tr><td data-num="27"></td><td><pre>      &lt;td data-id=<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">></span></pre></td></tr><tr><td data-num="28"></td><td><pre>        &lt;span class="del">删除&lt;/span></pre></td></tr><tr><td data-num="29"></td><td><pre>        &lt;span class="edit">编辑&lt;/span></pre></td></tr><tr><td data-num="30"></td><td><pre>      &lt;/td></pre></td></tr><tr><td data-num="31"></td><td><pre>    &lt;/tr><span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token comment">// console.log(htmlStr)</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> htmlStr</pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token comment">// 网页加载运行，获取并渲染列表一次</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token function">getBooksList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-18"><a class="anchor" href="#小结-18">#</a> 小结</h3><ol><li><p>渲染数据列表的 2 个步骤是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 获取数据，分析结构渲染到页面上 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="05案例_图书管理_新增图书"><a class="anchor" href="#05案例_图书管理_新增图书">#</a> 05. 案例_图书管理_新增图书</h2><h3 id="目标-19"><a class="anchor" href="#目标-19">#</a> 目标</h3><p>完成图书管理案例 - 新增图书需求</p><h3 id="讲解-19"><a class="anchor" href="#讲解-19">#</a> 讲解</h3><ol><li><p>需求：点击添加按钮，出现准备好的新增图书弹框，填写图书信息提交到服务器保存，并更新图书列表</p><p><img data-src="/img/image-20230404111235862.png" alt="image-20230404111235862"></p><p><img data-src="/img/image-20230404111251254.png" alt="image-20230404111251254"></p></li><li><p>步骤：</p><ol><li><p>新增弹框（控制显示和隐藏）（基于 Bootstrap 弹框和准备好的表单 - 用属性和 JS 方式控制）</p></li><li><p>在点击保存按钮时，收集数据 &amp; 提交保存</p></li><li><p>刷新 - 图书列表）（重新调用下之前封装的获取并渲染列表的函数）</p><p><img data-src="/img/image-20230404111343653.png" alt="image-20230404111343653"></p></li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 2：新增图书</pre></td></tr><tr><td data-num="3"></td><td><pre> *  2.1 新增弹框 -> 显示和隐藏</pre></td></tr><tr><td data-num="4"></td><td><pre> *  2.2 收集表单数据，并提交到服务器保存</pre></td></tr><tr><td data-num="5"></td><td><pre> *  2.3 刷新图书列表</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 2.1 创建弹框对象</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> addModalDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.add-modal'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> addModal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span>addModalDom<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 保存按钮 -> 点击 -> 隐藏弹框</span></pre></td></tr><tr><td data-num="11"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.add-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token comment">// 2.2 收集表单数据，并提交到服务器保存</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">const</span> addForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.add-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> bookObj <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>addForm<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token comment">// console.log(bookObj)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token comment">// 提交到服务器</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/books'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token operator">...</span>bookObj<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      creator</pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// console.log(result)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 2.3 添加成功后，重新请求并渲染图书列表</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token function">getBooksList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token comment">// 重置表单</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    addForm<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">// 隐藏弹框</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    addModal<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-19"><a class="anchor" href="#小结-19">#</a> 小结</h3><ol><li><p>新增数据的 3 个步骤是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 准备好数据标签和样式，然后收集表单数据提交保存，刷新列表 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="06案例_图书管理_删除图书"><a class="anchor" href="#06案例_图书管理_删除图书">#</a> 06. 案例_图书管理_删除图书</h2><h3 id="目标-20"><a class="anchor" href="#目标-20">#</a> 目标</h3><p>完成图书管理案例 - 删除图书需求</p><h3 id="讲解-20"><a class="anchor" href="#讲解-20">#</a> 讲解</h3><ol><li><p>需求：点击图书删除元素，删除当前图书数据</p><p><img data-src="/img/image-20230404111530311.png" alt="image-20230404111530311"></p><p><img data-src="/img/image-20230404111546639.png" alt="image-20230404111546639"></p></li><li><p>步骤：</p><ol><li><p>给删除元素，绑定点击事件（事件委托方式并判断点击的是删除元素才走删除逻辑代码），并获取到要删除的数据 id</p></li><li><p>基于 axios 和接口文档，调用删除接口，让服务器删除这条数据</p></li><li><p>重新获取并刷新图书列表</p><p><img data-src="/img/image-20230404111612125.png" alt="image-20230404111612125"></p></li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 3：删除图书</pre></td></tr><tr><td data-num="3"></td><td><pre> *  3.1 删除元素绑定点击事件 -> 获取图书 id</pre></td></tr><tr><td data-num="4"></td><td><pre> *  3.2 调用删除接口</pre></td></tr><tr><td data-num="5"></td><td><pre> *  3.3 刷新图书列表</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 3.1 删除元素 -> 点击（事件委托）</span></pre></td></tr><tr><td data-num="8"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 获取触发事件目标元素</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">// console.log(e.target)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token comment">// 判断点击的是删除元素</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'del'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">//console.log (' 点击删除元素 ')</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 获取图书 id（自定义属性 id）</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">const</span> theId <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// console.log(theId)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 3.2 调用删除接口</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://hmajax.itheima.net/api/books/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>theId<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'DELETE'</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token comment">// 3.3 刷新图书列表</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token function">getBooksList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-20"><a class="anchor" href="#小结-20">#</a> 小结</h3><ol><li><p>删除数据的步骤是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 告知服务器要删除的数据 id，服务器删除后，重新获取并刷新列表 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="07-09案例_图书管理_编辑图书"><a class="anchor" href="#07-09案例_图书管理_编辑图书">#</a> 07-09. 案例_图书管理_编辑图书</h2><h3 id="目标-21"><a class="anchor" href="#目标-21">#</a> 目标</h3><p>完成图书管理案例 - 编辑图书需求</p><h3 id="讲解-21"><a class="anchor" href="#讲解-21">#</a> 讲解</h3><ol><li><p>因为编辑图书要做回显等，比较复杂，所以分了 3 个视频来讲解</p></li><li><p>需求：完成编辑图书回显当前图书数据到编辑表单，在用户点击修改按钮，收集数据提交到服务器保存，并刷新列表</p><p><img data-src="/img/image-20230404111722254.png" alt="image-20230404111722254"></p></li><li><p>编辑数据的核心思路：</p><ol><li><p>给编辑元素，绑定点击事件（事件委托方式并判断点击的是编辑元素才走编辑逻辑代码），并获取到要编辑的数据 id</p></li><li><p>基于 axios 和接口文档，调用查询图书详情接口，获取正在编辑的图书数据，并回显到表单中（页面上的数据是在用户的浏览器中不够准备，所以只要是查看数据都要从服务器获取）</p><p><img data-src="/img/image-20230404111739153.png" alt="image-20230404111739153"></p></li><li><p>收集并提交保存修改数据，并重新从服务器获取列表刷新页面</p><p><img data-src="/img/image-20230404111756655.png" alt="image-20230404111756655"></p></li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 4：编辑图书</pre></td></tr><tr><td data-num="3"></td><td><pre> *  4.1 编辑弹框 -> 显示和隐藏</pre></td></tr><tr><td data-num="4"></td><td><pre> *  4.2 获取当前编辑图书数据 -> 回显到编辑表单中</pre></td></tr><tr><td data-num="5"></td><td><pre> *  4.3 提交保存修改，并刷新列表</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 4.1 编辑弹框 -> 显示和隐藏</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> editDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.edit-modal'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> editModal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span>editDom<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 编辑元素 -> 点击 -> 弹框显示</span></pre></td></tr><tr><td data-num="11"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token comment">// 判断点击的是否为编辑元素</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'edit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 4.2 获取当前编辑图书数据 -> 回显到编辑表单中</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">const</span> theId <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://hmajax.itheima.net/api/books/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>theId<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token keyword">const</span> bookObj <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token comment">// document.querySelector('.edit-form .bookname').value = bookObj.bookname</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token comment">// document.querySelector('.edit-form .author').value = bookObj.author</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token comment">// 数据对象 “属性” 和标签 “类名” 一致</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token comment">// 遍历数据对象，使用属性去获取对应的标签，快速赋值</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>bookObj<span class="token punctuation">)</span> <span class="token comment">// ['id', 'bookname', 'author', 'publisher']</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.edit-form .</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>key<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> bookObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    editModal<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">// 修改按钮 -> 点击 -> 隐藏弹框</span></pre></td></tr><tr><td data-num="33"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.edit-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token comment">// 4.3 提交保存修改，并刷新列表</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token keyword">const</span> editForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.edit-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> id<span class="token punctuation">,</span> bookname<span class="token punctuation">,</span> author<span class="token punctuation">,</span> publisher <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>editForm<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  <span class="token comment">// 保存正在编辑的图书 id，隐藏起来：无需让用户修改</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  <span class="token comment">// &lt;input type="hidden" class="id" name="id" value="84783"></span></pre></td></tr><tr><td data-num="39"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://hmajax.itheima.net/api/books/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>      bookname<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="44"></td><td><pre>      author<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="45"></td><td><pre>      publisher<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="46"></td><td><pre>      creator</pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token comment">// 修改成功以后，重新获取并刷新列表</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token function">getBooksList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token comment">// 隐藏弹框</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    editModal<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="54"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-21"><a class="anchor" href="#小结-21">#</a> 小结</h3><ol><li><p>编辑数据的步骤是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 获取正在编辑数据并回显，收集编辑表单的数据提交保存，重新获取并刷新列表 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="10案例_图书管理_总结"><a class="anchor" href="#10案例_图书管理_总结">#</a> 10. 案例_图书管理_总结</h2><h3 id="目标-22"><a class="anchor" href="#目标-22">#</a> 目标</h3><p>总结下增删改查的核心思路</p><h3 id="讲解-22"><a class="anchor" href="#讲解-22">#</a> 讲解</h3><ol><li><p>因为增删改查的业务在前端实际开发中非常常见，思路是可以通用的，所以总结下思路</p><blockquote><p>1. 渲染列表（查）</p><p>2. 新增图书（增）</p><p>3. 删除图书（删）</p><p>4. 编辑图书（改）</p></blockquote><p><img data-src="/img/image-20230404111941722.png" alt="image-20230404111941722"></p></li><li><p>渲染数据（查）</p><blockquote><p>核心思路：获取数据 -&gt; 渲染数据</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1.1 获取数据</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">const</span> bookList <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// 1.2 渲染数据</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">const</span> htmlStr <span class="token operator">=</span> bookList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;tr></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    &lt;td><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/td></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    &lt;td><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>bookname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/td></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    &lt;td><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/td></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    &lt;td><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>publisher<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/td></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    &lt;td data-id=<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>      &lt;span class="del">删除&lt;/span></pre></td></tr><tr><td data-num="13"></td><td><pre>      &lt;span class="edit">编辑&lt;/span></pre></td></tr><tr><td data-num="14"></td><td><pre>    &lt;/td></pre></td></tr><tr><td data-num="15"></td><td><pre>  &lt;/tr><span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> htmlStr</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>新增数据（增）</p><blockquote><p>核心思路：准备页面标签 -&gt; 收集数据提交（必须） -&gt; 刷新页面列表（可选）</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 2.1 创建弹框对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> addModalDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.add-modal'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> addModal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span>addModalDom<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.add-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 2.2 收集表单数据，并提交到服务器保存</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">const</span> addForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.add-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">const</span> bookObj <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>addForm<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 2.3 添加成功后，重新请求并渲染图书列表</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">getBooksList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    addForm<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    addModal<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="/img/image-20230404112942935.png" alt="image-20230404112942935"></p></li><li><p>删除图书（删）</p><blockquote><p>核心思路：绑定点击事件（获取要删除的图书唯一标识） -&gt; 调用删除接口（让服务器删除此数据） -&gt; 成功后重新获取并刷新列表</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 3.1 删除元素 -> 点击（事件委托）</span></pre></td></tr><tr><td data-num="2"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'del'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 获取图书 id（自定义属性 id）</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">const</span> theId <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 3.2 调用删除接口</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token comment">// 3.3 刷新图书列表</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token function">getBooksList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="/img/image-20230404113338815.png" alt="image-20230404113338815"></p></li><li><p>编辑图书（改）</p><blockquote><p>核心思路：准备编辑图书表单 -&gt; 表单回显正在编辑的数据 -&gt; 点击修改收集数据 -&gt; 提交到服务器保存 -&gt; 重新获取并刷新列表</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 4.1 编辑弹框 -> 显示和隐藏</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> editDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.edit-modal'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> editModal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span>editDom<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'edit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 4.2 获取当前编辑图书数据 -> 回显到编辑表单中</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">const</span> theId <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>id</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token keyword">const</span> bookObj <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token comment">// 遍历数据对象，使用属性去获取对应的标签，快速赋值</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>bookObj<span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>      keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.edit-form .</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>key<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> bookObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    editModal<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.edit-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token comment">// 4.3 提交保存修改，并刷新列表</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token keyword">const</span> editForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.edit-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> id<span class="token punctuation">,</span> bookname<span class="token punctuation">,</span> author<span class="token punctuation">,</span> publisher <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>editForm<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token comment">// 保存正在编辑的图书 id，隐藏起来：无需让用户修改</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token comment">// &lt;input type="hidden" class="id" name="id" value="84783"></span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token function">getBooksList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    editModal<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="/img/image-20230404113702515.png" alt="image-20230404113702515"></p></li></ol><h3 id="小结-22"><a class="anchor" href="#小结-22">#</a> 小结</h3><ol><li><p>学完图书管理案例，我们收货了什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 现在编辑的虽然是图书数据，以后编辑其他数据，再做增删改查都是差不多的思路 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="11图片上传"><a class="anchor" href="#11图片上传">#</a> 11. 图片上传</h2><h3 id="目标-23"><a class="anchor" href="#目标-23">#</a> 目标</h3><p>把本地图片上传到网页上显示</p><h3 id="讲解-23"><a class="anchor" href="#讲解-23">#</a> 讲解</h3><ol><li><p>什么是图片上传？</p><ul><li>就是把本地的图片上传到网页上显示</li></ul></li><li><p>图片上传怎么做？</p><ul><li>先依靠文件选择元素获取用户选择的本地文件，接着提交到服务器保存，服务器会返回图片的 url 网址，然后把网址加载到 img 标签的 src 属性中即可显示</li></ul></li><li><p>为什么不直接显示到浏览器上，要放到服务器上呢？</p><ul><li>因为浏览器保存是临时的，如果你想随时随地访问图片，需要上传到服务器上</li></ul></li><li><p>图片上传怎么做呢？</p><ol><li><p>先获取图片文件对象</p></li><li><p>使用 FormData 表单数据对象装入（因为图片是文件而不是以前的数字和字符串了所以传递文件一般需要放入 FormData 以键值对 - 文件流的数据传递（可以查看请求体 - 确认请求体结构）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>参数名<span class="token punctuation">,</span> 值<span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>提交表单数据对象，使用服务器返回图片 url 网址</p></li></ol></li><li><p>核心代码如下：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>图片上传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token comment">&lt;!-- 文件选择元素 --></span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-img<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="19"></td><td><pre>     * 目标：图片上传，显示到网页上</pre></td></tr><tr><td data-num="20"></td><td><pre>     *  1. 获取图片文件</pre></td></tr><tr><td data-num="21"></td><td><pre>     *  2. 使用 FormData 携带图片文件</pre></td></tr><tr><td data-num="22"></td><td><pre>     *  3. 提交到服务器，获取图片 url 网址使用</pre></td></tr><tr><td data-num="23"></td><td><pre>    */</pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 文件选择元素 ->change 改变事件</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.upload'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      <span class="token comment">// 1. 获取图片文件</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      <span class="token comment">// 2. 使用 FormData 携带图片文件</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      <span class="token keyword">const</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      <span class="token comment">// 3. 提交到服务器，获取图片 url 网址使用</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/uploadimg'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token literal-property property">data</span><span class="token operator">:</span> fd</pre></td></tr><tr><td data-num="36"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token comment">// 取出图片 url 网址，用 img 标签加载显示</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token keyword">const</span> imgUrl <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url</pre></td></tr><tr><td data-num="40"></td><td><pre>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgUrl</pre></td></tr><tr><td data-num="41"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li></ol><h3 id="小结-23"><a class="anchor" href="#小结-23">#</a> 小结</h3><ol><li><p>图片上传的思路是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 先用文件选择元素，获取到文件对象，然后装入 FormData 表单对象中，再发给服务器，得到图片在服务器的 URL 网址，再通过 img 标签加载图片显示 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="12案例_网站-更换背景图"><a class="anchor" href="#12案例_网站-更换背景图">#</a> 12. 案例_网站 - 更换背景图</h2><h3 id="目标-24"><a class="anchor" href="#目标-24">#</a> 目标</h3><p>实现更换网站背景图的效果</p><h3 id="讲解-24"><a class="anchor" href="#讲解-24">#</a> 讲解</h3><ol><li><p>需求：先运行备课代码，查看要完成的效果，点击右上角选择本机中提供的素材图片，更换网站背景图</p><p><img data-src="/img/image-20230404122349505.png" alt="image-20230404122349505"></p></li><li><p>网站更换背景图如何实现呢，并且保证刷新后背景图还在？具体步骤：</p><ol><li>先获取到用户选择的背景图片，上传并把服务器返回的图片 url 网址设置给 body 背景</li><li>上传成功时，保存图片 url 网址到 localStorage 中</li><li>网页运行后，获取 localStorage 中的图片的 url 网址使用（并判断本地有图片 url 网址字符串才设置）</li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：网站 - 更换背景</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1. 选择图片上传，设置 body 背景</pre></td></tr><tr><td data-num="4"></td><td><pre> *  2. 上传成功时，"保存" 图片 url 网址</pre></td></tr><tr><td data-num="5"></td><td><pre> *  3. 网页运行后，"获取"url 网址使用</pre></td></tr><tr><td data-num="6"></td><td><pre> * */</pre></td></tr><tr><td data-num="7"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.bg-ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 1. 选择图片上传，设置 body 背景</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">const</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/uploadimg'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> fd</pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">const</span> imgUrl <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url</pre></td></tr><tr><td data-num="18"></td><td><pre>    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundImage <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>imgUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 2. 上传成功时，"保存" 图片 url 网址</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'bgImg'</span><span class="token punctuation">,</span> imgUrl<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">// 3. 网页运行后，"获取"url 网址使用</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">const</span> bgUrl <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'bgImg'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bgUrl<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>bgUrl <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundImage <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>bgUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-24"><a class="anchor" href="#小结-24">#</a> 小结</h3><ol><li><p>localStorage 取值和赋值的语法分别是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;localStorage.getItem ('key') 是取值，localStorage.setItem ('key', 'value') 是赋值 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="13案例_个人信息设置-介绍"><a class="anchor" href="#13案例_个人信息设置-介绍">#</a> 13. 案例_个人信息设置 - 介绍</h2><h3 id="目标-25"><a class="anchor" href="#目标-25">#</a> 目标</h3><p>介绍个人信息设置案例 - 需要完成哪些效果，分几个视频讲解</p><h3 id="讲解-25"><a class="anchor" href="#讲解-25">#</a> 讲解</h3><ol><li><p>需求：先运行备课代码，查看要完成的效果</p><p><img data-src="/img/image-20230404123206073.png" alt="image-20230404123206073"></p></li><li><p>本视频分为，信息回显 + 头像修改 + 信息修改 + 提示框反馈 4 部分</p><ol><li>先完成信息回显</li><li>再做头像修改 - 立刻就更新给此用户</li><li>收集个人信息表单 - 提交保存</li><li>提交后反馈结果给用户（提示框）</li></ol></li></ol><h3 id="小结-25"><a class="anchor" href="#小结-25">#</a> 小结</h3><p>暂无</p><h2 id="14案例_个人信息设置-信息渲染"><a class="anchor" href="#14案例_个人信息设置-信息渲染">#</a> 14. 案例_个人信息设置 - 信息渲染</h2><h3 id="目标-26"><a class="anchor" href="#目标-26">#</a> 目标</h3><p>把外号对应的用户信息渲染到页面上</p><h3 id="讲解-26"><a class="anchor" href="#讲解-26">#</a> 讲解</h3><ol><li><p>需求：把外号对应的个人信息和头像，渲染到页面表单和头像标签上。</p><p><img data-src="/img/image-20230404123708765.png" alt="image-20230404123708765"></p></li><li><p>注意：还是需要准备一个外号，因为想要查看自己对应的用户信息，不想被别人影响</p></li><li><p>步骤：</p><ul><li>获取数据</li><li>渲染数据到页面</li></ul></li><li><p>代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 1：信息渲染</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1.1 获取用户的数据</pre></td></tr><tr><td data-num="4"></td><td><pre> *  1.2 回显数据到标签上</pre></td></tr><tr><td data-num="5"></td><td><pre> * */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> creator <span class="token operator">=</span> <span class="token string">'播仔'</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 1.1 获取用户的数据</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/settings'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    creator</pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> userObj <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token comment">// 1.2 回显数据到标签上</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'avatar'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token comment">// 赋予默认头像</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.prew'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src <span class="token operator">=</span> userObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'gender'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token comment">// 赋予默认性别</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token comment">// 获取性别单选框：[男 radio 元素，女 radio 元素]</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token keyword">const</span> gRadioList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.gender'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token comment">// 获取性别数字：0 男，1 女</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      <span class="token keyword">const</span> gNum <span class="token operator">=</span> userObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      <span class="token comment">// 通过性别数字，作为下标，找到对应性别单选框，设置选中状态</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      gRadioList<span class="token punctuation">[</span>gNum<span class="token punctuation">]</span><span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      <span class="token comment">// 赋予默认内容</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>key<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> userObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-26"><a class="anchor" href="#小结-26">#</a> 小结</h3><ol><li><p>渲染数据和图书列表的渲染思路是否一样呢，是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 一样的，都是获取到数据，然后渲染到页面上 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="15案例_个人信息设置-头像修改"><a class="anchor" href="#15案例_个人信息设置-头像修改">#</a> 15. 案例_个人信息设置 - 头像修改</h2><h3 id="目标-27"><a class="anchor" href="#目标-27">#</a> 目标</h3><p>修改用户的头像并立刻生效</p><h3 id="讲解-27"><a class="anchor" href="#讲解-27">#</a> 讲解</h3><ol><li><p>需求：点击修改用户头像</p><p><img data-src="/img/image-20230404124524401.png" alt="image-20230404124524401"></p></li><li><p>实现步骤如下：</p><ol><li><p>获取到用户选择的头像文件</p></li><li><p>调用头像修改接口，并除了头像文件外，还要在 FormData 表单数据对象中携带外号</p></li><li><p>提交到服务器保存此用户对应头像文件，并把返回的头像图片 url 网址设置在页面上</p><p><img data-src="/img/image-20230404124540629.png" alt="image-20230404124540629"></p></li></ol></li><li><p>注意：重新刷新重新获取，已经是修改后的头像了（证明服务器那边确实保存成功）</p></li><li><p>核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 2：修改头像</pre></td></tr><tr><td data-num="3"></td><td><pre> *  2.1 获取头像文件</pre></td></tr><tr><td data-num="4"></td><td><pre> *  2.2 提交服务器并更新头像</pre></td></tr><tr><td data-num="5"></td><td><pre> * */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 文件选择元素 ->change 事件</span></pre></td></tr><tr><td data-num="7"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.upload'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 2.1 获取头像文件</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">const</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'avatar'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'creator'</span><span class="token punctuation">,</span> creator<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">// 2.2 提交服务器并更新头像</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/avatar'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> fd</pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">const</span> imgUrl <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>avatar</pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 把新的头像回显到页面上</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.prew'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgUrl</pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-27"><a class="anchor" href="#小结-27">#</a> 小结</h3><ol><li><p>为什么这次上传头像，需要携带外号呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 因为这次头像到后端，是要保存在某个用户名下的，所以要把外号名字一起携带过去 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="16案例_个人信息设置-信息修改"><a class="anchor" href="#16案例_个人信息设置-信息修改">#</a> 16. 案例_个人信息设置 - 信息修改</h2><h3 id="目标-28"><a class="anchor" href="#目标-28">#</a> 目标</h3><p>把用户修改的信息提交到服务器保存</p><h3 id="讲解-28"><a class="anchor" href="#讲解-28">#</a> 讲解</h3><ol><li><p>需求：点击提交按钮，收集个人信息，提交到服务器保存（无需重新获取刷新，因为页面已经是最新的数据了）</p><ol><li><p>收集表单数据</p></li><li><p>提交到服务器保存 - 调用用户信息更新接口（注意请求方法是 PUT）代表数据更新的意思</p><p><img data-src="/img/image-20230404125310049.png" alt="image-20230404125310049"></p></li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 3：提交表单</pre></td></tr><tr><td data-num="3"></td><td><pre> *  3.1 收集表单信息</pre></td></tr><tr><td data-num="4"></td><td><pre> *  3.2 提交到服务器保存</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 保存修改 -> 点击</span></pre></td></tr><tr><td data-num="7"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.submit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 3.1 收集表单信息</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">const</span> userForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.user-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">const</span> userObj <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>userForm<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  userObj<span class="token punctuation">.</span>creator <span class="token operator">=</span> creator</pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token comment">// 性别数字字符串，转成数字类型</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  userObj<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token operator">+</span>userObj<span class="token punctuation">.</span>gender</pre></td></tr><tr><td data-num="14"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token comment">// 3.2 提交到服务器保存</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/settings'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> userObj</pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-28"><a class="anchor" href="#小结-28">#</a> 小结</h3><ol><li><p>信息修改数据和以前增删改查哪个实现的思路比较接近呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 编辑，首先回显已经做完了，然后收集用户最新改动后的数据，提交到服务器保存，因为页面最终就是用户刚写的数据，所以不用重新获取并刷新页面了 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="17案例_个人信息设置-提示框"><a class="anchor" href="#17案例_个人信息设置-提示框">#</a> 17. 案例_个人信息设置 - 提示框</h2><h3 id="目标-29"><a class="anchor" href="#目标-29">#</a> 目标</h3><p>把用户更新个人信息结果，用提示框反馈给用户</p><h3 id="讲解-29"><a class="anchor" href="#讲解-29">#</a> 讲解</h3><ol><li><p>需求：使用 bootstrap 提示框，提示个人信息设置后的结果</p><p><img data-src="/img/image-20230404125517679.png" alt="image-20230404125517679"></p></li><li><p>bootstrap 的 toast 提示框和 modal 弹框使用很像，语法如下：</p><ol><li><p>先准备对应的标签结构（模板里已有）</p></li><li><p>设置延迟自动消失的时间</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toast<span class="token punctuation">"</span></span> <span class="token attr-name">data-bs-delay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1500<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  提示框内容</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li><li><p>使用 JS 的方式，在 axios 请求响应成功时，展示结果</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 创建提示框对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> toastDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'css选择器'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> toast <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Toast</span><span class="token punctuation">(</span>toastDom<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 显示提示框</span></pre></td></tr><tr><td data-num="6"></td><td><pre>toast<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol></li><li><p>核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 3：提交表单</pre></td></tr><tr><td data-num="3"></td><td><pre> *  3.1 收集表单信息</pre></td></tr><tr><td data-num="4"></td><td><pre> *  3.2 提交到服务器保存</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * 目标 4：结果提示</pre></td></tr><tr><td data-num="8"></td><td><pre> *  4.1 创建 toast 对象</pre></td></tr><tr><td data-num="9"></td><td><pre> *  4.2 调用 show 方法 -> 显示提示框</pre></td></tr><tr><td data-num="10"></td><td><pre> */</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 保存修改 -> 点击</span></pre></td></tr><tr><td data-num="12"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.submit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">// 3.1 收集表单信息</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> userForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.user-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token keyword">const</span> userObj <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>userForm<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  userObj<span class="token punctuation">.</span>creator <span class="token operator">=</span> creator</pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token comment">// 性别数字字符串，转成数字类型</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  userObj<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token operator">+</span>userObj<span class="token punctuation">.</span>gender</pre></td></tr><tr><td data-num="19"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token comment">// 3.2 提交到服务器保存</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/settings'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> userObj</pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 4.1 创建 toast 对象</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">const</span> toastDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-toast'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">const</span> toast <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Toast</span><span class="token punctuation">(</span>toastDom<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">// 4.2 调用 show 方法 -> 显示提示框</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    toast<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-29"><a class="anchor" href="#小结-29">#</a> 小结</h3><ol><li><p>bootstrap 弹框什么时候用 JS 方式控制显示呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 需要执行一些其他的 JS 逻辑后，再去显示 / 隐藏弹框时 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="今日重点必须会-2"><a class="anchor" href="#今日重点必须会-2">#</a> 今日重点 (必须会)</h2><ol><li>掌握增删改查数据的思路</li><li>掌握图片上传的思路和流程</li><li>理解调用接口时，携带外号的作用</li><li>了解 bootstrap 弹框的使用</li></ol><h1 id="三-ajax原理"><a class="anchor" href="#三-ajax原理">#</a> 三、AJAX 原理</h1><h2 id="知识点自测-3"><a class="anchor" href="#知识点自测-3">#</a> 知识点自测</h2><ol><li><p>以下哪个方法可以把 JS 数据类型转成 JSON 字符串类型？</p><p>A. JSON.stringify()</p><p>B. JSON.parse()</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 选择 A&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下哪个方法，会延迟一段时间后，再执行函数体，并执行一次就停止？</p><p>A. setTimeout (函数体，毫秒值)</p><p>B. setInterval (函数体，毫秒值)</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 选择 A&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>下面代码 result 结果是多少？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">240</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> obj<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span></pre></td></tr></table></figure><p>A. true</p><p>B. 大于</p><p>C. 240</p><p>D. false</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 选 A&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>下面代码运行结果是多少？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">'http://www.baidu.com'</span></pre></td></tr><tr><td data-num="2"></td><td><pre>result <span class="token operator">+=</span> <span class="token string">'?a=10'</span></pre></td></tr><tr><td data-num="3"></td><td><pre>result <span class="token operator">+=</span> <span class="token string">'&amp;b=20'</span></pre></td></tr></table></figure><p>A：'<span class="exturl" data-url="aHR0cDovL3d3dy5iYWlkdS5jb20=">http://www.baidu.com</span>'</p><p>B：'?a=10'</p><p>C：'&amp;b=20'</p><p>D：'<span class="exturl" data-url="aHR0cDovL3d3dy5iYWlkdS5jb20/YT0xMCZhbXA7Yj0yMA==">http://www.baidu.com?a=10&amp;b=20</span>'</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 选 D&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>哪个事件能实时检测到输入框值的变化？</p><p>A：input 事件</p><p>B：change 事件</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 选 A&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="目录-3"><a class="anchor" href="#目录-3">#</a> 目录</h2><ul><li>XMLHttpRequest 的学习</li><li>Promise</li><li>封装简易版 axios</li><li>案例 - 天气预报</li></ul><h2 id="学习目标-3"><a class="anchor" href="#学习目标-3">#</a> 学习目标</h2><ol><li>了解原生 AJAX 语法 - XMLHttpRequest（XHR）</li><li>了解 Promise 的概念和使用</li><li>了解 axios 内部工作的大概过程（XHR + Promise）</li><li>案例 - 天气预报</li></ol><h2 id="01xmlhttprequest-基础使用"><a class="anchor" href="#01xmlhttprequest-基础使用">#</a> 01.XMLHttpRequest - 基础使用</h2><h3 id="目标-30"><a class="anchor" href="#目标-30">#</a> 目标</h3><p>了解 AJAX 原理 XHR 的基础使用</p><h3 id="讲解-30"><a class="anchor" href="#讲解-30">#</a> 讲解</h3><ol><li><p>AJAX 是浏览器与服务器通信的技术，采用 XMLHttpRequest 对象相关代码</p></li><li><p>axios 是对 XHR 相关代码进行了封装，让我们只关心传递的接口参数</p></li><li><p>学习 XHR 也是了解 axios 内部与服务器交互过程的真正原理</p><p><img data-src="/img/image-20230221182835545.png" alt="image-20230221182835545"></p></li><li><p>语法如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'请求方法'</span><span class="token punctuation">,</span> <span class="token string">'请求url网址'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// 响应结果</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="/img/image-20230221183057392.png" alt="image-20230221183057392"></p></li><li><p>需求：以一个需求来体验下原生 XHR 语法，获取所有省份列表并展示到页面上</p></li><li><p>代码如下：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>XMLHttpRequest_基础使用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-p<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="15"></td><td><pre>     * 目标：使用 XMLHttpRequest 对象与服务器通信</pre></td></tr><tr><td data-num="16"></td><td><pre>     *  1. 创建 XMLHttpRequest 对象</pre></td></tr><tr><td data-num="17"></td><td><pre>     *  2. 配置请求方法和请求 url 地址</pre></td></tr><tr><td data-num="18"></td><td><pre>     *  3. 监听 loadend 事件，接收响应结果</pre></td></tr><tr><td data-num="19"></td><td><pre>     *  4. 发起请求</pre></td></tr><tr><td data-num="20"></td><td><pre>    */</pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 1. 创建 XMLHttpRequest 对象</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 2. 配置请求方法和请求 url 地址</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// 3. 监听 loadend 事件，接收响应结果</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 4. 发起请求</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li></ol><h3 id="小结-30"><a class="anchor" href="#小结-30">#</a> 小结</h3><ol><li><p>AJAX 原理是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;window 提供的 XMLHttpRequest&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>为什么学习 XHR ？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 有更多与服务器数据通信方式 &lt;/li&gt;<br>&lt;li&gt; 了解 axios 内部原理 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>XHR 使用步骤？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;1. 创建 XHR 对象 2. 调用 open 方法，设置 url 和请求方法 3. 监听 loadend 事件，接收结果 4. 调用 send 方法，发起请求 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="02xmlhttprequest-查询参数"><a class="anchor" href="#02xmlhttprequest-查询参数">#</a> 02.XMLHttpRequest - 查询参数</h2><h3 id="目标-31"><a class="anchor" href="#目标-31">#</a> 目标</h3><p>使用 XHR 传递查询参数给服务器，获取匹配数据</p><h3 id="讲解-31"><a class="anchor" href="#讲解-31">#</a> 讲解</h3><ol><li><p>什么是查询参数：携带额外信息给服务器，返回匹配想要的数据</p></li><li><p>查询参数原理要携带的位置和语法：<span class="exturl" data-url="aHR0cDovL3h4eHguY29tL3h4eC94eHg/JUU1JThGJTgyJUU2JTk1JUIwJUU1JTkwJThEMT0lRTUlODAlQkMxJmFtcDslRTUlOEYlODIlRTYlOTUlQjAlRTUlOTAlOEQyPSVFNSU4MCVCQzI=">http://xxxx.com/xxx/xxx? 参数名 1 = 值 1 &amp; 参数名 2 = 值 2</span></p></li><li><p>所以，原生 XHR 需要自己在 url 后面携带查询参数字符串，没有 axios 帮助我们把 params 参数拼接到 url 字符串后面了</p></li><li><p>需求：查询河北省下属的城市列表</p><p><img data-src="/img/image-20230404133429378.png" alt="image-20230404133429378"></p></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：使用 XHR 携带查询参数，展示某个省下属的城市列表</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://hmajax.itheima.net/api/city?pname=辽宁省'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.city-p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-31"><a class="anchor" href="#小结-31">#</a> 小结</h3><ol><li><p>XHR 如何携带查询参数？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 在调用 open 方法的时候，在 url? 后面按照指定格式拼接参数名和值 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="03案例-地区查询"><a class="anchor" href="#03案例-地区查询">#</a> 03. 案例 - 地区查询</h2><h3 id="目标-32"><a class="anchor" href="#目标-32">#</a> 目标</h3><p>使用 XHR 完成案例地区查询</p><h3 id="讲解-32"><a class="anchor" href="#讲解-32">#</a> 讲解</h3><ol><li><p>需求：和我们之前做的类似，就是不用 axios 而是用 XHR 实现，输入省份和城市名字后，点击查询，传递多对查询参数并获取地区列表的需求</p><p><img data-src="/img/image-20230221184135458.png" alt="image-20230221184135458"></p></li><li><p>但是多个查询参数，如果自己拼接很麻烦，这里用 URLSearchParams 把参数对象转成 “参数名 = 值 &amp; 参数名 = 值 “格式的字符串，语法如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1. 创建 URLSearchParams 对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> paramsObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  参数名<span class="token number">1</span><span class="token operator">:</span> 值<span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  参数名<span class="token number">2</span><span class="token operator">:</span> 值<span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 2. 生成指定格式查询参数字符串</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> queryString <span class="token operator">=</span> paramsObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 结果：参数名 1 = 值 1&amp; 参数名 2 = 值 2</span></pre></td></tr></table></figure></li></ol><h3 id="小结-32"><a class="anchor" href="#小结-32">#</a> 小结</h3><ol><li><p>JS 对象如何转成查询参数格式字符串？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 在调用 open 方法的时候，在 url? 后面按照指定格式拼接参数名和值 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="04xmlhttprequest-数据提交"><a class="anchor" href="#04xmlhttprequest-数据提交">#</a> 04.XMLHttpRequest - 数据提交</h2><h3 id="目标-33"><a class="anchor" href="#目标-33">#</a> 目标</h3><p>通过 XHR 提交用户名和密码，完成注册功能</p><h3 id="讲解-33"><a class="anchor" href="#讲解-33">#</a> 讲解</h3><ol><li><p>了解原生 XHR 进行数据提交的方式</p></li><li><p>需求：通过 XHR 完成注册用户功能</p><p><img data-src="/img/image-20230404135245271.png" alt="image-20230404135245271"></p></li><li><p>步骤和语法：</p><ol><li><p>注意 1：但是这次没有 axios 帮我们了，我们需要自己设置请求头 Content-Type：application/json，来告诉服务器端，我们发过去的内容类型是 JSON 字符串，让他转成对应数据结构取值使用</p></li><li><p>注意 2：没有 axios 了，我们前端要传递的请求体数据，也没人帮我把 JS 对象转成 JSON 字符串了，需要我们自己转换</p></li><li><p>注意 3：原生 XHR 需要在 send 方法调用时，传入请求体携带</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'请求方法'</span><span class="token punctuation">,</span> <span class="token string">'请求url网址'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 1. 告诉服务器，我传递的内容类型，是 JSON 字符串</span></pre></td></tr><tr><td data-num="8"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 2. 准备数据并转成 JSON 字符串</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'itheima007'</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'7654321'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> userStr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 3. 发送请求体数据</span></pre></td></tr><tr><td data-num="13"></td><td><pre>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>userStr<span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：使用 xhr 进行数据提交 - 完成注册功能</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.reg-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://hmajax.itheima.net/api/register'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token comment">// 设置请求头 - 告诉服务器内容类型（JSON 字符串）</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">// 准备提交的数据</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> userObj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'itheima007'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'7654321'</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">const</span> userStr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>userObj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token comment">// 设置请求体，发起请求</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>userStr<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-33"><a class="anchor" href="#小结-33">#</a> 小结</h3><ol><li><p>XHR 如何提交请求体数据？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 在 send 中携带请求体数据，要按照后端要求的内容类型携带 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="05认识_promise"><a class="anchor" href="#05认识_promise">#</a> 05. 认识_Promise</h2><h3 id="目标-34"><a class="anchor" href="#目标-34">#</a> 目标</h3><p>认识 Promise 的作用和好处以及使用步骤</p><h3 id="讲解-34"><a class="anchor" href="#讲解-34">#</a> 讲解</h3><ol><li><p>什么是 Promise ？</p><ul><li>Promise 对象用于表示一个异步操作的最终完成（或失败）及其结构值</li></ul></li><li><p>Promise 的好处是什么？</p><ul><li><p>逻辑更清晰（成功或失败会关联后续的处理函数）</p></li><li><p>了解 axios 函数内部运作的机制</p><p><img data-src="/img/image-20230222113651404.png" alt="image-20230222113651404"></p></li><li><p>能解决回调函数地狱问题（后面会讲到），今天先来看下它的基础使用</p></li></ul></li><li><p>Promise 管理异步任务，语法怎么用？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1. 创建 Promise 对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token comment">// 2. 执行异步任务 - 并传递结果</span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token comment">// 成功调用: resolve (值) 触发 then () 执行</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token comment">// 失败调用: reject (值) 触发 catch () 执行</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 3. 接收结果</span></pre></td></tr><tr><td data-num="8"></td><td><pre>p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre> <span class="token comment">// 成功</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre> <span class="token comment">// 失败</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>示例代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：使用 Promise 管理异步任务</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 1. 创建 Promise 对象</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// 2. 执行异步代码</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">//resolve (' 模拟 AJAX 请求 - 成功结果 ')</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'模拟AJAX请求-失败结果'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 3. 获取结果</span></pre></td></tr><tr><td data-num="14"></td><td><pre>p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-34"><a class="anchor" href="#小结-34">#</a> 小结</h3><ol><li><p>什么是 Promise ?</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 表示（管理）一个异步操作最终状态和结果值的对象 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>为什么学习 Promise ?</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 成功和失败状态，可以关联对应处理函数，了解 axios 内部运作的原理 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>Promise 使用步骤？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;1. new Promise 对象执行异步任务。2. 用 resolve 关联 then 的回调函数传递成功结果。3. 用 reject 关联 catch 的回调函数传递失败结果。&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="06认识_promise-的状态"><a class="anchor" href="#06认识_promise-的状态">#</a> 06. 认识_Promise 的状态</h2><h3 id="目标-35"><a class="anchor" href="#目标-35">#</a> 目标</h3><p>认识 Promise 的三种状态，知道如何关联成功 / 失败的处理函数</p><h3 id="讲解-35"><a class="anchor" href="#讲解-35">#</a> 讲解</h3><ol><li><p>为什么要了解 Promise 的三种状态 ？</p><ul><li>知道 Promise 对象如何关联的处理函数，以及代码的执行顺序</li></ul></li><li><p>Promise 有哪三种状态？</p><blockquote><p>每个 Promise 对象必定处于以下三种状态之一</p></blockquote><ol><li>待定（pending）：初始状态，既没有被兑现，也没有被拒绝</li><li>已兑现（fulfilled）：操作成功完成</li><li>已拒绝（rejected）：操作失败</li></ol><blockquote><p>状态的英文字符串，可以理解为 Promise 对象内的字符串标识符，用于判断什么时候调用哪一个处理函数</p></blockquote></li><li><p>Promise 的状态改变有什么用：调用对应函数，改变 Promise 对象状态后，内部触发对应回调函数传参并执行</p><p><img data-src="/img/image-20230222120815484.png" alt="image-20230222120815484"></p></li><li><p>注意：每个 Promise 对象一旦被兑现 / 拒绝，那就是已敲定了，状态无法再被改变</p></li></ol><h3 id="小结-35"><a class="anchor" href="#小结-35">#</a> 小结</h3><ol><li><p>Promise 对象有哪 3 种状态？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 待定 pending，已兑现 fulfilled，已拒绝 rejected&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>Promise 状态有什么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 状态改变后，如何关联处理函数 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="07使用-promise-和-xhr_获取省份列表"><a class="anchor" href="#07使用-promise-和-xhr_获取省份列表">#</a> 07. 使用 Promise 和 XHR_获取省份列表</h2><h3 id="目标-36"><a class="anchor" href="#目标-36">#</a> 目标</h3><p>尝试用 Promise 管理 XHR 异步任务</p><h3 id="讲解-36"><a class="anchor" href="#讲解-36">#</a> 讲解</h3><ol><li><p>Promise 和 XHR 都已经学过基础语法了，我们可以来结合使用一下了</p></li><li><p>需求：使用 Promise 和 XHR 请求省份列表数据并展示到页面上</p><p><img data-src="/img/image-20230404140252181.png" alt="image-20230404140252181"></p></li><li><p>步骤：</p><ol><li><p>创建 Promise 对象</p></li><li><p>执行 XHR 异步代码，获取省份列表数据</p></li><li><p>关联成功或失败回调函数，做后续的处理</p><blockquote><p>错误情况：用地址错了 404 演示</p></blockquote></li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：使用 Promise 管理 XHR 请求省份列表</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1. 创建 Promise 对象</pre></td></tr><tr><td data-num="4"></td><td><pre> *  2. 执行 XHR 异步代码，获取省份列表</pre></td></tr><tr><td data-num="5"></td><td><pre> *  3. 关联成功或失败函数，做后续处理</pre></td></tr><tr><td data-num="6"></td><td><pre>*/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 1. 创建 Promise 对象</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 2. 执行 XHR 异步代码，获取省份列表</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">//xhr 如何判断响应成功还是失败的？</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 2xx 开头的都是成功响应状态码</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// 3. 关联成功或失败函数，做后续处理</span></pre></td></tr><tr><td data-num="25"></td><td><pre>p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token comment">// 错误对象要用 console.dir 详细打印</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token comment">// 服务器返回错误提示消息，插入到 p 标签显示</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> error<span class="token punctuation">.</span>message</pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-36"><a class="anchor" href="#小结-36">#</a> 小结</h3><ol><li><p>AJAX 如何判断是否请求响应成功了？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 响应状态码在大于等于 200 并且小于 300 的范围是成功的 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="08封装_简易axios-获取省份列表"><a class="anchor" href="#08封装_简易axios-获取省份列表">#</a> 08. 封装_简易 axios - 获取省份列表</h2><h3 id="目标-37"><a class="anchor" href="#目标-37">#</a> 目标</h3><p>模拟 axios 函数封装，更深入了解 axios 内部运作原理</p><h3 id="讲解-37"><a class="anchor" href="#讲解-37">#</a> 讲解</h3><ol><li><p>需求：基于 Promise 和 XHR 封装 myAxios 函数，获取省份列表展示到页面</p><p><img data-src="/img/image-20230222130217597.png" alt="image-20230222130217597"></p></li><li><p>核心语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// XHR 请求</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 调用成功 / 失败的处理程序</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'目标资源地址'</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>步骤：</p><ol><li>定义 myAxios 函数，接收配置对象，返回 Promise 对象</li><li>发起 XHR 请求，默认请求方法为 GET</li><li>调用成功 / 失败的处理程序</li><li>使用 myAxios 函数，获取省份列表展示</li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：封装_简易 axios 函数_获取省份列表</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1. 定义 myAxios 函数，接收配置对象，返回 Promise 对象</pre></td></tr><tr><td data-num="4"></td><td><pre> *  2. 发起 XHR 请求，默认请求方法为 GET</pre></td></tr><tr><td data-num="5"></td><td><pre> *  3. 调用成功 / 失败的处理程序</pre></td></tr><tr><td data-num="6"></td><td><pre> *  4. 使用 myAxios 函数，获取省份列表展示</pre></td></tr><tr><td data-num="7"></td><td><pre>*/</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 1. 定义 myAxios 函数，接收配置对象，返回 Promise 对象</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">function</span> <span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 2. 发起 XHR 请求，默认请求方法为 GET</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>method <span class="token operator">||</span> <span class="token string">'GET'</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>url<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token comment">// 3. 调用成功 / 失败的处理程序</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">// 4. 使用 myAxios 函数，获取省份列表展示</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> error<span class="token punctuation">.</span>message</pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-37"><a class="anchor" href="#小结-37">#</a> 小结</h3><ol><li><p>自己封装的 myAxios 如何设置默认请求方法 GET?</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;config.method 判断有值就用，无值用‘GET’方法 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="09封装_简易axios-获取地区列表"><a class="anchor" href="#09封装_简易axios-获取地区列表">#</a> 09. 封装_简易 axios - 获取地区列表</h2><h3 id="目标-38"><a class="anchor" href="#目标-38">#</a> 目标</h3><p>修改 myAxios 函数支持传递查询参数，获取辽宁省，大连市的地区列表</p><h3 id="讲解-38"><a class="anchor" href="#讲解-38">#</a> 讲解</h3><ol><li><p>需求：在上个封装的建议 axios 函数基础上，修改代码支持传递查询参数功能</p></li><li><p>修改步骤：</p><ol><li>myAxios 函数调用后，判断 params 选项</li><li>基于 URLSearchParams 转换查询参数字符串</li><li>使用自己封装的 myAxios 函数显示地区列表</li></ol></li><li><p>核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 1. 判断有 params 选项，携带查询参数</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token comment">// 2. 使用 URLSearchParams 转换，并携带到 url 上</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token keyword">const</span> paramsObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>params<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token keyword">const</span> queryString <span class="token operator">=</span> paramsObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token comment">// 把查询参数字符串，拼接在 url？后面</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      config<span class="token punctuation">.</span>url <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>queryString<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>method <span class="token operator">||</span> <span class="token string">'GET'</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>url<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">// 3. 使用 myAxios 函数，获取地区列表</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/area'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token literal-property property">pname</span><span class="token operator">:</span> <span class="token string">'辽宁省'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token literal-property property">cname</span><span class="token operator">:</span> <span class="token string">'大连市'</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&lt;br>'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-38"><a class="anchor" href="#小结-38">#</a> 小结</h3><ol><li><p>外面传入查询参数对象，myAxios 函数内如何转查询参数字符串？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 使用 URLSearchParams 对象转换 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="10封装_简易axios-注册用户"><a class="anchor" href="#10封装_简易axios-注册用户">#</a> 10. 封装_简易 axios - 注册用户</h2><h3 id="目标-39"><a class="anchor" href="#目标-39">#</a> 目标</h3><p>修改 myAxios 函数支持传递请求体数据，完成注册用户</p><h3 id="讲解-39"><a class="anchor" href="#讲解-39">#</a> 讲解</h3><ol><li><p>需求：修改 myAxios 函数支持传递请求体数据，完成注册用户功能</p></li><li><p>修改步骤：</p><ol><li>myAxios 函数调用后，判断 data 选项</li><li>转换数据类型，在 send 方法中发送</li><li>使用自己封装的 myAxios 函数完成注册用户功能</li></ol></li><li><p>核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">const</span> paramsObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>params<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token keyword">const</span> queryString <span class="token operator">=</span> paramsObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      config<span class="token punctuation">.</span>url <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>queryString<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>method <span class="token operator">||</span> <span class="token string">'GET'</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>url<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// 1. 判断有 data 选项，携带请求体</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token comment">// 2. 转换数据类型，在 send 中发送</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token keyword">const</span> jsonStr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      <span class="token comment">// 如果没有请求体数据，正常的发起请求</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.reg-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token comment">// 3. 使用 myAxios 函数，完成注册用户</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/register'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'itheima999'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'666666'</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-39"><a class="anchor" href="#小结-39">#</a> 小结</h3><ol><li><p>外面传入 data 选项，myAxios 函数内如何携带请求体参数？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 判断外面传入了这个属性，自己转成 JSON 字符串并设置请求头并在 send 方法中携带 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="11-12案例_天气预报-默认数据"><a class="anchor" href="#11-12案例_天气预报-默认数据">#</a> 11-12. 案例_天气预报 - 默认数据</h2><h3 id="目标-40"><a class="anchor" href="#目标-40">#</a> 目标</h3><p>把北京市的数据，填充到页面默认显示</p><h3 id="讲解-40"><a class="anchor" href="#讲解-40">#</a> 讲解</h3><ol><li><p>需求：介绍本项目要完成的效果，和要实现的步骤和分的步骤和视频</p><p><img data-src="/img/image-20230222133327806.png" alt="image-20230222133327806"></p></li><li><p>步骤</p><ol><li>先获取北京市天气预报，展示</li><li>搜索城市列表，展示</li><li>点击城市，切换显示对应天气数据</li></ol></li><li><p>本视频先封装函数，获取城市天气并设置页面内容</p></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 1：默认显示 - 北京市天气</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1.1 获取北京市天气数据</pre></td></tr><tr><td data-num="4"></td><td><pre> *  1.2 数据展示到页面</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 获取并渲染城市天气函数</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">function</span> <span class="token function">getWeather</span><span class="token punctuation">(</span><span class="token parameter">cityCode</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 1.1 获取北京市天气数据</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/weather'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token literal-property property">city</span><span class="token operator">:</span> cityCode</pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">const</span> wObj <span class="token operator">=</span> result<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 1.2 数据展示到页面</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token comment">// 阳历和农历日期</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">const</span> dateStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span class="dateShort"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>date<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre>    &lt;span class="calendar">农历&amp;nbsp;</pre></td></tr><tr><td data-num="21"></td><td><pre>      &lt;span class="dateLunar"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>dateLunar<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>    &lt;/span><span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> dateStr</pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 城市名字</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.area'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> wObj<span class="token punctuation">.</span>area</pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 当天气温</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">const</span> nowWStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="tem-box"></span></span></pre></td></tr><tr><td data-num="28"></td><td><pre>    &lt;span class="temp"></pre></td></tr><tr><td data-num="29"></td><td><pre>      &lt;span class="temperature"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>temperature<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="30"></td><td><pre>      &lt;span>°&lt;/span></pre></td></tr><tr><td data-num="31"></td><td><pre>    &lt;/span></pre></td></tr><tr><td data-num="32"></td><td><pre>  &lt;/div></pre></td></tr><tr><td data-num="33"></td><td><pre>  &lt;div class="climate-box"></pre></td></tr><tr><td data-num="34"></td><td><pre>    &lt;div class="air"></pre></td></tr><tr><td data-num="35"></td><td><pre>      &lt;span class="psPm25"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>psPm25<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="36"></td><td><pre>      &lt;span class="psPm25Level"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>psPm25Level<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="37"></td><td><pre>    &lt;/div></pre></td></tr><tr><td data-num="38"></td><td><pre>    &lt;ul class="weather-list"></pre></td></tr><tr><td data-num="39"></td><td><pre>      &lt;li></pre></td></tr><tr><td data-num="40"></td><td><pre>        &lt;img src="<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>weatherImg<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">" class="weatherImg" alt=""></span></pre></td></tr><tr><td data-num="41"></td><td><pre>        &lt;span class="weather"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>weather<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="42"></td><td><pre>      &lt;/li></pre></td></tr><tr><td data-num="43"></td><td><pre>      &lt;li class="windDirection"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>windDirection<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/li></span></pre></td></tr><tr><td data-num="44"></td><td><pre>      &lt;li class="windPower"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wObj<span class="token punctuation">.</span>windPower<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/li></span></pre></td></tr><tr><td data-num="45"></td><td><pre>    &lt;/ul></pre></td></tr><tr><td data-num="46"></td><td><pre>  &lt;/div><span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.weather-box'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> nowWStr</pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token comment">// 当天天气</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token keyword">const</span> twObj <span class="token operator">=</span> wObj<span class="token punctuation">.</span>todayWeather</pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token keyword">const</span> todayWStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="range-box"></span></span></pre></td></tr><tr><td data-num="51"></td><td><pre>    &lt;span>今天：&lt;/span></pre></td></tr><tr><td data-num="52"></td><td><pre>    &lt;span class="range"></pre></td></tr><tr><td data-num="53"></td><td><pre>      &lt;span class="weather"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>twObj<span class="token punctuation">.</span>weather<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="54"></td><td><pre>      &lt;span class="temNight"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>twObj<span class="token punctuation">.</span>temNight<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="55"></td><td><pre>      &lt;span>-&lt;/span></pre></td></tr><tr><td data-num="56"></td><td><pre>      &lt;span class="temDay"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>twObj<span class="token punctuation">.</span>temDay<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="57"></td><td><pre>      &lt;span>℃&lt;/span></pre></td></tr><tr><td data-num="58"></td><td><pre>    &lt;/span></pre></td></tr><tr><td data-num="59"></td><td><pre>  &lt;/div></pre></td></tr><tr><td data-num="60"></td><td><pre>  &lt;ul class="sun-list"></pre></td></tr><tr><td data-num="61"></td><td><pre>    &lt;li></pre></td></tr><tr><td data-num="62"></td><td><pre>      &lt;span>紫外线&lt;/span></pre></td></tr><tr><td data-num="63"></td><td><pre>      &lt;span class="ultraviolet"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>twObj<span class="token punctuation">.</span>ultraviolet<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="64"></td><td><pre>    &lt;/li></pre></td></tr><tr><td data-num="65"></td><td><pre>    &lt;li></pre></td></tr><tr><td data-num="66"></td><td><pre>      &lt;span>湿度&lt;/span></pre></td></tr><tr><td data-num="67"></td><td><pre>      &lt;span class="humidity"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>twObj<span class="token punctuation">.</span>humidity<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span>%</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    &lt;/li></pre></td></tr><tr><td data-num="69"></td><td><pre>    &lt;li></pre></td></tr><tr><td data-num="70"></td><td><pre>      &lt;span>日出&lt;/span></pre></td></tr><tr><td data-num="71"></td><td><pre>      &lt;span class="sunriseTime"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>twObj<span class="token punctuation">.</span>sunriseTime<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="72"></td><td><pre>    &lt;/li></pre></td></tr><tr><td data-num="73"></td><td><pre>    &lt;li></pre></td></tr><tr><td data-num="74"></td><td><pre>      &lt;span>日落&lt;/span></pre></td></tr><tr><td data-num="75"></td><td><pre>      &lt;span class="sunsetTime"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>twObj<span class="token punctuation">.</span>sunsetTime<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="76"></td><td><pre>    &lt;/li></pre></td></tr><tr><td data-num="77"></td><td><pre>  &lt;/ul><span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="78"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.today-weather'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> todayWStr</pre></td></tr><tr><td data-num="79"></td><td><pre></pre></td></tr><tr><td data-num="80"></td><td><pre>    <span class="token comment">// 7 日天气预报数据展示</span></pre></td></tr><tr><td data-num="81"></td><td><pre>    <span class="token keyword">const</span> dayForecast <span class="token operator">=</span> wObj<span class="token punctuation">.</span>dayForecast</pre></td></tr><tr><td data-num="82"></td><td><pre>    <span class="token keyword">const</span> dayForecastStr <span class="token operator">=</span> dayForecast<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li class="item"></span></span></pre></td></tr><tr><td data-num="84"></td><td><pre>      &lt;div class="date-box"></pre></td></tr><tr><td data-num="85"></td><td><pre>        &lt;span class="dateFormat"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>dateFormat<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="86"></td><td><pre>        &lt;span class="date"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>date<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="87"></td><td><pre>      &lt;/div></pre></td></tr><tr><td data-num="88"></td><td><pre>      &lt;img src="<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>weatherImg<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">" alt="" class="weatherImg"></span></pre></td></tr><tr><td data-num="89"></td><td><pre>      &lt;span class="weather"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>weather<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="90"></td><td><pre>      &lt;div class="temp"></pre></td></tr><tr><td data-num="91"></td><td><pre>        &lt;span class="temNight"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>temNight<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span>-</span></pre></td></tr><tr><td data-num="92"></td><td><pre>        &lt;span class="temDay"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>temDay<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="93"></td><td><pre>        &lt;span>℃&lt;/span></pre></td></tr><tr><td data-num="94"></td><td><pre>      &lt;/div></pre></td></tr><tr><td data-num="95"></td><td><pre>      &lt;div class="wind"></pre></td></tr><tr><td data-num="96"></td><td><pre>        &lt;span class="windDirection"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>windDirection<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="97"></td><td><pre>        &lt;span class="windPower"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>windPower<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span></span></pre></td></tr><tr><td data-num="98"></td><td><pre>      &lt;/div></pre></td></tr><tr><td data-num="99"></td><td><pre>    &lt;/li><span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="100"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="101"></td><td><pre>    <span class="token comment">// console.log(dayForecastStr)</span></pre></td></tr><tr><td data-num="102"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.week-wrap'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> dayForecastStr</pre></td></tr><tr><td data-num="103"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="104"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="105"></td><td><pre></pre></td></tr><tr><td data-num="106"></td><td><pre><span class="token comment">// 默认进入网页 - 就要获取天气数据（北京市城市编码：'110100'）</span></pre></td></tr><tr><td data-num="107"></td><td><pre><span class="token function">getWeather</span><span class="token punctuation">(</span><span class="token string">'110100'</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-40"><a class="anchor" href="#小结-40">#</a> 小结</h3><ol><li><p>做完这个项目会带来什么收货？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 可以做一个真正有意义的业务，查看城市的天气预报，测试自己封装的 myAxios 函数是否好用 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="13案例_天气预报-搜索城市列表"><a class="anchor" href="#13案例_天气预报-搜索城市列表">#</a> 13. 案例_天气预报 - 搜索城市列表</h2><h3 id="目标-41"><a class="anchor" href="#目标-41">#</a> 目标</h3><p>根据关键字，展示匹配的城市列表</p><h3 id="讲解-41"><a class="anchor" href="#讲解-41">#</a> 讲解</h3><ol><li><p>介绍本视频要完成的效果：搜索匹配关键字相关城市名字，展示城市列表即可</p><p><img data-src="/img/image-20230222133553010.png" alt="image-20230222133553010"></p></li><li><p>步骤</p><ol><li>绑定 input 事件，获取关键字</li><li>获取展示城市列表数据</li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 2：搜索城市列表</pre></td></tr><tr><td data-num="3"></td><td><pre> *  2.1 绑定 input 事件，获取关键字</pre></td></tr><tr><td data-num="4"></td><td><pre> *  2.2 获取展示城市列表数据</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 2.1 绑定 input 事件，获取关键字</span></pre></td></tr><tr><td data-num="7"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.search-city'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 2.2 获取展示城市列表数据</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/weather/city'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token literal-property property">city</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">const</span> liStr <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li class="city-item" data-code="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/li></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>liStr<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.search-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> liStr</pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-41"><a class="anchor" href="#小结-41">#</a> 小结</h3><ol><li><p>监听输入框实时改变的事件是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;input 事件 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="14案例_天气预报-展示城市天气"><a class="anchor" href="#14案例_天气预报-展示城市天气">#</a> 14. 案例_天气预报 - 展示城市天气</h2><h3 id="目标-42"><a class="anchor" href="#目标-42">#</a> 目标</h3><p>点击搜索框列表城市名字，切换对应城市天气数据</p><h3 id="讲解-42"><a class="anchor" href="#讲解-42">#</a> 讲解</h3><ol><li><p>介绍本视频要完成的效果：点击城市列表名字，切换当前页面天气数据</p><p><img data-src="/img/image-20230222134653884.png" alt="image-20230222134653884"></p></li><li><p>步骤</p><ol><li>检测搜索列表点击事件，获取城市 code 值</li><li>复用获取展示城市天气函数</li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 3：切换城市天气</pre></td></tr><tr><td data-num="3"></td><td><pre> *  3.1 绑定城市点击事件，获取城市 code 值</pre></td></tr><tr><td data-num="4"></td><td><pre> *  3.2 调用获取并展示天气的函数</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 3.1 绑定城市点击事件，获取城市 code 值</span></pre></td></tr><tr><td data-num="7"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.search-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'city-item'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 只有点击城市 li 才会走这里</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">const</span> cityCode <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>code</pre></td></tr><tr><td data-num="11"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cityCode<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// 3.2 调用获取并展示天气的函数</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">getWeather</span><span class="token punctuation">(</span>cityCode<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-42"><a class="anchor" href="#小结-42">#</a> 小结</h3><ol><li><p>这次我们获取城市天气，传递的是城市名字还是 code 值？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 看后端要求传递什么，就传什么即可 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="今日重点必须会-3"><a class="anchor" href="#今日重点必须会-3">#</a> 今日重点 (必须会)</h2><ol><li>了解 AJAX 原理之 XMLHttpRequest（XHR）相关语法</li><li>了解 Promise 的作用和三种状态</li><li>了解 axios 内部运作的过程</li><li>完成案例 - 天气预报</li></ol><h1 id="四-ajax进阶"><a class="anchor" href="#四-ajax进阶">#</a> 四、AJAX 进阶</h1><h2 id="知识点自测-4"><a class="anchor" href="#知识点自测-4">#</a> 知识点自测</h2><ol><li><p>看如下标签回答如下问题？</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>北京<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>北京市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>南京<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>南京市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>天津<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>天津市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><ul><li><p>当选中第二个 option 时，JS 中获取下拉菜单 select 标签的 value 属性的值是多少？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 南京 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>页面上看到的是北京，还是北京市等？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 北京市 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ul></li><li><p>我给 select 标签的 value 属性赋予 &quot;南京&quot; 会有什么效果？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 什么效果都没有，没有没有一个 option 选项的 value 能匹配 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="目录-4"><a class="anchor" href="#目录-4">#</a> 目录</h2><ul><li>同步代码和异步代码</li><li>回调函数地狱和 Promise 链式调用</li><li>async 和 await 使用</li><li>事件循环 - EventLoop</li><li>Promise.all 静态方法</li><li>案例 - 商品分类</li><li>案例 - 学习反馈</li></ul><h2 id="学习目标-4"><a class="anchor" href="#学习目标-4">#</a> 学习目标</h2><ol><li>区分异步代码，回调函数地狱问题和所有解决防范（Promise 链式调用）</li><li>掌握 async 和 await 使用</li><li>掌握 EventLoop 的概念</li><li>了解 Promise.all 静态方法作用</li><li>完成省市区切换效果</li></ol><h2 id="01同步代码和异步代码"><a class="anchor" href="#01同步代码和异步代码">#</a> 01. 同步代码和异步代码</h2><h3 id="目标-43"><a class="anchor" href="#目标-43">#</a> 目标</h3><p>能够区分出哪些是异步代码</p><h3 id="讲解-43"><a class="anchor" href="#讲解-43">#</a> 讲解</h3><ol><li><p><a href="%5Bhttps://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Asynchronous/Introducing#%E5%90%8C%E6%AD%A5%E7%BC%96%E7%A8%8B%5D(https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Asynchronous/Introducing)">同步代码</a>：逐行执行，需原地等待结果后，才继续向下执行</p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9MZWFybi9KYXZhU2NyaXB0L0FzeW5jaHJvbm91cy9JbnRyb2R1Y2luZw==">异步代码</span>：调用后耗时，不阻塞代码继续执行（不必原地等待），在将来完成后触发回调函数传递结果</p></li><li><p>回答代码打印顺序：发现异步代码接收结果，使用的都是回调函数</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'pink'</span></pre></td></tr><tr><td data-num="10"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>结果：1， 4， 2</p><p>按钮点击一次打印一次 3</p></blockquote></li></ol><h3 id="小结-43"><a class="anchor" href="#小结-43">#</a> 小结</h3><ol><li><p>什么是同步代码？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 逐行执行，原地等待结果后，才继续向下执行 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>什么是异步代码？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 调用后耗时，不阻塞代码执行，将来完成后触发回调函数 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>JS 中有哪些异步代码？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;setTimeout /setInterval，事件，AJAX&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>异步代码如何接收结果？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 依靠回调函数来接收 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="02回调函数地狱"><a class="anchor" href="#02回调函数地狱">#</a> 02. 回调函数地狱</h2><h3 id="目标-44"><a class="anchor" href="#目标-44">#</a> 目标</h3><p>了解回调函数地狱的概念和缺点</p><h3 id="讲解-44"><a class="anchor" href="#讲解-44">#</a> 讲解</h3><ol><li><p>需求：展示默认第一个省，第一个城市，第一个地区在下拉菜单中</p><p><img data-src="/img/image-20230222173109762.png" alt="image-20230222173109762"></p></li><li><p>概念：在回调函数中嵌套回调函数，一直嵌套下去就形成了回调函数地狱</p></li><li><p>缺点：可读性差，异常无法捕获，耦合性严重，牵一发动全身</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> pname <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.province'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> pname</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// 获取第一个省份默认下属的第一个城市名字</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/city'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> pname <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">const</span> cname <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.city'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> cname</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 获取第一个城市默认下属第一个地区名字</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/area'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> pname<span class="token punctuation">,</span> cname <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.area'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-44"><a class="anchor" href="#小结-44">#</a> 小结</h3><ol><li><p>什么是回调函数地狱？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 在回调函数一直向下嵌套回调函数，形成回调函数地狱 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>回调函数地狱问题？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 可读性差，异常捕获困难，耦合性严重 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="03promise-链式调用"><a class="anchor" href="#03promise-链式调用">#</a> 03.Promise - 链式调用</h2><h3 id="目标-45"><a class="anchor" href="#目标-45">#</a> 目标</h3><p>了解 Promise 链式调用特点和语法</p><h3 id="讲解-45"><a class="anchor" href="#讲解-45">#</a> 讲解</h3><ol><li><p>概念：依靠 then () 方法会返回一个新生成的 Promise 对象特性，继续串联下一环任务，直到结束</p></li><li><p>细节：then () 回调函数中的返回值，会影响新生成的 Promise 对象最终状态和结果</p></li><li><p>好处：通过链式调用，解决回调函数嵌套问题</p><p><img data-src="/img/image-20230222173851738.png" alt="image-20230222173851738"></p></li><li><p>按照图解，编写核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：掌握 Promise 的链式调用</pre></td></tr><tr><td data-num="3"></td><td><pre> * 需求：把省市的嵌套结构，改成链式调用的线性结构</pre></td></tr><tr><td data-num="4"></td><td><pre>*/</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 1. 创建 Promise 对象 - 模拟请求省份名字</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'北京市'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 2. 获取省份名字</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">const</span> p2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token comment">// 3. 创建 Promise 对象 - 模拟请求城市名字</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token comment">//return Promise 对象最终状态和结果，影响到新的 Promise 对象</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token function">resolve</span><span class="token punctuation">(</span>result <span class="token operator">+</span> <span class="token string">'--- 北京'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// 4. 获取城市名字</span></pre></td></tr><tr><td data-num="25"></td><td><pre>p2<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment">//then () 原地的结果是一个新的 Promise 对象</span></pre></td></tr><tr><td data-num="30"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2 <span class="token operator">===</span> p<span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-45"><a class="anchor" href="#小结-45">#</a> 小结</h3><ol><li><p>什么是 Promise 的链式调用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 使用 then 方法返回新 Promise 对象特性，一直串联下去 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>then 回调函数中，return 的值会传给哪里？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 传给 then 方法生成的新 Promise 对象 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>Promise 链式调用有什么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 解决回调函数嵌套问题 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="04promise-链式调用_解决回调地狱"><a class="anchor" href="#04promise-链式调用_解决回调地狱">#</a> 04.Promise - 链式调用_解决回调地狱</h2><h3 id="目标-46"><a class="anchor" href="#目标-46">#</a> 目标</h3><p>了解 Promise 链式调用解决回调地狱</p><h3 id="讲解-46"><a class="anchor" href="#讲解-46">#</a> 讲解</h3><ol><li><p>目标：使用 Promise 链式调用，解决回调函数地狱问题</p></li><li><p>做法：每个 Promise 对象中管理一个异步任务，用 then 返回 Promise 对象，串联起来</p><p><img data-src="/img/image-20230222174946534.png" alt="image-20230222174946534"></p></li><li><p>按照图解思路，编写核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：把回调函数嵌套代码，改成 Promise 链式调用结构</pre></td></tr><tr><td data-num="3"></td><td><pre> * 需求：获取默认第一个省，第一个市，第一个地区并展示在下拉菜单中</pre></td></tr><tr><td data-num="4"></td><td><pre>*/</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">let</span> pname <span class="token operator">=</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 1. 得到 - 获取省份 Promise 对象</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  pname <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.province'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> pname</pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token comment">// 2. 得到 - 获取城市 Promise 对象</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/city'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> pname <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">const</span> cname <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.city'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> cname</pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token comment">// 3. 得到 - 获取地区 Promise 对象</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/area'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> pname<span class="token punctuation">,</span> cname <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token keyword">const</span> areaName <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.area'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> areaName</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-46"><a class="anchor" href="#小结-46">#</a> 小结</h3><ol><li><p>Promise 链式调用如何解决回调函数地狱？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;then 的回调函数中 return Promise 对象，影响当前新 Promise 对象的值 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="05async-函数和-await"><a class="anchor" href="#05async-函数和-await">#</a> 05.async 函数和 await</h2><h3 id="目标-47"><a class="anchor" href="#目标-47">#</a> 目标</h3><p>掌握 async 和 await 语法来编写简洁的异步代码</p><h3 id="讲解-47"><a class="anchor" href="#讲解-47">#</a> 讲解</h3><ol><li><p>概念：在 async 函数内，使用 await 关键字取代 then 函数，等待获取 Promise 对象成功状态的结果值</p></li><li><p>做法：使用 async 和 await 解决回调地狱问题</p></li><li><p>核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：掌握 async 和 await 语法，解决回调函数地狱</pre></td></tr><tr><td data-num="3"></td><td><pre> * 概念：在 async 函数内，使用 await 关键字，获取 Promise 对象 "成功状态" 结果值</pre></td></tr><tr><td data-num="4"></td><td><pre> * 注意：await 必须用在 async 修饰的函数内（await 会阻止 "异步函数内" 代码继续执行，原地等待结果）</pre></td></tr><tr><td data-num="5"></td><td><pre>*/</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 1. 定义 async 修饰函数</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 2. await 等待 Promise 对象成功的结果</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">const</span> pObj <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">const</span> pname <span class="token operator">=</span> pObj<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">const</span> cObj <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/city'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> pname <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">const</span> cname <span class="token operator">=</span> cObj<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">const</span> aObj <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/area'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> pname<span class="token punctuation">,</span> cname <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> areaName <span class="token operator">=</span> aObj<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.province'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> pname</pre></td></tr><tr><td data-num="18"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.city'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> cname</pre></td></tr><tr><td data-num="19"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.area'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> areaName</pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>使用 await 替代 then 的方法</p></blockquote></li></ol><h3 id="小结-47"><a class="anchor" href="#小结-47">#</a> 小结</h3><ol><li><p>await 的作用是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 替代 then 方法来提取 Promise 对象成功状态的结果 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="06async-函数和-await-捕获错误"><a class="anchor" href="#06async-函数和-await-捕获错误">#</a> 06.async 函数和 await 捕获错误</h2><h3 id="目标-48"><a class="anchor" href="#目标-48">#</a> 目标</h3><p>了解用 try catch 捕获同步流程的错误</p><h3 id="讲解-48"><a class="anchor" href="#讲解-48">#</a> 讲解</h3><ol><li><p>try 和 catch 的作用：语句标记要尝试的语句块，并指定一个出现异常时抛出的响应</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 要执行的代码</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">//error 接收的是，错误消息</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">//try 里代码，如果有错误，直接进入这里执行</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>try 里有报错的代码，会立刻跳转到 catch 中</p></blockquote></li><li><p>尝试把代码中 url 地址写错，运行观察 try catch 的捕获错误信息能力</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：async 和 await_错误捕获</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 1. try 包裹可能产生错误的代码</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">const</span> pObj <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">const</span> pname <span class="token operator">=</span> pObj<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">const</span> cObj <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/city'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> pname <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">const</span> cname <span class="token operator">=</span> cObj<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">const</span> aObj <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/area'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> pname<span class="token punctuation">,</span> cname <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">const</span> areaName <span class="token operator">=</span> aObj<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.province'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> pname</pre></td></tr><tr><td data-num="15"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.city'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> cname</pre></td></tr><tr><td data-num="16"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.area'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> areaName</pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token comment">// 2. 接着调用 catch 块，接收错误信息</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// 如果 try 里某行代码报错后，try 中剩余的代码不会执行了</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-48"><a class="anchor" href="#小结-48">#</a> 小结</h3><ol><li><p>try 和 catch 有什么作用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 捕获同步流程的代码报错信息 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="07事件循环"><a class="anchor" href="#07事件循环">#</a> 07. 事件循环</h2><h3 id="目标-49"><a class="anchor" href="#目标-49">#</a> 目标</h3><p>掌握事件循环模型是如何执行异步代码的</p><h3 id="讲解-49"><a class="anchor" href="#讲解-49">#</a> 讲解</h3><ol><li><p>事件循环（EventLoop）：掌握后知道 JS 是如何安排和运行代码的</p><blockquote><p>请回答下面 2 段代码打印的结果，并说明原因</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>作用：事件循环负责执行代码，收集和处理事件以及执行队列中的子任务</p></li><li><p>原因：JavaScript 单线程（某一刻只能执行一行代码），为了让耗时代码不阻塞其他代码运行，设计了事件循环模型</p></li><li><p>概念：执行代码和收集异步任务的模型，在调用栈空闲，反复调用任务队列里回调函数的执行机制，就叫事件循环</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：阅读并回答执行的顺序结果</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>具体运行过程，请参考 PPT 动画和视频讲解</p></blockquote><p><img data-src="/img/image-20230222182338992.png" alt="image-20230222182338992"></p></li></ol><h3 id="小结-49"><a class="anchor" href="#小结-49">#</a> 小结</h3><ol><li><p>什么是事件循环？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 执行代码和收集异步任务，在调用栈空闲时，反复调用任务队列里回调函数执行机制<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>为什么有事件循环？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;JavaScript 是单线程的，为了不阻塞 JS 引擎，设计执行代码的模型<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>JavaScript 内代码如何执行？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 执行同步代码，遇到异步代码交给宿主浏览器环境执行<br>异步有了结果后，把回调函数放入任务队列排队<br>当调用栈空闲后，反复调用任务队列里的回调函数<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="08事件循环-练习"><a class="anchor" href="#08事件循环-练习">#</a> 08. 事件循环 - 练习</h2><h3 id="目标-50"><a class="anchor" href="#目标-50">#</a> 目标</h3><p>了解事件循环的执行模型</p><h3 id="讲解-50"><a class="anchor" href="#讲解-50">#</a> 讲解</h3><ol><li><p>需求：请根据掌握的事件循环的模型概念，分析代码执行过程</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：阅读并回答执行的顺序结果</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">function</span> <span class="token function">myFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">function</span> <span class="token function">ajaxFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token function">ajaxFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token function">myFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="/img/image-20230222183656761.png" alt="image-20230222183656761"></p></li></ol><blockquote><p>结果：1 5 3 2 4 点击一次 document 就会执行一次打印 6</p></blockquote><h3 id="小结-50"><a class="anchor" href="#小结-50">#</a> 小结</h3><p>暂无</p><h2 id="09宏任务与微任务"><a class="anchor" href="#09宏任务与微任务">#</a> 09. 宏任务与微任务</h2><h3 id="目标-51"><a class="anchor" href="#目标-51">#</a> 目标</h3><p>掌握微任务和宏任务的概念和区分</p><h3 id="讲解-51"><a class="anchor" href="#讲解-51">#</a> 讲解</h3><ol><li><p>ES6 之后引入了 Promise 对象， 让 JS 引擎也可以发起异步任务</p></li><li><p>异步任务划分为了</p><ul><li>宏任务：由浏览器环境执行的异步代码</li><li>微任务：由 JS 引擎环境执行的异步代码</li></ul></li><li><p>宏任务和微任务具体划分：</p><p><img data-src="/img/image-20230222184920343.png" alt="image-20230222184920343"></p></li><li><p>事件循环模型</p><blockquote><p>具体运行效果，参考 PPT 动画或者视频</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：阅读并回答打印的执行顺序</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="/img/image-20230222184949605.png" alt="image-20230222184949605"></p></li></ol><blockquote><p>注意：宏任务每次在执行同步代码时，产生微任务队列，清空微任务队列任务后，微任务队列空间释放！</p><p>下一次宏任务执行时，遇到微任务代码，才会再次申请微任务队列空间放入回调函数消息排队</p><p>总结：一个宏任务包含微任务队列，他们之间是包含关系，不是并列关系</p></blockquote><h3 id="小结-51"><a class="anchor" href="#小结-51">#</a> 小结</h3><ol><li><p>什么是宏任务？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 浏览器执行的异步代码<br>例如：JS 执行脚本事件，setTimeout/setInterval，AJAX 请求完成事件，用户交互事件等<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>什么是微任务？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;JS 引擎执行的异步代码<br>例如：Promise 对象.then () 的回调<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>JavaScript 内代码如何执行？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 执行第一个 script 脚本事件宏任务，里面同步代码<br>遇到 宏任务 / 微任务 交给宿主环境，有结果回调函数进入对应队列<br>当执行栈空闲时，清空微任务队列，再执行下一个宏任务，从 1 再来<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><p><img data-src="/img/image-20230222185205193.png" alt="image-20230222185205193"></p><h2 id="10事件循环-经典面试题"><a class="anchor" href="#10事件循环-经典面试题">#</a> 10. 事件循环 - 经典面试题</h2><h3 id="目标-52"><a class="anchor" href="#目标-52">#</a> 目标</h3><p>锻炼事件循环模型的使用</p><h3 id="讲解-52"><a class="anchor" href="#讲解-52">#</a> 讲解</h3><ol><li><p>需求：请切换到对应配套代码，查看具体代码，并回答打印顺序（锻炼事件循环概念的理解，阅读代码执行顺序_）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 目标：回答代码执行顺序</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>p2<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="/img/image-20230222185939276.png" alt="image-20230222185939276"></p></li></ol><h3 id="小结-52"><a class="anchor" href="#小结-52">#</a> 小结</h3><p>暂无</p><h2 id="11promiseall-静态方法"><a class="anchor" href="#11promiseall-静态方法">#</a> 11.Promise.all 静态方法</h2><h3 id="目标-53"><a class="anchor" href="#目标-53">#</a> 目标</h3><p>了解 Promise.all 作用和使用场景</p><h3 id="讲解-53"><a class="anchor" href="#讲解-53">#</a> 讲解</h3><ol><li><p>概念：合并多个 Promise 对象，等待所有同时成功完成（或某一个失败），做后续逻辑</p><p><img data-src="/img/image-20230222190117045.png" alt="image-20230222190117045"></p></li><li><p>语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Promise对象<span class="token punctuation">,</span> Promise对象<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">//result 结果: [Promise 对象成功结果，Promise 对象成功结果，...]</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 第一个失败的 Promise 对象，抛出的异常对象</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>需求：同时请求 “北京”，“上海”，“广州”，“深圳” 的天气并在网页尽可能同时显示</p><p><img data-src="/img/image-20230222190230351.png" alt="image-20230222190230351"></p></li><li><p>核心代码如下：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Promise的all方法<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-ul<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="16"></td><td><pre>     * 目标：掌握 Promise 的 all 方法作用，和使用场景</pre></td></tr><tr><td data-num="17"></td><td><pre>     * 业务：当我需要同一时间显示多个请求的结果时，就要把多请求合并</pre></td></tr><tr><td data-num="18"></td><td><pre>     * 例如：默认显示 "北京", "上海", "广州", "深圳" 的天气在首页查看</pre></td></tr><tr><td data-num="19"></td><td><pre>     * code：</pre></td></tr><tr><td data-num="20"></td><td><pre>     * 北京 - 110100</pre></td></tr><tr><td data-num="21"></td><td><pre>     * 上海 - 310100</pre></td></tr><tr><td data-num="22"></td><td><pre>     * 广州 - 440100</pre></td></tr><tr><td data-num="23"></td><td><pre>     * 深圳 - 440300</pre></td></tr><tr><td data-num="24"></td><td><pre>    */</pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 1. 请求城市天气，得到 Promise 对象</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">const</span> bjPromise <span class="token operator">=</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/weather'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">'110100'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">const</span> shPromise <span class="token operator">=</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/weather'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">'310100'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">const</span> gzPromise <span class="token operator">=</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/weather'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">'440100'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">const</span> szPromise <span class="token operator">=</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/weather'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">'440300'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">// 2. 使用 Promise.all，合并多个 Promise 对象</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>bjPromise<span class="token punctuation">,</span> shPromise<span class="token punctuation">,</span> gzPromise<span class="token punctuation">,</span> szPromise<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>      <span class="token comment">// 注意：结果数组顺序和合并时顺序是一致</span></pre></td></tr><tr><td data-num="35"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>      <span class="token keyword">const</span> htmlStr <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>area<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> --- </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>weather<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/li></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-ul'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> htmlStr</pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li></ol><h3 id="小结-53"><a class="anchor" href="#小结-53">#</a> 小结</h3><ol><li><p>Promise.all 什么时候使用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 合并多个 Promise 对象并等待所有同时成功的结果，如果有一个报错就会最终为失败状态，当需要同时渲染多个接口数据同时到网页上时使用<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="12案例-商品分类"><a class="anchor" href="#12案例-商品分类">#</a> 12. 案例 - 商品分类</h2><h3 id="目标-54"><a class="anchor" href="#目标-54">#</a> 目标</h3><p>完成商品分类效果</p><h3 id="讲解-54"><a class="anchor" href="#讲解-54">#</a> 讲解</h3><ol><li><p>需求：尽可能同时展示所有商品分类到页面上</p><p><img data-src="/img/image-20230222191151264.png" alt="image-20230222191151264"></p></li><li><p>步骤：</p><ol><li><p>获取所有的一级分类数据</p></li><li><p>遍历 id，创建获取二级分类请求</p></li><li><p>合并所有二级分类 Promise 对象</p></li><li><p>等待同时成功，开始渲染页面</p></li></ol></li><li><p>核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：把所有商品分类 “同时” 渲染到页面上</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1. 获取所有一级分类数据</pre></td></tr><tr><td data-num="4"></td><td><pre> *  2. 遍历 id，创建获取二级分类请求</pre></td></tr><tr><td data-num="5"></td><td><pre> *  3. 合并所有二级分类 Promise 对象</pre></td></tr><tr><td data-num="6"></td><td><pre> *  4. 等待同时成功后，渲染页面</pre></td></tr><tr><td data-num="7"></td><td><pre>*/</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 1. 获取所有一级分类数据</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/category/top'</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">// 2. 遍历 id，创建获取二级分类请求</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> secPromiseList <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/category/sub'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span>id <span class="token comment">// 一级分类 id</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>secPromiseList<span class="token punctuation">)</span> <span class="token comment">// [二级分类请求 Promise 对象，二级分类请求 Promise 对象，...]</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  <span class="token comment">// 3. 合并所有二级分类 Promise 对象</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>secPromiseList<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// 4. 等待同时成功后，渲染页面</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">const</span> htmlStr <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      <span class="token keyword">const</span> dataObj <span class="token operator">=</span> item<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data <span class="token comment">// 取出关键数据对象</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="item"></span></span></pre></td></tr><tr><td data-num="31"></td><td><pre>    &lt;h3><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/h3></span></pre></td></tr><tr><td data-num="32"></td><td><pre>    &lt;ul></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li></span></span></pre></td></tr><tr><td data-num="35"></td><td><pre>        &lt;a href="javascript:;"></pre></td></tr><tr><td data-num="36"></td><td><pre>          &lt;img src="<span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>picture<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"></span></pre></td></tr><tr><td data-num="37"></td><td><pre>          &lt;p><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/p></span></pre></td></tr><tr><td data-num="38"></td><td><pre>        &lt;/a></pre></td></tr><tr><td data-num="39"></td><td><pre>      &lt;/li><span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span><span class="token string"></span></pre></td></tr><tr><td data-num="41"></td><td><pre>    &lt;/ul></pre></td></tr><tr><td data-num="42"></td><td><pre>  &lt;/div><span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.sub-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> htmlStr</pre></td></tr><tr><td data-num="46"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-54"><a class="anchor" href="#小结-54">#</a> 小结</h3><p>暂无</p><h2 id="13案例-学习反馈-省市区切换"><a class="anchor" href="#13案例-学习反馈-省市区切换">#</a> 13. 案例 - 学习反馈 - 省市区切换</h2><h3 id="目标-55"><a class="anchor" href="#目标-55">#</a> 目标</h3><p>完成省市区切换效果</p><h3 id="讲解-55"><a class="anchor" href="#讲解-55">#</a> 讲解</h3><ol><li><p>需求：完成省市区切换效果</p><p><img data-src="/img/image-20230222191239971.png" alt="image-20230222191239971"></p></li><li><p>步骤：</p><ol><li><p>设置省份数据到下拉菜单</p></li><li><p>切换省份，设置城市数据到下拉菜单，并清空地区下拉菜单</p></li><li><p>切换城市，设置地区数据到下拉菜单</p></li></ol></li><li><p>核心代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 1：完成省市区下拉列表切换</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1.1 设置省份下拉菜单数据</pre></td></tr><tr><td data-num="4"></td><td><pre> *  1.2 切换省份，设置城市下拉菜单数据，清空地区下拉菜单</pre></td></tr><tr><td data-num="5"></td><td><pre> *  1.3 切换城市，设置地区下拉菜单数据</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 1.1 设置省份下拉菜单数据</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/province'</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">const</span> optionStr <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">pname</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option value="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>pname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>pname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/option></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.province'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option value="">省份&lt;/option></span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> optionStr</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 1.2 切换省份，设置城市下拉菜单数据，清空地区下拉菜单</span></pre></td></tr><tr><td data-num="16"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.province'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token comment">// 获取用户选择省份名字</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token comment">// console.log(e.target.value)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/city'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">pname</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token keyword">const</span> optionStr <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">cname</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option value="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>cname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>cname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/option></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token comment">// 把默认城市选项 + 下属城市数据插入 select 中</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.city'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option value="">城市&lt;/option></span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> optionStr</pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token comment">// 清空地区数据</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.area'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option value="">地区&lt;/option></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">// 1.3 切换城市，设置地区下拉菜单数据</span></pre></td></tr><tr><td data-num="29"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.city'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/area'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token literal-property property">pname</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.province'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token literal-property property">cname</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="34"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>  <span class="token keyword">const</span> optionStr <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">aname</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option value="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>aname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>aname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/option></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>optionStr<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.area'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;option value="">地区&lt;/option></span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> optionStr</pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-55"><a class="anchor" href="#小结-55">#</a> 小结</h3><p>暂无</p><h2 id="14案例-学习反馈-数据提交"><a class="anchor" href="#14案例-学习反馈-数据提交">#</a> 14. 案例 - 学习反馈 - 数据提交</h2><h3 id="目标-56"><a class="anchor" href="#目标-56">#</a> 目标</h3><p>完成学习反馈数据提交</p><h3 id="讲解-56"><a class="anchor" href="#讲解-56">#</a> 讲解</h3><ol><li><p>需求：收集学习反馈数据，提交保存</p><p><img data-src="/img/image-20230222191239971.png" alt="image-20230222191239971"></p></li><li><p>步骤：</p><ol><li><p>监听提交按钮的点击事件</p></li><li><p>依靠插件收集表单数据</p></li><li><p>基于 axios 提交保存，显示结果</p></li></ol></li><li><p>核心代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 2：收集数据提交保存</pre></td></tr><tr><td data-num="3"></td><td><pre> *  2.1 监听提交的点击事件</pre></td></tr><tr><td data-num="4"></td><td><pre> *  2.2 依靠插件收集表单数据</pre></td></tr><tr><td data-num="5"></td><td><pre> *  2.3 基于 axios 提交保存，显示结果</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 2.1 监听提交的点击事件</span></pre></td></tr><tr><td data-num="8"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.submit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 2.2 依靠插件收集表单数据</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">const</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.info-form'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span>form<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">empty</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">// 2.3 基于 axios 提交保存，显示结果</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://hmajax.itheima.net/api/feedback'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      data</pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-56"><a class="anchor" href="#小结-56">#</a> 小结</h3><p>暂无</p><h2 id="今日重点必须会-4"><a class="anchor" href="#今日重点必须会-4">#</a> 今日重点 (必须会)</h2><ol><li><p>掌握 async 和 await 的使用</p></li><li><p>理解 EventLoop 和宏任务微任务执行顺序</p></li><li><p>了解 Promise.all 的作用和使用场景</p></li><li><p>完成案例 - 学习反馈</p></li></ol><h1 id="五-黑马头条-数据管理平台"><a class="anchor" href="#五-黑马头条-数据管理平台">#</a> 五、黑马头条 - 数据管理平台</h1><h2 id="01项目介绍"><a class="anchor" href="#01项目介绍">#</a> 01. 项目介绍</h2><h3 id="目标-57"><a class="anchor" href="#目标-57">#</a> 目标</h3><p>介绍我们要做的项目，为何做，以及怎么做</p><h3 id="讲解-57"><a class="anchor" href="#讲解-57">#</a> 讲解</h3><p>黑马头条 - 数据管理平台：对 IT 资讯移动网站的数据，进行数据管理</p><p>数据管理平台 - 演示：配套代码在本地运行</p><p>移动网站 - 演示： <span class="exturl" data-url="aHR0cDovL2dlZWsuaXRoZWltYS5uZXQv">http://</span><span class="exturl" data-url="aHR0cDovL2dlZWsuaXRoZWltYS5uZXQv">geek.itheima.net</span><span class="exturl" data-url="aHR0cDovL2dlZWsuaXRoZWltYS5uZXQv">/</span></p><p><img data-src="/img/image-20230518105910906.png" alt="image-20230518105910906"></p><p>功能：</p><p>1. 登录和权限判断</p><p>2. 查看文章内容列表（筛选，分页）</p><p>3. 编辑文章（数据回显）</p><p>4. 删除文章</p><p>5. 发布文章（图片上传，富文本编辑器）</p><p><img data-src="/img/image-20230518105936866.png" alt="image-20230518105936866"></p><h3 id="小结-57"><a class="anchor" href="#小结-57">#</a> 小结</h3><ol><li><p>黑马头条 - 数据管理平台，是什么样网站，要完成哪些功能？</p><p>&lt;details	&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 数据管理网站，登录后对数据进行增删改查 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>数据管理平台，未登录能否管理数据？</p><p>&lt;details	&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 不能，数据是公司内部的，需账号登录后管理 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="02项目准备"><a class="anchor" href="#02项目准备">#</a> 02. 项目准备</h2><h3 id="目标-58"><a class="anchor" href="#目标-58">#</a> 目标</h3><p>了解项目需要准备哪些内容</p><h3 id="讲解-58"><a class="anchor" href="#讲解-58">#</a> 讲解</h3><p>技术：</p><p>基于 Bootstrap 搭建网站标签和样式</p><p>集成 wangEditor 插件实现富文本编辑器</p><p>使用原生 JS 完成增删改查等业务</p><p>基于 axios 与黑马头条线上接口交互</p><p>使用 axios 拦截器进行权限判断</p><p><img data-src="/img/image-20230518110442704.png" alt="image-20230518110442704"></p><p>项目准备：准备配套的素材代码</p><p>包含：html，css，js，静态图片，第三方插件等等</p><p>目录管理：建议这样管理，方便查找</p><p>assets：资源文件夹（图片，字体等）</p><p>lib：资料文件夹（第三方插件，例如：form-serialize）</p><p>page：页面文件夹</p><p>utils：实用程序文件夹（工具插件）</p><p><img data-src="/img/image-20230518110515767.png" alt="image-20230518110515767"></p><h3 id="小结-58"><a class="anchor" href="#小结-58">#</a> 小结</h3><ol><li><p>为什么要按照一定的结构，管理代码文件？</p><p>&lt;details	&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 方便以后的查找和扩展 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="03验证码登录"><a class="anchor" href="#03验证码登录">#</a> 03. 验证码登录</h2><h3 id="目标-59"><a class="anchor" href="#目标-59">#</a> 目标</h3><p>完成验证码登录，后端设置验证码默认为 246810</p><h3 id="讲解-59"><a class="anchor" href="#讲解-59">#</a> 讲解</h3><p>原因：因为短信接口不是免费的，防止攻击者恶意盗刷</p><p>步骤：</p><p>1. 在 utils/request.js 配置 axios 请求基地址</p><p>作用：提取公共前缀地址，配置后 axios 请求时都会 baseURL + url</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'http://geek.itheima.net'</span></pre></td></tr></table></figure><p>2. 收集手机号和验证码数据</p><p>3. 基于 axios 调用验证码登录接口</p><p>4. 使用 Bootstrap 的 Alert 警告框反馈结果给用户</p><p><img data-src="/img/image-20230518110606843.png" alt="image-20230518110606843"></p><h3 id="小结-59"><a class="anchor" href="#小结-59">#</a> 小结</h3><p>暂无</p><h2 id="04验证码登录流程"><a class="anchor" href="#04验证码登录流程">#</a> 04. 验证码登录流程</h2><h3 id="目标-60"><a class="anchor" href="#目标-60">#</a> 目标</h3><p>了解验证码登录的流程</p><h3 id="讲解-60"><a class="anchor" href="#讲解-60">#</a> 讲解</h3><p>手机号 + 验证码，登录流程：</p><p><img data-src="/img/image-20230518110646428.png" alt="image-20230518110646428"></p><h3 id="小结-60"><a class="anchor" href="#小结-60">#</a> 小结</h3><ol><li>请回答验证码登录的完整流程</li></ol><h2 id="05token-的介绍"><a class="anchor" href="#05token-的介绍">#</a> 05.token 的介绍</h2><h3 id="目标-61"><a class="anchor" href="#目标-61">#</a> 目标</h3><p>了解前后端分离项目中 token 的作用</p><h3 id="讲解-61"><a class="anchor" href="#讲解-61">#</a> 讲解</h3><p>概念：访问权限的令牌，本质上是一串字符串</p><p>创建：正确登录后，由后端签发并返回</p><p>作用：判断是否有登录状态等，控制访问权限</p><p>注意：前端只能判断 token 有无，而后端才能判断 token 的有效性</p><p><img data-src="/img/image-20230518110744566.png" alt="image-20230518110744566"></p><p>目标：只有登录状态，才可以访问内容页面</p><p>步骤：</p><p>1. 在 utils/auth.js 中判断无 token 令牌字符串，则强制跳转到登录页（手动修改地址栏测试）</p><p>2. 在登录成功后，保存 token 令牌字符串到本地，再跳转到首页（手动修改地址栏测试）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 没有 token 令牌字符串，则强制跳转登录页</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'../login/index.html'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="小结-61"><a class="anchor" href="#小结-61">#</a> 小结</h3><ol><li><p>token 的作用？</p><p>&lt;details	&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 判断用户是否有登录状态等 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>token 的注意：</p></li></ol><p>前端只能判断 token 的有无</p><p>后端通过解密可以提取 token 字符串的原始信息，判断有效性</p><h2 id="06个人信息设置和-axios-请求拦截器"><a class="anchor" href="#06个人信息设置和-axios-请求拦截器">#</a> 06. 个人信息设置和 axios 请求拦截器</h2><h3 id="目标-62"><a class="anchor" href="#目标-62">#</a> 目标</h3><p>了解 axios 请求拦截器的概念和使用场景</p><h3 id="讲解-62"><a class="anchor" href="#讲解-62">#</a> 讲解</h3><p>需求：设置用户昵称</p><p>语法：axios 可以在 headers 选项传递请求头参数</p><p>问题：很多接口，都需要携带 token 令牌字符串</p><p>解决：在<span class="exturl" data-url="aHR0cHM6Ly93d3cuYXhpb3MtaHR0cC5jbi9kb2NzL2ludGVyY2VwdG9ycw==">请求拦截器</span>统一设置公共 headers 选项</p><p><img data-src="/img/image-20230518110901334.png" alt="image-20230518110901334"></p><p><img data-src="/img/image-20230518110913008.png" alt="image-20230518110913008"></p><p>对应代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'目标资源地址'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 在发送请求之前做些什么</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">return</span> config</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 对请求错误做些什么</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 个人信息</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/profile'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">//result：服务器响应数据对象</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">const</span> token <span class="token operator">=</span> location<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>  token <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>token<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// 在发送请求之前做些什么</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> config</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// 对请求错误做些什么</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="小结-62"><a class="anchor" href="#小结-62">#</a> 小结</h3><ol><li><p>什么是 axios 请求拦截器？</p><p>&lt;details	&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 发起请求之前，调用的一个函数，对请求参数进行设置 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>axios 请求拦截器，什么时候使用？</p><p>&lt;details	&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 有公共配置和设置时，统一设置在请求拦截器中 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="07-axios-响应拦截器和身份验证失败"><a class="anchor" href="#07-axios-响应拦截器和身份验证失败">#</a> 07. axios 响应拦截器和身份验证失败</h2><h3 id="目标-63"><a class="anchor" href="#目标-63">#</a> 目标</h3><p>了解 axios 响应拦截器的概念和使用场景，以及身份验证失败的场景流程和判断使用</p><h3 id="讲解-63"><a class="anchor" href="#讲解-63">#</a> 讲解</h3><p>axios 响应拦截器：响应回到 then/catch 之前，触发的拦截函数，对响应结果统一处理</p><p>例如：身份验证失败，统一判断并做处理</p><p><img data-src="/img/image-20230518111044515.png" alt="image-20230518111044515"></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 2xx 范围内的状态码都会触发该函数。</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// 超出 2xx 范围的状态码都会触发该函数。</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// 对响应错误做点什么，例如：判断响应状态为 401 代表身份验证失败</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token operator">?.</span>response<span class="token operator">?.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'登录状态过期，请重新登录'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'../login/index.html'</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="小结-63"><a class="anchor" href="#小结-63">#</a> 小结</h3><ol><li><p>什么是 axios 响应拦截器？</p><p>&lt;details	&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 响应回到 then/catch 之前，触发的拦截函数，对响应结果统一处理 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>axios 响应拦截器，什么时候触发成功 / 失败的回调函数？</p><p>&lt;details	&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 状态为 2xx 触发成功回调，其他则触发失败的回调函数 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="08优化-axios-响应结果"><a class="anchor" href="#08优化-axios-响应结果">#</a> 08. 优化 axios 响应结果</h2><h3 id="目标-64"><a class="anchor" href="#目标-64">#</a> 目标</h3><p>axios 直接接收服务器返回的响应结果</p><h3 id="讲解-64"><a class="anchor" href="#讲解-64">#</a> 讲解</h3><p>思路：其实就是在响应拦截器里，response.data 把后台返回的数据直接取出来统一返回给所有使用这个 axios 函数的逻辑页面位置的 then 的形参上</p><p>好处：可以让逻辑页面少点一层 data 就能拿到后端返回的真正数据对象</p><p><img data-src="/img/image-20230518111206285.png" alt="image-20230518111206285"></p><p>对应代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 2xx 范围内的状态码都会触发该函数。</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 对响应数据做点什么，例如：直接返回服务器的响应结果对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">const</span> result <span class="token operator">=</span> response<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// 超出 2xx 范围的状态码都会触发该函数。</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// 对响应错误做点什么，例如：判断响应状态为 401 代表身份验证失败</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token operator">?.</span>response<span class="token operator">?.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'登录状态过期，请重新登录'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'../login/index.html'</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="小结-64"><a class="anchor" href="#小结-64">#</a> 小结</h3><p>暂无</p><h2 id="09发布文章-富文本编辑器"><a class="anchor" href="#09发布文章-富文本编辑器">#</a> 09. 发布文章 - 富文本编辑器</h2><h3 id="目标-65"><a class="anchor" href="#目标-65">#</a> 目标</h3><p>了解富文本编辑器的概念，以及如何在前端网页中使用</p><h3 id="讲解-65"><a class="anchor" href="#讲解-65">#</a> 讲解</h3><p>富文本：带样式，多格式的文本，在前端一般使用标签配合内联样式实现</p><p>富文本编辑器：用于编写富文本内容的容器</p><p><img data-src="/img/image-20230518111333428.png" alt="image-20230518111333428"></p><p>目标：发布文章页，富文本编辑器的集成</p><p>使用：wangEditor 插件</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cud2FuZ2VkaXRvci5jb20vdjUvZ2V0dGluZy1zdGFydGVkLmh0bWw=">步骤</span>：参考文档</p><p>1. 引入 CSS 定义样式</p><p>2. 定义 HTML 结构</p><p>3. 引入 JS 创建编辑器</p><p>4. 监听内容改变，保存在隐藏文本域（便于后期收集）</p><h3 id="小结-65"><a class="anchor" href="#小结-65">#</a> 小结</h3><p>暂无</p><h2 id="10发布文章-频道列表"><a class="anchor" href="#10发布文章-频道列表">#</a> 10. 发布文章 - 频道列表</h2><h3 id="目标-66"><a class="anchor" href="#目标-66">#</a> 目标</h3><p>展示频道列表，供用户选择</p><h3 id="讲解-66"><a class="anchor" href="#讲解-66">#</a> 讲解</h3><p>步骤：</p><ol><li>获取频道列表数据</li><li>展示到下拉菜单中</li></ol><p><img data-src="/img/image-20230518111430023.png" alt="image-20230518111430023"></p><h3 id="小结-66"><a class="anchor" href="#小结-66">#</a> 小结</h3><p>暂无</p><h2 id="11发布文章-封面设置"><a class="anchor" href="#11发布文章-封面设置">#</a> 11. 发布文章 - 封面设置</h2><h3 id="目标-67"><a class="anchor" href="#目标-67">#</a> 目标</h3><p>文章封面的设置</p><h3 id="讲解-67"><a class="anchor" href="#讲解-67">#</a> 讲解</h3><p>步骤：</p><ol><li>准备标签结构和样式</li><li>选择文件并保存在 FormData</li><li>单独上传图片并得到图片 URL 地址</li><li>回显并切换 img 标签展示（隐藏 + 号上传标签）</li></ol><p>注意：图片地址临时存储在 img 标签上，并未和文章关联保存</p><p><img data-src="/img/image-20230518111505259.png" alt="image-20230518111505259"></p><h3 id="小结-67"><a class="anchor" href="#小结-67">#</a> 小结</h3><p>暂无</p><h2 id="12发布文章-收集并保存"><a class="anchor" href="#12发布文章-收集并保存">#</a> 12. 发布文章 - 收集并保存</h2><h3 id="目标-68"><a class="anchor" href="#目标-68">#</a> 目标</h3><p>收集文章内容，并提交保存</p><h3 id="讲解-68"><a class="anchor" href="#讲解-68">#</a> 讲解</h3><p>步骤：</p><ol><li>基于 form-serialize 插件收集表单数据对象</li><li>基于 axios 提交到服务器保存</li><li>调用 Alert 警告框反馈结果给用户</li><li>重置表单并跳转到列表页</li></ol><p><img data-src="/img/image-20230518111530578.png" alt="image-20230518111530578"></p><h3 id="小结-68"><a class="anchor" href="#小结-68">#</a> 小结</h3><p>暂无</p><h2 id="13内容管理-文章列表展示"><a class="anchor" href="#13内容管理-文章列表展示">#</a> 13. 内容管理 - 文章列表展示</h2><h3 id="目标-69"><a class="anchor" href="#目标-69">#</a> 目标</h3><p>获取文章列表并展示</p><h3 id="讲解-69"><a class="anchor" href="#讲解-69">#</a> 讲解</h3><p>步骤：</p><ol><li>准备查询参数对象</li><li>获取文章列表数据</li><li>展示到指定的标签结构中</li></ol><p><img data-src="/img/image-20230518111554655.png" alt="image-20230518111554655"></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> queryObj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 筛选状态</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">channel_id</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 频道 id</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 当前页码</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">per_page</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token comment">// 每页条数</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">let</span> totalCount <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 总条数</span></pre></td></tr></table></figure><h3 id="小结-69"><a class="anchor" href="#小结-69">#</a> 小结</h3><p>暂无</p><h2 id="14内容管理-筛选功能"><a class="anchor" href="#14内容管理-筛选功能">#</a> 14. 内容管理 - 筛选功能</h2><h3 id="目标-70"><a class="anchor" href="#目标-70">#</a> 目标</h3><p>根据筛选条件，获取匹配数据展示</p><h3 id="讲解-70"><a class="anchor" href="#讲解-70">#</a> 讲解</h3><p>步骤：</p><p>1. 设置频道列表数据</p><p>2. 监听筛选条件改变，保存查询信息到查询参数对象</p><p>3. 点击筛选时，传递查询参数对象到服务器</p><p>4. 获取匹配数据，覆盖到页面展示</p><p><img data-src="/img/image-20230518111611349.png" alt="image-20230518111611349"></p><h3 id="小结-70"><a class="anchor" href="#小结-70">#</a> 小结</h3><p>暂无</p><h2 id="15内容管理-分页功能"><a class="anchor" href="#15内容管理-分页功能">#</a> 15. 内容管理 - 分页功能</h2><h3 id="目标-71"><a class="anchor" href="#目标-71">#</a> 目标</h3><p>完成文章列表，分页管理功能</p><h3 id="讲解-71"><a class="anchor" href="#讲解-71">#</a> 讲解</h3><p>步骤：</p><p>1. 保存并设置文章总条数</p><p>2. 点击下一页，做临界值判断，并切换页码参数请求最新数据</p><p>3. 点击上一页，做临界值判断，并切换页码参数请求最新数据</p><p><img data-src="/img/image-20230518111702356.png" alt="image-20230518111702356"></p><h3 id="小结-71"><a class="anchor" href="#小结-71">#</a> 小结</h3><p>暂无</p><h2 id="16内容管理-删除功能"><a class="anchor" href="#16内容管理-删除功能">#</a> 16. 内容管理 - 删除功能</h2><h3 id="目标-72"><a class="anchor" href="#目标-72">#</a> 目标</h3><p>完成删除文章功能</p><h3 id="讲解-72"><a class="anchor" href="#讲解-72">#</a> 讲解</h3><p>步骤：</p><ol><li>关联文章 id 到删除图标</li><li>点击删除时，获取文章 id</li><li>调用删除接口，传递文章 id 到服务器</li><li>重新获取文章列表，并覆盖展示</li></ol><p><img data-src="/img/image-20230518111815340.png" alt="image-20230518111815340"></p><h3 id="小结-72"><a class="anchor" href="#小结-72">#</a> 小结</h3><p>暂无</p><h2 id="17内容管理-删除最后一条"><a class="anchor" href="#17内容管理-删除最后一条">#</a> 17. 内容管理 - 删除最后一条</h2><h3 id="目标-73"><a class="anchor" href="#目标-73">#</a> 目标</h3><p>在删除最后一页，最后一条时有 Bug</p><h3 id="讲解-73"><a class="anchor" href="#讲解-73">#</a> 讲解</h3><p>解决：</p><ol><li>删除成功时，判断 DOM 元素只剩一条，让当前页码 page--</li><li>注意，当前页码为 1 时不能继续向前翻页</li><li>重新设置页码数，获取最新列表展示</li></ol><p><img data-src="/img/image-20230518112012528.png" alt="image-20230518112012528"></p><h3 id="小结-73"><a class="anchor" href="#小结-73">#</a> 小结</h3><p>暂无</p><h2 id="18内容管理-编辑文章-回显"><a class="anchor" href="#18内容管理-编辑文章-回显">#</a> 18. 内容管理 - 编辑文章 - 回显</h2><h3 id="目标-74"><a class="anchor" href="#目标-74">#</a> 目标</h3><p>编辑文章时，回显数据到表单</p><h3 id="讲解-74"><a class="anchor" href="#讲解-74">#</a> 讲解</h3><p>步骤：</p><ol><li>页面跳转传参（URL 查询参数方式）</li><li>发布文章页面接收参数判断（共用同一套表单）</li><li>修改标题和按钮文字</li><li>获取文章详情数据并回显表单</li></ol><p><img data-src="/img/image-20230518112036624.png" alt="image-20230518112036624"></p><p>对应代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?id=1001&amp;name=xiaoli</span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 查询参数字符串 => 查询参数对象</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 需要遍历使用</span></pre></td></tr><tr><td data-num="5"></td><td><pre>result<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> key<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// 1001 id</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token comment">// xiaoli name</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="小结-74"><a class="anchor" href="#小结-74">#</a> 小结</h3><p>暂无</p><h2 id="19内容管理-编辑文章-保存"><a class="anchor" href="#19内容管理-编辑文章-保存">#</a> 19. 内容管理 - 编辑文章 - 保存</h2><h3 id="目标-75"><a class="anchor" href="#目标-75">#</a> 目标</h3><p>确认修改，保存文章到服务器</p><h3 id="讲解-75"><a class="anchor" href="#讲解-75">#</a> 讲解</h3><p>步骤：</p><ol><li>判断按钮文字，区分业务（因为共用一套表单）</li><li>调用编辑文章接口，保存信息到服务器</li><li>基于 Alert 反馈结果消息给用户</li></ol><p><img data-src="/img/image-20230518112112709.png" alt="image-20230518112112709"></p><h3 id="小结-75"><a class="anchor" href="#小结-75">#</a> 小结</h3><p>暂无</p><h2 id="20退出登录"><a class="anchor" href="#20退出登录">#</a> 20. 退出登录</h2><h3 id="目标-76"><a class="anchor" href="#目标-76">#</a> 目标</h3><p>完成退出登录效果</p><h3 id="讲解-76"><a class="anchor" href="#讲解-76">#</a> 讲解</h3><p>步骤：</p><p>1. 绑定点击事件</p><p>2. 清空本地缓存，跳转到登录页面</p><p><img data-src="/img/image-20230518112137592.png" alt="image-20230518112137592"></p><h1 id="六-nodejs入门"><a class="anchor" href="#六-nodejs入门">#</a> 六、Node.js 入门</h1><h2 id="知识点自测-5"><a class="anchor" href="#知识点自测-5">#</a> 知识点自测</h2><ol><li><p>从 index.js 出发，访问到 student/data.json 的相对路径如何写？</p><p><img data-src="/img/image-20230330104904311.png" alt="image-20230330104904311"></p><p>A： <code>../public/teacher/data.json</code></p><p>B： <code>./public/student/data.json</code></p><p>C： <code>../student/data.json</code></p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;A 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>如下代码运行结果是多少？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我们都是好人，好人就是我</span><span class="token template-punctuation string">`</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">好</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>A： <code>我们都是人，好人就是我</code></p><p>B： <code>我们都是人，人就是我</code></p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下哪个正则表达式，能匹配字符串中的小括号？</p><p>A： <code>/(/</code></p><p>B： <code>/\(/</code></p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 选项正确，因为在正则表达式里直接写小括号，相当于分组功能，而不是匹配字符串小括号里，可以加一个斜杠代表转义，转换它去匹配小括号字符串而不再是分组 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>如下代码返回的结果是什么？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'/api/hello?a=10&amp;b=20'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/api/hello'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>A：true</p><p>B：false</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;A 项正确，startsWith 用于判断调用的字符串是否以传入的目标字符串开头，是返回 true，否则返回 false 在原地 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="提前安装软件"><a class="anchor" href="#提前安装软件">#</a> 提前安装软件</h2><p>在配套的资料文件夹中，先安装好 Node.js 环境，上课可以节省时间</p><p>具体安装过程可以参考 PPT 和 配套视频！</p><h2 id="01什么是-nodejs"><a class="anchor" href="#01什么是-nodejs">#</a> 01. 什么是 Node.js</h2><h3 id="目标-77"><a class="anchor" href="#目标-77">#</a> 目标</h3><p>什么是 Node.js，有什么用，为何能独立执行 JS 代码，演示安装和执行 JS 文件内代码</p><h3 id="讲解-77"><a class="anchor" href="#讲解-77">#</a> 讲解</h3><ol><li><p>Node.js 是一个独立的 JavaScript 运行环境，能独立执行 JS 代码，因为这个特点，它可以用来编写服务器后端的应用程序</p></li><li><p>Node.js 作用除了编写后端应用程序，也可以对前端代码进行压缩，转译，整合等等，提高前端开发和运行效率</p></li><li><p>Node.js 基于 Chrome V8 引擎封装，独立执行 JS 代码，但是语法和浏览器环境的 V8 有所不同，没有 document 和 window 但是都支持 ECMAScript 标准的代码语法</p></li><li><p>想要得到 Node.js 需要把这个软件安装到电脑，在素材里有安装程序（window 和 mac 环境的）参考 PPT 默认下一步安装即可</p></li><li><p>Node.js 没有图形化界面，需要使用 cmd 终端命令行（利用一些命令来操控电脑执行某些程序软件）输入，node -v 检查是否安装成功</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">node</span> <span class="token parameter variable">-v</span></pre></td></tr></table></figure></li><li><p>需求：新建 index.js 文件，编写打印代码和 for 循环打印 3 个 6</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：编写 js 代码，用 node 命令执行</pre></td></tr><tr><td data-num="3"></td><td><pre> * 终端作用：敲击命令，调用对应程序执行</pre></td></tr><tr><td data-num="4"></td><td><pre> * 终端打开：目标文件 -> 右键 -> 在集成终端中打开</pre></td></tr><tr><td data-num="5"></td><td><pre> * 命令：node xxx.js （注意路径）</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello, World'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>Node.js 执行目标 JS 文件，需要使用 node xxx.js 命令来执行（我们可以借助 VSCode 集成终端使用，好处：可以快速切换到目标 JS 文件所在终端目录，利用相对路径找到要执行的目标 JS 文件</p><p><img data-src="/img/image-20230330112925228.png" alt="image-20230330112925228"></p></li></ol><h3 id="小结-76"><a class="anchor" href="#小结-76">#</a> 小结</h3><ol><li><p>Node.js 有什么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 编写后端程序，提供数据和网页资源，还可以作为前端工程化的工具，翻译压缩整合代码等，提高开发效率 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>Node.js 为何能执行 JS 代码？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 基于 Chrome 的 V8 引擎封装 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>Node.js 与浏览器环境的 JS 最大区别？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;Node.js 环境中没有 BOM 和 DOM，但是也用 JS 语法 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>Node.js 如何执行代码？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 在 VSCode 终端中输入：node xxx.js 回车即可执行（注意路径）&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="02fs模块-读写文件"><a class="anchor" href="#02fs模块-读写文件">#</a> 02.fs 模块 - 读写文件</h2><h3 id="目标-78"><a class="anchor" href="#目标-78">#</a> 目标</h3><p>了解模块概念，使用 fs 模块封装的方法读写文件内容</p><h3 id="讲解-78"><a class="anchor" href="#讲解-78">#</a> 讲解</h3><ol><li><p>模块：类似插件，封装了方法和属性供我们使用</p></li><li><p>fs 模块：封装了与本机文件系统进行交互的，方法和属性</p></li><li><p>fs 模块使用语法如下：</p><ul><li><p>加载 fs 模块，得到 fs 对象</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>写入文件内容语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'文件路径'</span><span class="token punctuation">,</span> <span class="token string">'写入内容'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 写入后的回调函数</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>读取文件内容的语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'文件路径'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 读取后的回调函数</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">//data 是文件内容的 Buffer 数据流</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ul></li><li><p>需求：向 test.txt 文件写入内容并读取打印</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：使用 fs 模块，读写文件内容</pre></td></tr><tr><td data-num="3"></td><td><pre> * 语法：</pre></td></tr><tr><td data-num="4"></td><td><pre> * 1. 引入 fs 模块</pre></td></tr><tr><td data-num="5"></td><td><pre> * 2. 调用 writeFile 写入内容</pre></td></tr><tr><td data-num="6"></td><td><pre> * 3. 调用 readFile  读取内容</pre></td></tr><tr><td data-num="7"></td><td><pre> */</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 1. 引入 fs 模块</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 2. 调用 writeFile 写入内容</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 注意：建议写入字符串内容，会覆盖目标文件所有内容</span></pre></td></tr><tr><td data-num="12"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./text.txt'</span><span class="token punctuation">,</span> <span class="token string">'欢迎使用 fs 模块读写文件内容'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// 3. 调用 readFile  读取内容</span></pre></td></tr><tr><td data-num="17"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./text.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 把 Buffer 数据流转成字符串类型</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-77"><a class="anchor" href="#小结-77">#</a> 小结</h3><ol><li><p>什么是模块？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 类似插件，封装了方法和属性 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>fs 模块的作用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 读写本机文件内容 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="03path模块-路径处理"><a class="anchor" href="#03path模块-路径处理">#</a> 03.path 模块 - 路径处理</h2><h3 id="目标-79"><a class="anchor" href="#目标-79">#</a> 目标</h3><p>使用 path 模块来得到绝对路径</p><h3 id="讲解-79"><a class="anchor" href="#讲解-79">#</a> 讲解</h3><ol><li><p>为什么在 Node.js 待执行的 JS 代码中要用绝对路径：</p><blockquote><p>Node.js 执行 JS 代码时，代码中的路径都是以终端所在文件夹出发查找相对路径，而不是以我们认为的从代码本身出发，会遇到问题，所以在 Node.js 要执行的代码中，访问其他文件，建议使用绝对路径</p></blockquote></li><li><p>新建 03 文件夹编写待执行的 JS 代码，访问外层相对路径下的文件，&lt;span style=&quot;color: red;&quot;&gt; 然后在最外层终端路径来执行目标文件，造成问题 &lt;/span&gt;</p><p><img data-src="/img/image-20230330113929178.png" alt="image-20230330113929178"></p><p><img data-src="/img/image-20230330113942679.png" alt="image-20230330113942679"></p></li><li><p>问题原因：就是从代码文件夹出发，使用 <code>../text.txt</code> 解析路径，找不到目标文件，报错了！</p></li><li><p>解决方案：使用模块内置变量 <code>__dirname</code> 配合 path.join () 来得到绝对路径使用</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span> <span class="token comment">// D:\ 备课代码 \2_node_3 天 \Node_代码 \Day01_Node.js 入门 \ 代码 \03</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 1. 加载 path 模块</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 2. 使用 path.join () 来拼接路径</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> pathStr <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'text.txt'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pathStr<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>pathStr<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>再次执行查看问题就被修复了！以后在 Node.js 要执行的 JS 代码中访问其他文件的路径，都建议使用绝度路径</p></li></ol><h3 id="小结-78"><a class="anchor" href="#小结-78">#</a> 小结</h3><ol><li><p>path.join () 方法有什么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 按照所在本机系统的分隔符作为定界符来链接你传入的路径 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p><code>__dirname</code> 模块内置变量的值是多少？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 动态获取当前文件所在文件夹的绝对路径 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="04案例-压缩前端html"><a class="anchor" href="#04案例-压缩前端html">#</a> 04. 案例 - 压缩前端 html</h2><h3 id="目标-80"><a class="anchor" href="#目标-80">#</a> 目标</h3><p>压缩前端代码，体验前端工程化的例子</p><h3 id="讲解-80"><a class="anchor" href="#讲解-80">#</a> 讲解</h3><ol><li><p>前端工程化：前端代码压缩，整合，转译，测试，自动部署等等工具的集成统称，为了提高前端开发项目的效率</p></li><li><p>需求：把准备好的 html 文件里的回车符（\r）和换行符（\n）去掉进行压缩，写入到新 html 中</p></li><li><p>步骤：</p><ol><li>读取源 html 文件内容</li><li>正则替换字符串</li><li>写入到新的 html 文件中，并运行查看是否能正常打开网页</li></ol></li><li><p>代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标一：压缩 html 里代码</pre></td></tr><tr><td data-num="3"></td><td><pre> * 需求：把 public/index.html 里的，回车 / 换行符去掉，写入到 dist/index.html 中</pre></td></tr><tr><td data-num="4"></td><td><pre> *  1.1 读取 public/index.html 内容</pre></td></tr><tr><td data-num="5"></td><td><pre> *  1.2 使用正则替换内容字符串里的，回车符 \r 换行符 \n</pre></td></tr><tr><td data-num="6"></td><td><pre> *  1.3 确认后，写入到 dist/index.html 内</pre></td></tr><tr><td data-num="7"></td><td><pre> */</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 1.1 读取 public/index.html 内容</span></pre></td></tr><tr><td data-num="11"></td><td><pre>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">const</span> htmlStr <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">// 1.2 使用正则替换内容字符串里的，回车符 \r 换行符 \n</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">const</span> resultStr <span class="token operator">=</span> htmlStr<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\r\n]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token comment">// 1.3 确认后，写入到 dist/index.html 内</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> resultStr<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'压缩成功'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-79"><a class="anchor" href="#小结-79">#</a> 小结</h3><ol><li><p>前端工程化的理解？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 对前端代码进行优化，集成各种提高前端开发效率的工具等 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="05认识url中的端口号"><a class="anchor" href="#05认识url中的端口号">#</a> 05. 认识 URL 中的端口号</h2><h3 id="目标-81"><a class="anchor" href="#目标-81">#</a> 目标</h3><p>认识 URL 中端口号的作用，以及 Web 服务的作用</p><h3 id="讲解-81"><a class="anchor" href="#讲解-81">#</a> 讲解</h3><ol><li>URL 是统一资源定位符，简称网址，用于访问网络上的资源</li><li>端口号的作用：标记服务器里对应的服务程序，值为（0-65535 之间的任意整数）</li><li>注意：http 协议，默认访问的是 80 端口</li><li>Web 服务：一个程序，用于提供网上信息浏览功能</li><li>注意：0-1023 和一些特定的端口号被占用，我们自己编写服务程序请避开使用</li></ol><h3 id="小结-80"><a class="anchor" href="#小结-80">#</a> 小结</h3><ol><li><p>端口号的作用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 标记区分服务器里不同的服务程序 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>什么是 Web 服务？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 提供网上信息浏览的服务的一个程序 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="06http模块-创建web服务"><a class="anchor" href="#06http模块-创建web服务">#</a> 06.http 模块 - 创建 Web 服务</h2><h3 id="目标-82"><a class="anchor" href="#目标-82">#</a> 目标</h3><p>基于 Node.js 环境，使用内置 http 模块，创建 Web 服务程序</p><h3 id="讲解-82"><a class="anchor" href="#讲解-82">#</a> 讲解</h3><ol><li><p>需求：引入 http 模块，使用相关语法，创建 Web 服务程序，响应返回给请求方一句提示 ‘hello，world’</p></li><li><p>步骤：</p><ol><li>引入 http 模块，创建 Web 服务对象</li><li>监听 request 请求事件，对本次请求，做一些响应处理</li><li>启动 Web 服务监听对应端口号</li><li>运行本服务在终端进程中，用浏览器发起请求</li></ol></li><li><p>注意：本机的域名叫做 localhost</p></li><li><p>代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：基于 http 模块创建 Web 服务程序</pre></td></tr><tr><td data-num="3"></td><td><pre> *  1.1 加载 http 模块，创建 Web 服务对象</pre></td></tr><tr><td data-num="4"></td><td><pre> *  1.2 监听 request 请求事件，设置响应头和响应体</pre></td></tr><tr><td data-num="5"></td><td><pre> *  1.3 配置端口号并启动 Web 服务</pre></td></tr><tr><td data-num="6"></td><td><pre> *  1.4 浏览器请求（http://localhost:3000）测试</pre></td></tr><tr><td data-num="7"></td><td><pre> */</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 1.1 加载 http 模块，创建 Web 服务对象</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 1.2 监听 request 请求事件，设置响应头和响应体</span></pre></td></tr><tr><td data-num="12"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token comment">// 设置响应头 - 内容类型 - 普通文本以及中文编码格式</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain;charset=utf-8'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token comment">// 设置响应体内容，结束本次请求与响应</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'欢迎使用 Node.js 和 http 模块创建的 Web 服务'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// 1.3 配置端口号并启动 Web 服务</span></pre></td></tr><tr><td data-num="19"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Web 服务启动成功了'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-81"><a class="anchor" href="#小结-81">#</a> 小结</h3><ol><li><p>如何访问本机里运行的 Web 服务？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdA==">http://localhost</span>:Web 服务的端口号 / 资源路径 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="07案例-浏览时钟"><a class="anchor" href="#07案例-浏览时钟">#</a> 07. 案例 - 浏览时钟</h2><h3 id="目标-83"><a class="anchor" href="#目标-83">#</a> 目标</h3><p>体验 Web 服务除了接口数据以外，还能返回网页资源等</p><h3 id="讲解-83"><a class="anchor" href="#讲解-83">#</a> 讲解</h3><ol><li><p>需求：基于 Web 服务，开发提供网页资源的功能，了解下后端的代码工作过程</p><p><img data-src="/img/image-20230330175243783.png" alt="image-20230330175243783"></p></li><li><p>步骤：</p><ol><li>基于 http 模块，创建 Web 服务</li><li>使用 req.url 获取请求资源路径为 /index.html 的时候，读取 index.html 文件内容字符串返回给请求方</li><li>其他路径，暂时返回不存在的提示</li><li>运行 Web 服务，用浏览器发起请求</li></ol></li><li><p>代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：编写 web 服务，监听请求的是 /index.html 路径的时候，返回 dist/index.html 时钟案例页面内容</pre></td></tr><tr><td data-num="3"></td><td><pre> * 步骤：</pre></td></tr><tr><td data-num="4"></td><td><pre> *  1. 基于 http 模块，创建 Web 服务</pre></td></tr><tr><td data-num="5"></td><td><pre> *  2. 使用 req.url 获取请求资源路径，并读取 index.html 里字符串内容返回给请求方</pre></td></tr><tr><td data-num="6"></td><td><pre> *  3. 其他路径，暂时返回不存在提示</pre></td></tr><tr><td data-num="7"></td><td><pre> *  4. 运行 Web 服务，用浏览器发起请求</pre></td></tr><tr><td data-num="8"></td><td><pre> */</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 1. 基于 http 模块，创建 Web 服务</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token comment">// 2. 使用 req.url 获取请求资源路径，并读取 index.html 里字符串内容返回给请求方</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/index.html'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 3. 其他路径，暂时返回不存在提示</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'你要访问的资源路径不存在'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Web 服务启动了'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h3 id="小结-82"><a class="anchor" href="#小结-82">#</a> 小结</h3><ol><li><p>Web 服务程序都有什么功能？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 提供数据和网页资源等等功能，其他它的功能远不止于此 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h1 id="七-nodejs模块化"><a class="anchor" href="#七-nodejs模块化">#</a> 七、Node.js 模块化</h1><h2 id="知识点自测-6"><a class="anchor" href="#知识点自测-6">#</a> 知识点自测</h2><ol><li><p>以下代码运行的结果是多少？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=></span> val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=></span> sum <span class="token operator">+=</span> val<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr></table></figure><p>A：60</p><p>B：63</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下代码运行的结果是多少？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'itheima'</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'777777'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> uname <span class="token punctuation">&#125;</span> <span class="token operator">=</span> obj</pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uname<span class="token punctuation">)</span></pre></td></tr></table></figure><p>A：itheima</p><p>B：undefined</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;A 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="01模块化简介"><a class="anchor" href="#01模块化简介">#</a> 01. 模块化简介</h2><h3 id="目标-84"><a class="anchor" href="#目标-84">#</a> 目标</h3><p>了解模块化概念和好处，以及 CommonJS 标准语法导出和导入</p><h3 id="讲解-84"><a class="anchor" href="#讲解-84">#</a> 讲解</h3><ol><li><p>在 Node.js 中每个文件都被当做是一个独立的模块，模块内定义的变量和函数都是独立作用域的，因为 Node.js 在执行模块代码时，将使用如下所示的函数封装器对其进行封装</p><p><img data-src="/img/image-20230331150152299.png" alt="image-20230331150152299"></p></li></ol><p>​</p><ol start="2"><li><p>而且项目是由多个模块组成的，每个模块之间都是独立的，而且提高模块代码复用性，按需加载，独立作用域</p><p><img data-src="/img/image-20230331150407659.png" alt="image-20230331150407659"></p></li><li><p>但是因为模块内的属性和函数都是私有的，如果对外使用，需要使用标准语法导出和导入才可以，而这个标准叫 CommonJS 标准，接下来我们在一个需求中，体验下模块化导出和导入语法的使用</p></li><li><p>需求：定义 utils.js 模块，封装基地址和求数组总和的函数，导入到 index.js 使用查看效果</p><p><img data-src="/img/image-20230331150506876.png" alt="image-20230331150506876"></p></li><li><p>导出语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">对外属性名</span><span class="token operator">:</span> 模块内私有变量</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>导入语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> 变量名 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'模块名或路径'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// Node.js 环境内置模块直接写模块名（例如：fs，path，http）</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 自定义模块：写模块文件路径（例如：./utils.js)</span></pre></td></tr></table></figure><blockquote><p>变量名的值接收的就是目标模块导出的对象</p></blockquote></li><li><p>代码实现</p><ul><li><p>utils.js：导出</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：基于 CommonJS 标准语法，封装属性和方法并导出</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token string">'http://hmajax.itheima.net'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">getArraySum</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=></span> sum <span class="token operator">+=</span> item<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 导出</span></pre></td></tr><tr><td data-num="8"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> baseURL<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">arraySum</span><span class="token operator">:</span> getArraySum</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>index.js：导入使用</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：基于 CommonJS 标准语法，导入工具属性和方法使用</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 导入</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./utils.js'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">arraySum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr></table></figure></li></ul></li></ol><h3 id="小结-83"><a class="anchor" href="#小结-83">#</a> 小结</h3><ol><li><p>Node.js 中什么是模块化？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 每个文件都是独立的模块 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>模块之间如何联系呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 使用特定语法，导出和导入使用 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>CommonJS 标准规定如何导出和导入模块？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 导出：module.exports = {}, 导入：require (' 模块名或路径 ')&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>模块名 / 路径如何选择？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 内置模块：写名字。例如：fs，path，http 等。自定义模块：写模块文件路径，例如：./utils.js&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="02ecmascript标准-默认导出和导入"><a class="anchor" href="#02ecmascript标准-默认导出和导入">#</a> 02.ECMAScript 标准 - 默认导出和导入</h2><h3 id="目标-85"><a class="anchor" href="#目标-85">#</a> 目标</h3><p>掌握 ECMAScript 标准语法中，默认导出和导入的使用</p><h3 id="讲解-85"><a class="anchor" href="#讲解-85">#</a> 讲解</h3><ol><li><p>CommonJS 规范是 Node.js 环境中默认的，后来官方推出 ECMAScript 标准语法，我们接下来在一个需求中，体验下这个标准中默认导出和导入的语法要如何使用</p></li><li><p>需求：封装并导出基地址和求数组元素和的函数，导入到 index.js 使用查看效果</p></li><li><p>导出语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">对外属性名</span><span class="token operator">:</span> 模块内私有变量</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>导入语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> 变量名 <span class="token keyword">from</span> <span class="token string">'模块名或路径'</span></pre></td></tr></table></figure><blockquote><p>变量名的值接收的就是目标模块导出的对象</p></blockquote></li><li><p>注意：Node.js 默认只支持 CommonJS 标准语法，如果想要在当前项目环境下使用 ECMAScript 标准语法，请新建 package.json 文件设置 type: 'module' 来进行设置</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span> “type”<span class="token operator">:</span> <span class="token string">"module"</span> <span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>代码实现：</p><ul><li><p>utils.js：导出</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：基于 ECMAScript 标准语法，封装属性和方法并 "默认" 导出</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token string">'http://hmajax.itheima.net'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">getArraySum</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=></span> sum <span class="token operator">+=</span> item<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 默认导出</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> baseURL<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token literal-property property">arraySum</span><span class="token operator">:</span> getArraySum</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>index.js：导入</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：基于 ECMAScript 标准语法，"默认" 导入，工具属性和方法使用</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 默认导入</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> obj <span class="token keyword">from</span> <span class="token string">'./utils.js'</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">arraySum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr></table></figure></li></ul></li></ol><h3 id="小结-84"><a class="anchor" href="#小结-84">#</a> 小结</h3><ol><li><p>ECMAScript 标准规定如何默认导出和导入模块？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 导出：export default {} 导入：import 变量名 from ' 模块名或路径 '&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>如何让 Node.js 切换模块标准为 ECMAScript？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 运行模块所在文件夹，新建 package.json 并设置 {“type”：“module”}&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="03ecmascript标准-命名导出和导入"><a class="anchor" href="#03ecmascript标准-命名导出和导入">#</a> 03.ECMAScript 标准 - 命名导出和导入</h2><h3 id="目标-86"><a class="anchor" href="#目标-86">#</a> 目标</h3><p>掌握 ECMAScript 标准语法中，命名导出和导入的使用</p><h3 id="讲解-86"><a class="anchor" href="#讲解-86">#</a> 讲解</h3><ol><li><p>ECMAScript 标准的语法有很多，常用的就是默认和命名导出和导入，这节课我们来学习下命名导出和导入的使用</p></li><li><p>需求：封装并导出基地址和数组求和函数，导入到 index.js 使用查看效果</p></li><li><p>命名导出语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">export</span> 修饰定义语句</pre></td></tr></table></figure></li><li><p>命名导入语法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> 同名变量 <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'模块名或路径'</span></pre></td></tr></table></figure><blockquote><p>注意：同名变量指的是模块内导出的变量名</p></blockquote></li><li><p>代码示例：</p><ul><li><p>utils.js 导出</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：基于 ECMAScript 标准语法，封装属性和方法并 "命名" 导出</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token string">'http://hmajax.itheima.net'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getArraySum</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=></span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=></span> sum <span class="token operator">+=</span> item<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>index.js 导入</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：基于 ECMAScript 标准语法，"命名" 导入，工具属性和方法使用</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 命名导入</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>baseURL<span class="token punctuation">,</span> getArraySum<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./utils.js'</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>baseURL<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>getArraySum<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">getArraySum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr></table></figure></li></ul></li><li><p>与默认导出如何选择：</p><ul><li>按需加载，使用命名导出和导入</li><li>全部加载，使用默认导出和导入</li></ul></li></ol><h3 id="小结-85"><a class="anchor" href="#小结-85">#</a> 小结</h3><ol><li><p>Node.js 支持哪 2 种模块化标准？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;CommonJS 标准语法（默认）&lt;/li&gt;<br>&lt;li&gt;ECMAScript 标准语法 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>ECMAScript 标准，命名导出和导入的语法？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 导出：export 修饰定义的语句，import { 同名变量 } from ' 模块名或路径 '&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>ECMAScript 标准，默认导出和导入的语法？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 导出：export default {} 导入：import 变量名 from ' 模块名或路径 '&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="04包的概念"><a class="anchor" href="#04包的概念">#</a> 04. 包的概念</h2><h3 id="目标-87"><a class="anchor" href="#目标-87">#</a> 目标</h3><p>了解 Node.js 环境中包的概念</p><h3 id="讲解-87"><a class="anchor" href="#讲解-87">#</a> 讲解</h3><ol><li><p>包：将模块，代码，其他资料整合成一个文件夹，这个文件夹就叫包</p></li><li><p>包分类：</p><ul><li>项目包：主要用于编写项目和业务逻辑</li><li>软件包：封装工具和方法进行使用</li></ul></li><li><p>包要求：根目录中，必须有 package.json 文件（记录包的清单信息）</p><p><img data-src="/img/image-20230331154702306.png" alt="image-20230331154702306"></p><p><img data-src="/img/image-20230331154639881.png" alt="image-20230331154639881"></p></li><li><p>包使用：在引入一个包文件夹到代码中，默认引入的是包文件节下的 index.js 模块文件里导出的对象，如果没有 index.js 文件，则会引入 package.json 里 main 属性指定的文件模块导出的对象</p></li><li><p>需求：封装数组求和函数的模块，封装判断用户名和密码长度函数的模块，形成一个软件包，并导入到 index.js 中使用查看效果</p></li><li><p>代码示例：</p><ul><li><p>utils/lib 相关代码在素材里准备好了，只需要自己在 utils/index.js 统一出口进行导出</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 本文件是，utils 工具包的唯一出口</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：把所有工具模块方法集中起来，统一向外暴露</pre></td></tr><tr><td data-num="4"></td><td><pre> */</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> getArraySum <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/arr.js'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> checkUser<span class="token punctuation">,</span> checkPwd <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/str.js'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 统一导出所有函数</span></pre></td></tr><tr><td data-num="9"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  getArraySum<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  checkUser<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  checkPwd</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>index.js 导入软件包文件夹使用（注意：这次导入的是包文件夹，不是模块文件）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标：导入 utils 软件包，使用里面封装的工具函数</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./utils'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> result <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">getArraySum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></pre></td></tr></table></figure></li></ul></li></ol><h3 id="小结-86"><a class="anchor" href="#小结-86">#</a> 小结</h3><ol><li><p>什么是包？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 将模块，代码，其他资料聚合成的文件夹 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>包分为哪 2 类呢？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 项目包：编写项目代码的文件夹，软件包：封装工具和方法供开发者使用 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>package.json 文件的作用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 记录软件包的名字，作者，入口文件等信息 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>导入一个包文件夹的时候，导入的是哪个文件？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 默认 index.js 文件，或者 main 属性指定的文件 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="05npm软件包管理器"><a class="anchor" href="#05npm软件包管理器">#</a> 05.npm 软件包管理器</h2><h3 id="目标-88"><a class="anchor" href="#目标-88">#</a> 目标</h3><p>掌握使用 npm 管理软件包</p><h3 id="讲解-88"><a class="anchor" href="#讲解-88">#</a> 讲解</h3><ol><li><p>npm 简介<a href="%5Bhttp://dev.nodejs.cn/learn/an-introduction-to-the-npm-package-manager#npm-%E7%AE%80%E4%BB%8B%5D(http://dev.nodejs.cn/learn/an-introduction-to-the-npm-package-manager)">链接</a>： 软件包管理器，用于下载和管理 Node.js 环境中的软件包</p><p><img data-src="/img/image-20230331155406652.png" alt="image-20230331155406652"></p></li><li><p>npm 使用步骤：</p><ol><li><p>初始化清单文件： npm init -y （得到 package.json 文件，有则跳过此命令）</p><blockquote><p>注意 -y 就是所有选项用默认值，所在文件夹不要有中文 / 特殊符号，建议英文和数字组成，因为 npm 包名限制建议用英文和数字或者下划线中划线</p></blockquote></li><li><p>下载软件包：npm i 软件包名称</p></li><li><p>使用软件包</p></li></ol></li><li><p>需求：使用 npm 下载 dayjs 软件包到本地项目文件夹中，引入到 index.js 中格式化日期打印，运行观察效果</p></li><li><p>具体使用流程图：</p><p><img data-src="/img/image-20230331155537983.png" alt="image-20230331155537983"></p></li></ol><h3 id="小结-87"><a class="anchor" href="#小结-87">#</a> 小结</h3><ol><li><p>npm 软件包管理器作用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 下载软件包以及管理版本 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>初始化项目清单文件 package.json 命令？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;npm init -y&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>下载软件包的命令？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;npm i 软件包名字 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>下载的包会存放在哪里？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 当前项目下的 node_modules 中，并记录在 package.json 中 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="06npm安装所有依赖"><a class="anchor" href="#06npm安装所有依赖">#</a> 06.npm 安装所有依赖</h2><h3 id="目标-89"><a class="anchor" href="#目标-89">#</a> 目标</h3><p>掌握 npm 安装所有依赖功能</p><h3 id="讲解-89"><a class="anchor" href="#讲解-89">#</a> 讲解</h3><ol><li><p>我们拿到了一个别人编写的项目，但是没有 node_modules，项目能否正确运行？</p><blockquote><p>不能，因为缺少了项目需要的依赖软件包，比如要使用 dayjs 和 lodash 但是你项目里没有这个对应的源码，项目会报错的</p></blockquote><p><img data-src="/img/image-20230331162320775.png" alt="image-20230331162320775"></p></li><li><p>为何没有给我 node_modules？</p><blockquote><p>因为每个人在自己的本机使用 npm 下载，要比磁盘间传递要快（npm 有缓存在本机）</p></blockquote></li><li><p>如何得到需要的所有依赖软件包呢？</p><blockquote><p>直接在项目目录下，运行终端命令：npm i 即可安装 package.json 里记录的所有包和对应版本到本项目中的 node_modules</p></blockquote><p><img data-src="/img/image-20230331162341684.png" alt="image-20230331162341684"></p></li><li><p>需求：请在准备好的素材项目中，安装项目所有需要的依赖软件包，并运行 index.js 代码看是否正常！</p></li></ol><h3 id="小结-88"><a class="anchor" href="#小结-88">#</a> 小结</h3><ol><li><p>当前项目中只有 package.json 没有 node_modules 怎么办？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 当前项目目录下，打开终端，执行 npm i 安装所有依赖软件包 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>为什么 node_modules 不进行传递？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 因为用 npm 下载有缓存在本机，比磁盘之间传递要快 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="07npm全局软件包-nodemon"><a class="anchor" href="#07npm全局软件包-nodemon">#</a> 07.npm 全局软件包 - nodemon</h2><h3 id="目标-90"><a class="anchor" href="#目标-90">#</a> 目标</h3><p>掌握本地软件包和全局软件包区别，体验 nodemon 的使用</p><h3 id="讲解-90"><a class="anchor" href="#讲解-90">#</a> 讲解</h3><ol><li><p>软件包区别：</p><ul><li>本地软件包：当前项目内使用，&lt;span style=&quot;color: red;&quot;&gt; 封装属性和方法 &lt;/span&gt;，存在于 node_modules</li><li>全局软件包：本机所有项目使用，&lt;span style=&quot;color: red;&quot;&gt; 封装命令和工具 &lt;/span&gt;，存在于系统设置的位置</li></ul></li><li><p>nodemon 作用：替代 node 命令，检测代码更改，自动重启程序</p></li><li><p>使用：</p><ol><li>安装：npm i nodemon -g （-g 代表安装到全局环境中）</li><li>运行：nodemon 待执行的目标 js 文件</li></ol></li><li><p>需求：使用 nodemon 命令来启动素材里准备好的项目，然后修改代码保存后，观察终端重启应用程序</p></li></ol><h3 id="小结-89"><a class="anchor" href="#小结-89">#</a> 小结</h3><ol><li><p>本地软件包和全局软件包区别？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 本地软件包，作用在当前项目，封装属性和方法 &lt;/li&gt;<br>&lt;li&gt; 全局软件包，本地所有项目使用，封装命令和工具 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>nodemon 作用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 替代 node 命令，检测代码更改，自动重启程序 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>nodemon 怎么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 先确保安装 npm i nodemon -g&lt;/li&gt;<br>&lt;li&gt; 使用 nodemon 执行目标 js 文件 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="08nodejs概念和常用命令总结"><a class="anchor" href="#08nodejs概念和常用命令总结">#</a> 08.Node.js 概念和常用命令总结</h2><h3 id="目标-91"><a class="anchor" href="#目标-91">#</a> 目标</h3><p>把上面学的模块化语法，包的概念，常用命令进行总结</p><h3 id="讲解-91"><a class="anchor" href="#讲解-91">#</a> 讲解</h3><ol><li><p>Node.js 模块化：把每个文件当做一个模块，独立作用域，按需加载，使用特定标准语法导出和导入使用</p><blockquote><p>CommonJS 标准：一般应用在 Node.js 项目环境中</p><p>ECMAScript 标准：一般应用在前端工程化项目中</p></blockquote><p><img data-src="/img/image-20230331170210113.png" alt="image-20230331170210113"></p><p><img data-src="/img/image-20230331170220045.png" alt="image-20230331170220045"></p></li><li><p>Node.js 包：把模块文件，代码文件，其他资料聚合成一个文件夹就是包</p><blockquote><p>项目包：编写项目需求和业务逻辑的文件夹</p><p>软件包：封装工具和方法进行使用的文件夹（一般使用 npm 管理）</p><ul><li>本地软件包：作用在当前项目，封装的属性 / 方法，供项目调用编写业务需求</li><li>全局软件包：作用在所有项目，一般封装的命令 / 工具，支撑项目运行</li></ul></blockquote><p><img data-src="/img/image-20230331170539931.png" alt="image-20230331170539931"></p></li><li><p>Node.js 常用命令：</p><p><img data-src="/img/image-20230331171411780.png" alt="image-20230331171411780"></p></li></ol><h3 id="小结-90"><a class="anchor" href="#小结-90">#</a> 小结</h3><ol><li><p>安装本地软件包的命令是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;npm i 软件包名 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h1 id="八-webpack模块打包工具"><a class="anchor" href="#八-webpack模块打包工具">#</a> 八、Webpack 模块打包工具</h1><h2 id="知识点自测-7"><a class="anchor" href="#知识点自测-7">#</a> 知识点自测</h2><ol><li><p>以下哪个选项是 ECMAScript 默认导出和导入的语法？</p><p>A：export 和 require</p><p>B：module.exports = {} 和 import 变量名</p><p>C：export default 和 import 变量名</p><p 同名变量名="">D：export 和 import</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;C 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>对以下 less 样式代码描述正确的是？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">.</span>title <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  span <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">color</span><span class="token operator">:</span> red<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>A：查找 class 名字叫 title 元素范围内，所有 span 标签</p><p>B：查找 class 名字叫 title 和 span 标签</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;A 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下代码运行结果是多少？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=></span> val <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span></pre></td></tr></table></figure><p>A：[undefined, undefined, undefined, undefined]</p><p>B：[2, 4, 6, 8]</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;B 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>以下针对 axios 函数使用时的配置项描述正确的选项？</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token comment">// 这里</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>A：url：请求的方法，method：传递参数</p><p>B：data：传递查询参数，params：传递请求体参数</p><p>C：url：请求的网址，method：请求的方法</p><p>D：data：传递请求体参数，params：传递请求体参数</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;C 选项正确 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="01webpack-简介以及体验"><a class="anchor" href="#01webpack-简介以及体验">#</a> 01.Webpack 简介以及体验</h2><h3 id="目标-92"><a class="anchor" href="#目标-92">#</a> 目标</h3><p>了解 Webpack 的概念和作用，以及使用</p><h3 id="讲解-92"><a class="anchor" href="#讲解-92">#</a> 讲解</h3><ol><li><p>Webpack 是一个静态模块打包工具，从入口构建依赖图，打包有关的模块，最后用于展示你的内容</p><p><img data-src="/img/image-20230403105744257.png" alt="image-20230403105744257"></p></li><li><p>静态模块：编写代码过程中的，html，css， js，图片等固定内容的文件</p></li><li><p>打包过程，注意：只有和入口有直接 / 间接引入关系的模块，才会被打包</p><p><img data-src="/img/image-20230403105848637.png" alt="image-20230403105848637"></p></li><li><p>Webpack 的作用：把静态模块内容，压缩，这个和，转译等（前端工程化）</p><ul><li>把 less/sass 转成 css 代码</li><li>把 ES6+ 降级成 ES5 等</li><li>支持多种模块文件类型，多种模块标准语法</li></ul></li><li><p>为何不学 vite？</p><blockquote><p>现在很多项目还是基于 Webpack 来进行构建的，所以还是要掌握 Webpack 的使用</p></blockquote></li><li><p>体验 Webpack 打包 2 个 JS 文件内容</p></li><li><p>需求：封装 utils 包，校验手机号和验证码长度，在 src/index.js 中使用，使用 Webpack 打包</p></li><li><p>步骤：</p><ol><li><p>新建项目文件夹 Webpack_study，初始化包环境，得到 package.json 文件</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> init <span class="token parameter variable">-y</span></pre></td></tr></table></figure></li><li><p>新建 src 源代码文件夹（书写代码）包括 utils/check.js 封装用户名和密码长度函数，引入到 src/index.js 进行使用</p><ul><li><p>src/utils/check.js</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 封装校验手机号长度和校验验证码长度的函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">checkPhone</span> <span class="token operator">=</span> <span class="token parameter">phone</span> <span class="token operator">=></span> phone<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">11</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">checkCode</span> <span class="token operator">=</span> <span class="token parameter">code</span> <span class="token operator">=></span> code<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">6</span></pre></td></tr></table></figure></li><li><p>src/index.js</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 1：体验 webpack 打包过程</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 1.1 准备项目和源代码</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> checkPhone<span class="token punctuation">,</span> checkCode <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../utils/check.js'</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">checkPhone</span><span class="token punctuation">(</span><span class="token string">'13900002020'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">checkCode</span><span class="token punctuation">(</span><span class="token string">'123123123123'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 1.2 准备 webpack 打包的环境</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 1.3 运行自定义命令打包观察效果（npm run 自定义命令）</span></pre></td></tr></table></figure></li></ul></li><li><p>下载 webpack webpack-cli 到项目（版本独立）</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i webpack webpack-cli --save-dev</pre></td></tr></table></figure><blockquote><p>注意：虽然 webpack 是全局软件包，封装的是命令工具，但是为了保证项目之间版本分别独立，所以这次比较特殊，下载到某个项目环境下，但是需要把 webpack 命令配置到 package.json 的 scripts 自定义命令，作为局部命令使用</p></blockquote><p><img data-src="/img/image-20230403110640647.png" alt="image-20230403110640647"></p></li><li><p>项目中运行工具命令，采用自定义命令的方式（局部命令）</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> run build</pre></td></tr></table></figure><blockquote><p>npm run 自定义命令名字</p><p>注意：实际上在终端运行的是 build 右侧的具体命名</p></blockquote></li><li><p>自动产生 dist 分发文件夹（压缩和优化后，用于最终运行的代码）</p></li></ol></li><li><p>需求最终流程图：</p><p><img data-src="/img/image-20230403111445196.png" alt="image-20230403111445196"></p></li></ol><h3 id="小结-91"><a class="anchor" href="#小结-91">#</a> 小结</h3><ol><li><p>Webpack 有什么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 压缩，转译，整合，打包我们的静态模块 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>Webpack 怎么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 初始化环境，编写代码，安装 Webpack 软件包，配置自定义命令，打包体验查看结果 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>如何运行 package.json 里的自定义命令？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;npm run 自定义命令 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li><li><p>Webpack 默认入口和出口？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt;src/index.js 和 dist/main.js&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="02webpack-修改入口和出口"><a class="anchor" href="#02webpack-修改入口和出口">#</a> 02.Webpack 修改入口和出口</h2><h3 id="目标-93"><a class="anchor" href="#目标-93">#</a> 目标</h3><p>了解 Webpack 配置文件使用，影响 Webpack 打包过程和结果</p><h3 id="讲解-93"><a class="anchor" href="#讲解-93">#</a> 讲解</h3><ol><li><p><a href="%5Bhttps://webpack.docschina.org/concepts/#entry%5D(https://webpack.docschina.org/concepts/)">Webpack 配置</a>：影响 Webpack 打包过程</p></li><li><p>步骤：</p><ol><li><p>项目根目录，新建 Webpack.config.js 配置文件</p></li><li><p>导出配置对象，配置入口，出口文件路径（别忘了修改磁盘文件夹和文件的名字）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/login/index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./login/index.js'</span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>重新打包观察</p></li></ol></li><li><p>图解：</p><p><img data-src="/img/image-20230518101043103.png" alt="image-20230518101043103"></p></li></ol><h3 id="小结-92"><a class="anchor" href="#小结-92">#</a> 小结</h3><ol><li><p>如何影响 Webpack 打包过程？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 查文档，新建配置文件和配置属性 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="03案例-用户登录-长度判断"><a class="anchor" href="#03案例-用户登录-长度判断">#</a> 03. 案例 - 用户登录 - 长度判断</h2><h3 id="目标-94"><a class="anchor" href="#目标-94">#</a> 目标</h3><p>体验前端项目代码，如何被 Webpack 打包和使用</p><h3 id="讲解-94"><a class="anchor" href="#讲解-94">#</a> 讲解</h3><ol><li><p>需求：点击登录按钮，判断手机号和验证码长度是否符合要求</p></li><li><p>步骤：</p><ol><li><p>新建 public/login.html 准备网页模板（方便查找标签和后期自动生成 html 文件做准备）</p><p><img data-src="/img/image-20230518101137662.png" alt="image-20230518101137662"></p></li><li><p>核心 JS 代码写在 src/login/index.js 文件</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 3：用户登录 - 长度判断案例</pre></td></tr><tr><td data-num="3"></td><td><pre> *  3.1 准备用户登录页面</pre></td></tr><tr><td data-num="4"></td><td><pre> *  3.2 编写核心 JS 逻辑代码</pre></td></tr><tr><td data-num="5"></td><td><pre> *  3.3 打包并手动复制网页到 dist 下，引入打包后的 js，运行</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 3.2 编写核心 JS 逻辑代码</span></pre></td></tr><tr><td data-num="8"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">const</span> phone <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.login-form [name=mobile]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">const</span> code <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.login-form [name=code]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkPhone</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'手机号长度必须是11位'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">return</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'验证码长度必须是6位'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">return</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'提交到服务器登录...'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>运行自定义命令，让 Webpack 打包 JS 代码</p></li><li><p>手动复制 public/login.html 到 dist 下，手动引入打包后的 JS 代码文件，运行 dist/login.html 在浏览器查看效果</p><p><img data-src="/img/image-20230518101404084.png" alt="image-20230518101404084"></p></li></ol></li></ol><h3 id="小结-93"><a class="anchor" href="#小结-93">#</a> 小结</h3><ol><li><p>Webpack 打包后的前端代码是如何运行的？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 手动引入到 html 文件中，再交给浏览器运行 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="04webpack-自动生成-html-文件"><a class="anchor" href="#04webpack-自动生成-html-文件">#</a> 04.Webpack 自动生成 html 文件</h2><h3 id="目标-95"><a class="anchor" href="#目标-95">#</a> 目标</h3><p>让 Webpack 拥有自动生成 html 文件能力，并引入打包后的其他资源</p><h3 id="讲解-95"><a class="anchor" href="#讲解-95">#</a> 讲解</h3><ol><li><p><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvcGx1Z2lucy9odG1sLXdlYnBhY2stcGx1Z2luLw==">插件 html-webpack-plugin 作用</span>：在 Webpack 打包时生成 html 文件，并引入其他打包后的资源</p></li><li><p>步骤：</p><ol><li><p>下载 html-webpack-plugin 本地软件包到项目中</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i html-webpack-plugin --save-dev</pre></td></tr></table></figure></li><li><p>配置 webpack.config.js 让 Webpack 拥有插件功能</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./public/login.html'</span><span class="token punctuation">,</span> <span class="token comment">// 模板文件</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./login/index.html'</span> <span class="token comment">// 输出文件</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>指定以 public/login.html 为模板复制到 dist/login/index.html，并自动引入其他打包后资源</p></li></ol></li><li><p>运行打包命令，观察打包后 dist 文件夹下内容并运行查看效果</p></li></ol><h3 id="小结-94"><a class="anchor" href="#小结-94">#</a> 小结</h3><ol><li><p>html-webpack-plugin 插件怎么用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 找到插件文档，下载到项目中，配置到 Webpack 的配置文件中即可使用 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="05webpack-打包-css-代码"><a class="anchor" href="#05webpack-打包-css-代码">#</a> 05.Webpack - 打包 css 代码</h2><h3 id="目标-96"><a class="anchor" href="#目标-96">#</a> 目标</h3><p>让 Webpack 能够打包 css 代码</p><h3 id="讲解-96"><a class="anchor" href="#讲解-96">#</a> 讲解</h3><ol><li><p>注意：Webpack 默认只识别 JS 和 JSON 文件内容，所以想要让 Webpack 识别更多不同内容，需要使用加载器</p></li><li><p>介绍需要的 2 个加载器来辅助 Webpack 才能打包 css 代码</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvbG9hZGVycy9jc3MtbG9hZGVyLw==">加载器 css-loader</span>：解析 css 代码</li><li><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvbG9hZGVycy9zdHlsZS1sb2FkZXIv">加载器 style-loader</span>：把解析后的 css 代码插入到 DOM（style 标签之间）</li></ul></li><li><p>步骤：</p><ol><li><p>准备 css 文件引入到 src/login/index.js 中（压缩转译处理等）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 5：打包 css 代码</pre></td></tr><tr><td data-num="3"></td><td><pre> *  5.1 准备 css 代码，并引入到 js 中</pre></td></tr><tr><td data-num="4"></td><td><pre> *  5.2 下载 css-loader 和 style-loader 本地软件包</pre></td></tr><tr><td data-num="5"></td><td><pre> *  5.3 配置 webpack.config.js 让 Webpack 拥有该加载器功能</pre></td></tr><tr><td data-num="6"></td><td><pre> *  5.4 打包后观察效果</pre></td></tr><tr><td data-num="7"></td><td><pre> */</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 5.1 准备 css 代码，并引入到 js 中</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token string">'bootstrap/dist/css/bootstrap.min.css'</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">import</span> <span class="token string">'./index.css'</span></pre></td></tr></table></figure><blockquote><p>注意：这里只是引入代码内容让 Webpack 处理，不需定义变量接收在 JS 代码中继续使用，所以没有定义变量接收</p></blockquote></li><li><p>下载 css-loader 和 style-loader 本地软件包</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i css-loader style-loader --save-dev</pre></td></tr></table></figure></li><li><p>配置 webpack.config.js 让 Webpack 拥有该加载器功能</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 加载器</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 规则列表</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span> <span class="token comment">// 匹配 .css 结尾的文件</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 使用从后到前的加载器来解析 css 代码和插入到 DOM</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>打包后运行 dist/login/index.html 观察效果，看看准备好的样式是否作用在网页上</p></li></ol></li></ol><h3 id="小结-95"><a class="anchor" href="#小结-95">#</a> 小结</h3><ol><li><p>加载器的作用是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 让 Webpack 识别更多的代码内容类型 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="06优化-提取-css-代码"><a class="anchor" href="#06优化-提取-css-代码">#</a> 06. 优化 - 提取 css 代码</h2><h3 id="目标-97"><a class="anchor" href="#目标-97">#</a> 目标</h3><p>让 Webpack 能够提取 css 代码到独立的 css 文件中</p><h3 id="讲解-97"><a class="anchor" href="#讲解-97">#</a> 讲解</h3><ol><li><p>需求：让 webpack 把 css 代码内容字符串单独提取到 dist 下的 css 文件中</p></li><li><p>需要：mini-css-extract-plugin 插件来实现</p></li><li><p>步骤：</p><ol><li><p>下载 mini-css-extract-plugin 插件软件包到本地项目中</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i --save-dev mini-css-extract-plugin</pre></td></tr></table></figure></li><li><p>配置 webpack.config.js 让 Webpack 拥有该插件功能</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// use: ['style-loader', 'css-loader']</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">"css-loader"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>打包后观察效果</p></li><li><p>注意：不能和 style-loader 一起使用</p></li><li><p>好处：css 文件可以被浏览器缓存，减少 JS 文件体积，让浏览器并行下载 css 和 js 文件</p></li></ol></li></ol><h3 id="小结-96"><a class="anchor" href="#小结-96">#</a> 小结</h3><h2 id="07优化压缩过程"><a class="anchor" href="#07优化压缩过程">#</a> 07. 优化压缩过程</h2><h3 id="目标-98"><a class="anchor" href="#目标-98">#</a> 目标</h3><p>把单独提取的 css 文件内代码压缩</p><h3 id="讲解-98"><a class="anchor" href="#讲解-98">#</a> 讲解</h3><ol><li><p>需求：把提出的 css 文件内样式代码压缩</p></li><li><p>需要：css-minimizer-webpack-plugin 插件来实现</p></li><li><p>步骤：</p><ol><li><p>下载 mini-css-extract-plugin 插件软件包到本地项目中</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i css-minimizer-webpack-plugin --save-dev</pre></td></tr></table></figure></li><li><p>配置 webpack.config.js 让 Webpack 拥有该插件功能</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"css-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// 优化</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 最小化</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token comment">// 在 webpack@5 中，你可以使用 `...` 语法来扩展现有的 minimizer（即 </span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token comment">// `terser-webpack-plugin`），将下一行取消注释（保证 JS 代码还能被压缩处理）</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>打包后观察 css 文件内自己代码是否被压缩了</p></li></ol></li></ol><h3 id="小结-97"><a class="anchor" href="#小结-97">#</a> 小结</h3><h2 id="08webpack-打包-less-代码"><a class="anchor" href="#08webpack-打包-less-代码">#</a> 08.Webpack - 打包 less 代码</h2><h3 id="目标-99"><a class="anchor" href="#目标-99">#</a> 目标</h3><p>让 Webpack 拥有打包 less 代码功能</p><h3 id="讲解-99"><a class="anchor" href="#讲解-99">#</a> 讲解</h3><ol><li><p><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvbG9hZGVycy9sZXNzLWxvYWRlci8=">加载器 less-loader</span>：把 less 代码编译为 css 代码，还需要依赖 less 软件包</p></li><li><p>步骤：</p><ol><li><p>新建 login/index.less 文件，设置背景图样式（图片在配套资料 - 素材文件夹中）</p><figure class="highlight less"><figcaption data-lang="less"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">html</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token selector">body</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'./assets/login-bg.png'</span><span class="token punctuation">)</span></span> no<span class="token operator">-</span>repeat center<span class="token operator">/</span>cover<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>less 样式引入到 src/login/index.js 中</p></li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 8：打包 less 代码</pre></td></tr><tr><td data-num="3"></td><td><pre> *  8.1 新建 less 代码（设置背景图）并引入到 src/login/index.js 中</pre></td></tr><tr><td data-num="4"></td><td><pre> *  8.2 下载 less 和 less-loader 本地软件包</pre></td></tr><tr><td data-num="5"></td><td><pre> *  8.3 配置 webpack.config.js 让 Webpack 拥有功能</pre></td></tr><tr><td data-num="6"></td><td><pre> *  8.4 打包后观察效果</pre></td></tr><tr><td data-num="7"></td><td><pre> */</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 8.1 新建 less 代码（设置背景图）并引入到 src/login/index.js 中</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token string">'./index.less'</span></pre></td></tr></table></figure><ol start="3"><li><p>下载 less 和 less-loader 本地软件包</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i <span class="token function">less</span> less-loader --save-dev</pre></td></tr></table></figure></li><li><p>配置 webpack.config.js 让 Webpack 拥有功能</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">"css-loader"</span><span class="token punctuation">,</span> <span class="token string">"less-loader"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>打包后运行 观察效果</p></li></ol></li></ol><h3 id="小结-98"><a class="anchor" href="#小结-98">#</a> 小结</h3><ol><li><p>Webpack 支持 less 代码打包需要哪 2 个软件包？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 需要 less less-loader 这 2 个软件包 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="09webpack-打包图片"><a class="anchor" href="#09webpack-打包图片">#</a> 09.Webpack - 打包图片</h2><h3 id="目标-100"><a class="anchor" href="#目标-100">#</a> 目标</h3><p>让 Webpack 支持图片等资源打包</p><h3 id="讲解-100"><a class="anchor" href="#讲解-100">#</a> 讲解</h3><ol><li><p><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvZ3VpZGVzL2Fzc2V0LW1vZHVsZXMv">资源模块</span>：Webpack 内置了资源模块的打包，无需下载额外 loader</p></li><li><p>步骤：</p><ol><li><p>配置 webpack.config.js 让 Webpack 拥有打包图片功能</p><p>占位符 【hash】对模块内容做算法计算，得到映射的数字字母组合的字符串</p><p>占位符 【ext】使用当前模块原本的占位符，例如：.png/.jpg 等字符串</p><p>占位符 【query】保留引入文件时代码中查询参数（只有 URL 下生效）</p></li><li><p>注意：判断临界值默认为 8KB</p><p>大于 8KB 文件：发送一个单独的文件并导出 URL 地址</p><p>小于 8KB 文件：导出一个 data URI（base64 字符串）</p></li><li><p>在 src/login/index.js 中给 img 标签添加 logo 图片</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 9：打包资源模块（图片处理）</pre></td></tr><tr><td data-num="3"></td><td><pre> *  9.1 创建 img 标签并动态添加到页面，配置 webpack.config.js</pre></td></tr><tr><td data-num="4"></td><td><pre> *  9.2 打包后观察效果和区别</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 9.1 创建 img 标签并动态添加到页面，配置 webpack.config.js</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 注意：js 中引入本地图片资源要用 import 方式（如果是网络图片 http 地址，字符串可以直接写）</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> imgObj <span class="token keyword">from</span> <span class="token string">'./assets/logo.png'</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> theImg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>theImg<span class="token punctuation">.</span>src <span class="token operator">=</span> imgObj</pre></td></tr><tr><td data-num="11"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.login-wrap'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>theImg<span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>配置 webpack.config.js 让 Webpack 拥有打包图片功能</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'assets/[hash][ext][query]'</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>打包后运行观察效果</p></li></ol></li></ol><h3 id="小结-99"><a class="anchor" href="#小结-99">#</a> 小结</h3><ol><li><p>资源模块指的是什么？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 图片，字体文件等等 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="10案例-用户登录-完成功能"><a class="anchor" href="#10案例-用户登录-完成功能">#</a> 10. 案例 - 用户登录 - 完成功能</h2><h3 id="目标-101"><a class="anchor" href="#目标-101">#</a> 目标</h3><p>在 Webpack 环境下，使用 npm 下包作用在前端项目</p><h3 id="讲解-101"><a class="anchor" href="#讲解-101">#</a> 讲解</h3><ol><li><p>需求：点击登录按钮，基于 npm 下载 axios 包，完成验证码登录功能</p><p><img data-src="/img/image-20230518103430262.png" alt="image-20230518103430262"></p></li><li><p>步骤：</p><ol><li><p>使用 npm 下载 axios</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i axios</pre></td></tr></table></figure></li><li><p>引入到 src/login/index.js 中编写业务实现</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 目标 10：完成登录功能</pre></td></tr><tr><td data-num="3"></td><td><pre> *  10.1 使用 npm 下载 axios（体验 npm 作用在前端项目中）</pre></td></tr><tr><td data-num="4"></td><td><pre> *  10.2 准备并修改 utils 工具包源代码导出实现函数</pre></td></tr><tr><td data-num="5"></td><td><pre> *  10.3 导入并编写逻辑代码，打包后运行观察效果</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 10.3 导入并编写逻辑代码，打包后运行观察效果</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> myAxios <span class="token keyword">from</span> <span class="token string">'../utils/request.js'</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> myAlert <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../utils/alert.js'</span></pre></td></tr><tr><td data-num="10"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">const</span> phone <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.login-form [name=mobile]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token keyword">const</span> code <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.login-form [name=code]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkPhone</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">myAlert</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'手机号长度必须是11位'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'手机号长度必须是11位'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token function">myAlert</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'验证码长度必须是6位'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'验证码长度必须是6位'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">return</span></pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/authorizations'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token literal-property property">mobile</span><span class="token operator">:</span> phone<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      <span class="token literal-property property">code</span><span class="token operator">:</span> code</pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token function">myAlert</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'登录成功'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>token<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'../content/index.html'</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token function">myAlert</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>打包后运行观察效果</p></li></ol></li></ol><h3 id="小结-100"><a class="anchor" href="#小结-100">#</a> 小结</h3><ol><li><p>npm 下载的包如何作用在前端项目上？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 被 Webpack 打包处理后，再引入到 html 文件中运行 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="10webpack-搭建开发环境"><a class="anchor" href="#10webpack-搭建开发环境">#</a> 10.Webpack 搭建开发环境</h2><h3 id="目标-102"><a class="anchor" href="#目标-102">#</a> 目标</h3><p>体验 webpack-dev-server 开发服务器，快速开发应用程序</p><h3 id="讲解-102"><a class="anchor" href="#讲解-102">#</a> 讲解</h3><ol><li><p>每次改动代码，都要重新打包，很麻烦，所以这里给项目集成 webpack-dev-server 开发服务器</p></li><li><p>作用：启动 Web 服务，打包输出源码在内存，并会自动检测代码变化热更新到网页</p></li><li><p>步骤；</p><ol><li><p>下载 webpack-dev-server 软件包到当前项目</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i webpack-dev-server --save-dev</pre></td></tr></table></figure></li><li><p>配置自定义命令，并设置打包的模式为开发模式</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"webpack serve --mode=development"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure></li><li><p>使用 npm run dev 来启动开发服务器，访问提示的域名 + 端口号，在浏览器访问打包后的项目网页，修改代码后试试热更新效果</p><blockquote><p>在 js /css 文件中修改代码保存后，会实时反馈到浏览器</p></blockquote></li></ol></li></ol><h3 id="小结-101"><a class="anchor" href="#小结-101">#</a> 小结</h3><ol><li><p>webpack-dev-server 的作用？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 启动 Webpack 开发服务器，会启动一个 Web 服务，实时检测代码变化重新打包，并快速反应最新效果到浏览器页面上 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="11webpack-打包模式"><a class="anchor" href="#11webpack-打包模式">#</a> 11.Webpack 打包模式</h2><h3 id="目标-103"><a class="anchor" href="#目标-103">#</a> 目标</h3><p>了解不同打包模式对代码和环境的影响</p><h3 id="讲解-103"><a class="anchor" href="#讲解-103">#</a> 讲解</h3><ol><li><p><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvY29uZmlndXJhdGlvbi9tb2RlLw==">打包模式</span>：告知 Webpack 使用相应模式的内置优化</p></li><li><p>分类：</p><table><thead><tr><th><strong>模式名称</strong></th><th><strong>模式名字</strong></th><th><strong>特点</strong></th><th>场景</th></tr></thead><tbody><tr><td>开发模式</td><td>development</td><td>调试代码，实时加载，模块热替换等</td><td>本地开发</td></tr><tr><td>生产模式</td><td>production</td><td>压缩代码，资源优化，更轻量等</td><td>打包上线</td></tr></tbody></table></li><li><p>如何设置影响 Webpack 呢？</p><ul><li><p>方式 1：在 webpack.config.js 配置文件设置 mode 选项</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>方式 2：在 package.json 命令行设置 mode 参数</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --mode=production"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"webpack serve --mode=development"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure></li></ul></li><li><p>注意：命令行设置的优先级高于配置文件中的，推荐用命令行设置</p></li><li><p>体验：在 build 命令后 修改 mode 的值，打包输出观察打包后的 js 文件内容</p></li></ol><h3 id="小结-102"><a class="anchor" href="#小结-102">#</a> 小结</h3><ol><li><p>两种模式的区别？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 开发模式注重代码热替换更快，让开发调试代码更便捷，生产模式注重项目体积更小，更轻量，适配不同的浏览器环境 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="12webpack-打包模式的应用"><a class="anchor" href="#12webpack-打包模式的应用">#</a> 12.Webpack 打包模式的应用</h2><h3 id="目标-104"><a class="anchor" href="#目标-104">#</a> 目标</h3><p>了解 Webpack 打包模式的应用</p><h3 id="讲解-104"><a class="anchor" href="#讲解-104">#</a> 讲解</h3><ol><li><p>需求：在开发模式下用 style-loader 内嵌更快，在生产模式下提取 css 代码</p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvY29uZmlndXJhdGlvbi9tb2RlLw==">方案</span><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvY29uZmlndXJhdGlvbi9tb2RlLw=="> 1</span>：webpack.config.js 配置导出函数，但是局限性大（只接受 2 种模式）</p><p>方案 2：借助 cross-env （跨平台通用）包命令，设置参数区分环境</p><p><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvZ3VpZGVzL3Byb2R1Y3Rpb24v">方案</span><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvZ3VpZGVzL3Byb2R1Y3Rpb24v"> 3</span>：配置不同的 webpack.config.js （适用多种模式差异性较大情况）</p></li><li><p>主要使用方案 2 尝试，其他方案可以结合点击跳转的官方文档查看尝试</p></li><li><p>步骤：</p><p>1. 下载 cross-env 软件包到当前项目</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>npm i cross<span class="token operator">-</span>env <span class="token operator">--</span>save<span class="token operator">-</span>dev</pre></td></tr></table></figure><p>2. 配置自定义命令，传入参数名和值（会绑定到 process.env 对象下）</p><p><img data-src="/img/image-20230518104016802.png" alt="image-20230518104016802"></p><p>3. 在 webpack.config.js 区分不同环境使用不同配置</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// use: ['style-loader', "css-loader"],</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span> <span class="token operator">?</span> <span class="token string">'style-loader'</span> <span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">"css-loader"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="11"></td><td><pre>          <span class="token comment">// compiles Less to CSS</span></pre></td></tr><tr><td data-num="12"></td><td><pre>          process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span> <span class="token operator">?</span> <span class="token string">'style-loader'</span> <span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>          <span class="token string">'css-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token string">'less-loader'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>4. 重新打包观察两种配置区别</p></li></ol><h3 id="小结-103"><a class="anchor" href="#小结-103">#</a> 小结</h3><h2 id="13webpack-前端注入环境变量"><a class="anchor" href="#13webpack-前端注入环境变量">#</a> 13.Webpack 前端注入环境变量</h2><h3 id="目标-105"><a class="anchor" href="#目标-105">#</a> 目标</h3><p>前端项目中，开发模式下打印语句生效，生产模式下打印语句失效</p><h3 id="讲解-105"><a class="anchor" href="#讲解-105">#</a> 讲解</h3><ol><li><p>需求：前端项目中，开发模式下打印语句生效，生产模式下打印语句失效</p></li><li><p>问题：cross-env 设置的只在 Node.js 环境生效，前端代码无法访问 process.env.NODE_ENV</p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvcGx1Z2lucy9kZWZpbmUtcGx1Z2lu">解决</span>：使用 Webpack 内置的 DefinePlugin 插件</p></li><li><p>作用：在编译时，将前端代码中匹配的变量名，替换为值或表达式</p></li><li><p>配置 webpack.config.js 中给前端注入环境变量</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token comment">//key 是注入到打包后的前端 JS 代码中作为全局变量</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token comment">//value 是变量对应的值（在 corss-env 注入在 node.js 中的环境变量字符串）</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token string-property property">'process.env.NODE_ENV'</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><h3 id="小结-104"><a class="anchor" href="#小结-104">#</a> 小结</h3><h2 id="14webpack-开发环境调错-source-map"><a class="anchor" href="#14webpack-开发环境调错-source-map">#</a> 14.Webpack 开发环境调错 source map</h2><h3 id="目标-106"><a class="anchor" href="#目标-106">#</a> 目标</h3><p>在开发环境如何精准定位到报错源码位置</p><h3 id="讲解-106"><a class="anchor" href="#讲解-106">#</a> 讲解</h3><ol><li><p><a href="%5Bhttps://webpack.docschina.org/guides/development/#using-source-maps%5D(https://webpack.docschina.org/guides/development/)">source map</a>：可以准确追踪 error 和 warning 在原始代码的位置</p></li><li><p>问题：代码被压缩和混淆，无法正确定位源代码位置（行数和列数）</p></li><li><p>设置：webpack.config.js 配置 devtool 选项</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'inline-source-map'</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>inline-source-map 选项：把源码的位置信息一起打包在 JS 文件内</p></blockquote></li><li><p>注意：source map 适用于开发环境，不要在生产环境使用（防止被轻易查看源码位置）</p></li></ol><h3 id="小结-105"><a class="anchor" href="#小结-105">#</a> 小结</h3><ol><li><p>为何打包后，在控制台无法准确定位到源码的位置信息？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 因为 Webpack 把代码压缩和混淆了 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="15webpack-设置解析别名路径"><a class="anchor" href="#15webpack-设置解析别名路径">#</a> 15.Webpack 设置解析别名路径</h2><h3 id="目标-107"><a class="anchor" href="#目标-107">#</a> 目标</h3><p>设置 Webpack 如何设置路径别名，方便我们引入目标模块</p><h3 id="讲解-107"><a class="anchor" href="#讲解-107">#</a> 讲解</h3><ol><li><p><a href="%5Bhttps://webpack.docschina.org/configuration/resolve#resolvealias%5D(https://webpack.docschina.org/configuration/resolve)">解析别名</a>：配置模块如何解析，创建 import 或 require 的别名，来确保模块引入变得更简单</p></li><li><p>例如：</p><ol><li><p>原来路径如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> checkPhone<span class="token punctuation">,</span> checkCode <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../src/utils/check.js'</span></pre></td></tr></table></figure></li><li><p>配置解析别名：在 webpack.config.js 中设置</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token string-property property">'@'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>这样我们以后，引入目标模块写的路径就更简单了</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> checkPhone<span class="token punctuation">,</span> checkCode <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@/utils/check.js'</span></pre></td></tr></table></figure></li></ol></li><li><p>修改代码的路径后，重新打包观察效果是否正常！</p></li></ol><h3 id="小结-106"><a class="anchor" href="#小结-106">#</a> 小结</h3><ol><li><p>路径中的 '@' 符号代表什么意思？</p><p>&lt;details&gt;<br>&lt;summary&gt; 答案 &lt;/summary&gt;<br>&lt;ul&gt;<br>&lt;li&gt; 看在 webpack 配置中的别名路径是什么，就会在打包时替换成哪个路径使用 &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/details&gt;</p></li></ol><h2 id="16优化-cdn使用"><a class="anchor" href="#16优化-cdn使用">#</a> 16. 优化 - CDN 使用</h2><h3 id="目标-108"><a class="anchor" href="#目标-108">#</a> 目标</h3><p>开发模式使用本地第三方库，生产模式下使用 CDN 加载引入</p><h3 id="讲解-108"><a class="anchor" href="#讲解-108">#</a> 讲解</h3><ol><li><p>需求：开发模式使用本地第三方库，生产模式下使用 CDN 加载引入</p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9HbG9zc2FyeS9DRE4=">CDN</span><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9HbG9zc2FyeS9DRE4="> 定义</span>：内容分发网络，指的是一组分布在各个地区的服务器</p></li><li><p>作用：把静态资源文件 / 第三方库放在 CDN 网络中各个服务器中，供用户就近请求获取</p></li><li><p>好处：减轻自己服务器请求压力，就近请求物理延迟低，配套缓存策略</p><p><img data-src="/img/image-20230518104603049.png" alt="image-20230518104603049"></p></li><li><p>实现需求的思路图：</p><p><img data-src="/img/image-20230518104625088.png" alt="image-20230518104625088"></p></li><li><p>步骤：</p><p>1. 在 html 中引入第三方库的 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYm9vdGNkbi5jbi8=">CDN </span><span class="exturl" data-url="aHR0cHM6Ly93d3cuYm9vdGNkbi5jbi8=">地址</span><span class="exturl" data-url="aHR0cHM6Ly93d3cuYm9vdGNkbi5jbi8="> </span>并用模板语法判断</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre>&lt;% if(htmlWebpackPlugin.options.useCdn)&#123; %></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.2.3/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>&lt;% &#125; %></pre></td></tr></table></figure><p>2. 配置 webpack.config.js 中 <span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvY29uZmlndXJhdGlvbi9leHRlcm5hbHM=">externals</span> 外部扩展选项（防止某些 import 的包被打包）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 生产环境下使用相关配置</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// 外部扩展（让 webpack 防止 import 的包被打包进来）</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  config<span class="token punctuation">.</span>externals <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">//key：import from 语句后面的字符串</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">//value：留在原地的全局变量（最好和 cdn 在全局暴露的变量一致）</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token string-property property">'bootstrap/dist/css/bootstrap.min.css'</span><span class="token operator">:</span> <span class="token string">'bootstrap'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token string-property property">'axios'</span><span class="token operator">:</span> <span class="token string">'axios'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token comment">// 自定义属性，在 html 模板中 &lt;%=htmlWebpackPlugin.options.useCdn%> 访问使用</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token literal-property property">useCdn</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>3. 两种模式下打包观察效果</p></li></ol><h3 id="小结-107"><a class="anchor" href="#小结-107">#</a> 小结</h3><h2 id="17webpack-多页面打包"><a class="anchor" href="#17webpack-多页面打包">#</a> 17.Webpack 多页面打包</h2><h3 id="目标-109"><a class="anchor" href="#目标-109">#</a> 目标</h3><p>让 Webpack 同时打包登录和内容列表页面</p><h3 id="讲解-109"><a class="anchor" href="#讲解-109">#</a> 讲解</h3><ol><li><p>概念：<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9HbG9zc2FyeS9TUEE=">单页面</span>：单个 html 文件，切换 DOM 的方式实现不同业务逻辑展示，后续 Vue/React 会学到</p><p>多页面：多个 html 文件，切换页面实现不同业务逻辑展示</p></li><li><p>需求：把黑马头条 - 数据管理平台 - 内容页面一起引入打包使用</p></li><li><p>步骤：</p><ol><li><p>准备源码（html，css，js）放入相应位置，并改用模块化语法导出</p></li><li><p>下载 form-serialize 包并导入到核心代码中使用</p></li><li><p>配置 webpack.config.js 多入口和多页面的设置</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token string-property property">'模块名1'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/入口1.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token string-property property">'模块名2'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/入口2.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name]/index.js'</span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./public/页面2.html'</span><span class="token punctuation">,</span> <span class="token comment">// 模板文件</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./路径/index.html'</span><span class="token punctuation">,</span> <span class="token comment">// 输出文件</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'模块名2'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./public/页面2.html'</span><span class="token punctuation">,</span> <span class="token comment">// 模板文件</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./路径/index.html'</span><span class="token punctuation">,</span> <span class="token comment">// 输出文件</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'模块名2'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>重新打包观察效果</p></li></ol></li></ol><h3 id="小结-108"><a class="anchor" href="#小结-108">#</a> 小结</h3><h2 id="18案例-发布文章页面打包"><a class="anchor" href="#18案例-发布文章页面打包">#</a> 18. 案例 - 发布文章页面打包</h2><h3 id="目标-110"><a class="anchor" href="#目标-110">#</a> 目标</h3><p>案例 - 发布文章页面打包</p><h3 id="讲解-110"><a class="anchor" href="#讲解-110">#</a> 讲解</h3><ol><li><p>需求：把发布文章页面一起打包</p><p>步骤：</p><p>1. 准备发布文章页面源代码，改写成模块化的导出和导入方式</p><p>2. 修改 webpack.config.js 的配置，增加一个入口和出口</p><p>3. 打包观察效果</p></li></ol><h3 id="小结-109"><a class="anchor" href="#小结-109">#</a> 小结</h3><h2 id="19优化-分割公共代码"><a class="anchor" href="#19优化-分割公共代码">#</a> 19. 优化 - 分割公共代码</h2><h3 id="目标-111"><a class="anchor" href="#目标-111">#</a> 目标</h3><p>优化 - 分割功能代码</p><h3 id="讲解-111"><a class="anchor" href="#讲解-111">#</a> 讲解</h3><ol><li><p>需求：把 2 个以上页面引用的公共代码提取</p><p>步骤：</p><p>1. 配置 webpack.config.js 的 splitChunks 分割功能</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ...</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span> <span class="token comment">// 所有模块动态非动态移入的都分割分析</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 分隔组</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token literal-property property">commons</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 抽取公共模块</span></pre></td></tr><tr><td data-num="10"></td><td><pre>          <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 抽取的 chunk 最小大小字节</span></pre></td></tr><tr><td data-num="11"></td><td><pre>          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 最小引用数</span></pre></td></tr><tr><td data-num="12"></td><td><pre>          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用</span></pre></td></tr><tr><td data-num="13"></td><td><pre>          <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> chunks<span class="token punctuation">,</span> cacheGroupKey</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 分离出模块文件名</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token keyword">const</span> allChunksNames <span class="token operator">=</span> chunks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'~'</span><span class="token punctuation">)</span> <span class="token comment">// 模块名 1~ 模块名 2</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./js/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>allChunksNames<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span> <span class="token comment">// 输出到 dist 目录下位置</span></pre></td></tr><tr><td data-num="16"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>2. 打包观察效果</p></li></ol></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-11-06 19:10:40" itemprop="dateModified" datetime="2023-11-06T19:10:40+08:00">2023-11-06</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="KangKang 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="KangKang 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>kangkang <i class="ic i-at"><em>@</em></i>KangKang</li><li class="link"><strong>本文链接：</strong> <a href="https://blog.0kangkang0.top/2023/11/06/AJAX+Node.js+Webpack/" title="AJAX+Node.js+Webpack">https://blog.0kangkang0.top/2023/11/06/AJAX+Node.js+Webpack/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/09/02/SpringBoot%E8%AE%B2%E4%B9%89/" itemprop="url" rel="prev" data-background-image="&#x2F;img&#x2F;00007-229583667.png" title="springboot2"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>springboot2</h3></a></div><div class="item right"><a href="/2023/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="next" data-background-image="&#x2F;img&#x2F;00000-1736476581.png" title="计算机网络"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>计算机网络</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-ajax%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">一、Ajax 入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%87%AA%E6%B5%8B"><span class="toc-number">1.1.</span> <span class="toc-text">知识点自测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-number">1.2.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="toc-number">1.3.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#01ajax-%E6%A6%82%E5%BF%B5%E5%92%8C-axios-%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">01.AJAX 概念和 axios 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87"><span class="toc-number">1.4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3"><span class="toc-number">1.4.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.4.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02%E8%AE%A4%E8%AF%86-url"><span class="toc-number">1.5.</span> <span class="toc-text">02. 认识 URL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-2"><span class="toc-number">1.5.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-2"><span class="toc-number">1.5.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-2"><span class="toc-number">1.5.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03url-%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0"><span class="toc-number">1.6.</span> <span class="toc-text">03.URL 查询参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-3"><span class="toc-number">1.6.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-3"><span class="toc-number">1.6.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-3"><span class="toc-number">1.6.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04%E6%A1%88%E4%BE%8B-%E6%9F%A5%E8%AF%A2-%E5%9C%B0%E5%8C%BA%E5%88%97%E8%A1%A8"><span class="toc-number">1.7.</span> <span class="toc-text">04. 案例 - 查询 - 地区列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-4"><span class="toc-number">1.7.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-4"><span class="toc-number">1.7.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-4"><span class="toc-number">1.7.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05%E5%B8%B8%E7%94%A8%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E6%8F%90%E4%BA%A4"><span class="toc-number">1.8.</span> <span class="toc-text">05. 常用请求方法和数据提交</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-5"><span class="toc-number">1.8.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-5"><span class="toc-number">1.8.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-5"><span class="toc-number">1.8.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06axios-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">1.9.</span> <span class="toc-text">06.axios 错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-6"><span class="toc-number">1.9.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-6"><span class="toc-number">1.9.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-6"><span class="toc-number">1.9.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07http-%E5%8D%8F%E8%AE%AE-%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">1.10.</span> <span class="toc-text">07.HTTP 协议 - 请求报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-7"><span class="toc-number">1.10.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-7"><span class="toc-number">1.10.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-7"><span class="toc-number">1.10.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#08%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87-%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5"><span class="toc-number">1.11.</span> <span class="toc-text">08. 请求报文 - 错误排查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-8"><span class="toc-number">1.11.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-8"><span class="toc-number">1.11.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-8"><span class="toc-number">1.11.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#09http-%E5%8D%8F%E8%AE%AE-%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">1.12.</span> <span class="toc-text">09.HTTP 协议 - 响应报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-9"><span class="toc-number">1.12.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-9"><span class="toc-number">1.12.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-9"><span class="toc-number">1.12.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3"><span class="toc-number">1.13.</span> <span class="toc-text">10. 接口文档</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-10"><span class="toc-number">1.13.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-10"><span class="toc-number">1.13.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-10"><span class="toc-number">1.13.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E6%A1%88%E4%BE%8B-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E4%B8%BB%E8%A6%81%E4%B8%9A%E5%8A%A1"><span class="toc-number">1.14.</span> <span class="toc-text">11. 案例 - 用户登录 - 主要业务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-11"><span class="toc-number">1.14.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-11"><span class="toc-number">1.14.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-11"><span class="toc-number">1.14.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E6%A1%88%E4%BE%8B-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E6%8F%90%E7%A4%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">1.15.</span> <span class="toc-text">12. 案例 - 用户登录 - 提示信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-12"><span class="toc-number">1.15.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-12"><span class="toc-number">1.15.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-12"><span class="toc-number">1.15.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13form-serialize-%E6%8F%92%E4%BB%B6"><span class="toc-number">1.16.</span> <span class="toc-text">13.form-serialize 插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-13"><span class="toc-number">1.16.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-13"><span class="toc-number">1.16.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-13"><span class="toc-number">1.16.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E6%A1%88%E4%BE%8B-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-form-serialize"><span class="toc-number">1.17.</span> <span class="toc-text">14. 案例 - 用户登录 - form-serialize</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-14"><span class="toc-number">1.17.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-14"><span class="toc-number">1.17.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-14"><span class="toc-number">1.17.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E9%87%8D%E7%82%B9%E5%BF%85%E9%A1%BB%E4%BC%9A"><span class="toc-number">1.18.</span> <span class="toc-text">今日重点 (必须会)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-ajax%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">二、AJAX 综合案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%87%AA%E6%B5%8B-2"><span class="toc-number">2.1.</span> <span class="toc-text">知识点自测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95-2"><span class="toc-number">2.2.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-2"><span class="toc-number">2.3.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#01%E6%A1%88%E4%BE%8B_%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86-%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.4.</span> <span class="toc-text">01. 案例_图书管理 - 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-15"><span class="toc-number">2.4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-15"><span class="toc-number">2.4.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-15"><span class="toc-number">2.4.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02bootstrap-%E5%BC%B9%E6%A1%86_%E5%B1%9E%E6%80%A7%E6%8E%A7%E5%88%B6"><span class="toc-number">2.5.</span> <span class="toc-text">02.Bootstrap 弹框_属性控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-16"><span class="toc-number">2.5.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-16"><span class="toc-number">2.5.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-16"><span class="toc-number">2.5.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03bootstrap-%E5%BC%B9%E6%A1%86_js%E6%8E%A7%E5%88%B6"><span class="toc-number">2.6.</span> <span class="toc-text">03.Bootstrap 弹框_JS 控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-17"><span class="toc-number">2.6.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-17"><span class="toc-number">2.6.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-17"><span class="toc-number">2.6.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04%E6%A1%88%E4%BE%8B_%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86_%E6%B8%B2%E6%9F%93%E5%88%97%E8%A1%A8"><span class="toc-number">2.7.</span> <span class="toc-text">04. 案例_图书管理_渲染列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-18"><span class="toc-number">2.7.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-18"><span class="toc-number">2.7.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-18"><span class="toc-number">2.7.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05%E6%A1%88%E4%BE%8B_%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86_%E6%96%B0%E5%A2%9E%E5%9B%BE%E4%B9%A6"><span class="toc-number">2.8.</span> <span class="toc-text">05. 案例_图书管理_新增图书</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-19"><span class="toc-number">2.8.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-19"><span class="toc-number">2.8.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-19"><span class="toc-number">2.8.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06%E6%A1%88%E4%BE%8B_%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86_%E5%88%A0%E9%99%A4%E5%9B%BE%E4%B9%A6"><span class="toc-number">2.9.</span> <span class="toc-text">06. 案例_图书管理_删除图书</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-20"><span class="toc-number">2.9.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-20"><span class="toc-number">2.9.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-20"><span class="toc-number">2.9.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07-09%E6%A1%88%E4%BE%8B_%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86_%E7%BC%96%E8%BE%91%E5%9B%BE%E4%B9%A6"><span class="toc-number">2.10.</span> <span class="toc-text">07-09. 案例_图书管理_编辑图书</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-21"><span class="toc-number">2.10.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-21"><span class="toc-number">2.10.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-21"><span class="toc-number">2.10.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E6%A1%88%E4%BE%8B_%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86_%E6%80%BB%E7%BB%93"><span class="toc-number">2.11.</span> <span class="toc-text">10. 案例_图书管理_总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-22"><span class="toc-number">2.11.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-22"><span class="toc-number">2.11.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-22"><span class="toc-number">2.11.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.12.</span> <span class="toc-text">11. 图片上传</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-23"><span class="toc-number">2.12.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-23"><span class="toc-number">2.12.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-23"><span class="toc-number">2.12.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E6%A1%88%E4%BE%8B_%E7%BD%91%E7%AB%99-%E6%9B%B4%E6%8D%A2%E8%83%8C%E6%99%AF%E5%9B%BE"><span class="toc-number">2.13.</span> <span class="toc-text">12. 案例_网站 - 更换背景图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-24"><span class="toc-number">2.13.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-24"><span class="toc-number">2.13.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-24"><span class="toc-number">2.13.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E6%A1%88%E4%BE%8B_%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE-%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.14.</span> <span class="toc-text">13. 案例_个人信息设置 - 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-25"><span class="toc-number">2.14.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-25"><span class="toc-number">2.14.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-25"><span class="toc-number">2.14.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E6%A1%88%E4%BE%8B_%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE-%E4%BF%A1%E6%81%AF%E6%B8%B2%E6%9F%93"><span class="toc-number">2.15.</span> <span class="toc-text">14. 案例_个人信息设置 - 信息渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-26"><span class="toc-number">2.15.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-26"><span class="toc-number">2.15.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-26"><span class="toc-number">2.15.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15%E6%A1%88%E4%BE%8B_%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE-%E5%A4%B4%E5%83%8F%E4%BF%AE%E6%94%B9"><span class="toc-number">2.16.</span> <span class="toc-text">15. 案例_个人信息设置 - 头像修改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-27"><span class="toc-number">2.16.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-27"><span class="toc-number">2.16.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-27"><span class="toc-number">2.16.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16%E6%A1%88%E4%BE%8B_%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE-%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9"><span class="toc-number">2.17.</span> <span class="toc-text">16. 案例_个人信息设置 - 信息修改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-28"><span class="toc-number">2.17.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-28"><span class="toc-number">2.17.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-28"><span class="toc-number">2.17.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17%E6%A1%88%E4%BE%8B_%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE-%E6%8F%90%E7%A4%BA%E6%A1%86"><span class="toc-number">2.18.</span> <span class="toc-text">17. 案例_个人信息设置 - 提示框</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-29"><span class="toc-number">2.18.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-29"><span class="toc-number">2.18.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-29"><span class="toc-number">2.18.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E9%87%8D%E7%82%B9%E5%BF%85%E9%A1%BB%E4%BC%9A-2"><span class="toc-number">2.19.</span> <span class="toc-text">今日重点 (必须会)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-ajax%E5%8E%9F%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">三、AJAX 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%87%AA%E6%B5%8B-3"><span class="toc-number">3.1.</span> <span class="toc-text">知识点自测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95-3"><span class="toc-number">3.2.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-3"><span class="toc-number">3.3.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#01xmlhttprequest-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="toc-number">3.4.</span> <span class="toc-text">01.XMLHttpRequest - 基础使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-30"><span class="toc-number">3.4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-30"><span class="toc-number">3.4.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-30"><span class="toc-number">3.4.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02xmlhttprequest-%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0"><span class="toc-number">3.5.</span> <span class="toc-text">02.XMLHttpRequest - 查询参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-31"><span class="toc-number">3.5.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-31"><span class="toc-number">3.5.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-31"><span class="toc-number">3.5.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03%E6%A1%88%E4%BE%8B-%E5%9C%B0%E5%8C%BA%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.6.</span> <span class="toc-text">03. 案例 - 地区查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-32"><span class="toc-number">3.6.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-32"><span class="toc-number">3.6.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-32"><span class="toc-number">3.6.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04xmlhttprequest-%E6%95%B0%E6%8D%AE%E6%8F%90%E4%BA%A4"><span class="toc-number">3.7.</span> <span class="toc-text">04.XMLHttpRequest - 数据提交</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-33"><span class="toc-number">3.7.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-33"><span class="toc-number">3.7.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-33"><span class="toc-number">3.7.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05%E8%AE%A4%E8%AF%86_promise"><span class="toc-number">3.8.</span> <span class="toc-text">05. 认识_Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-34"><span class="toc-number">3.8.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-34"><span class="toc-number">3.8.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-34"><span class="toc-number">3.8.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06%E8%AE%A4%E8%AF%86_promise-%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-number">3.9.</span> <span class="toc-text">06. 认识_Promise 的状态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-35"><span class="toc-number">3.9.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-35"><span class="toc-number">3.9.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-35"><span class="toc-number">3.9.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07%E4%BD%BF%E7%94%A8-promise-%E5%92%8C-xhr_%E8%8E%B7%E5%8F%96%E7%9C%81%E4%BB%BD%E5%88%97%E8%A1%A8"><span class="toc-number">3.10.</span> <span class="toc-text">07. 使用 Promise 和 XHR_获取省份列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-36"><span class="toc-number">3.10.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-36"><span class="toc-number">3.10.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-36"><span class="toc-number">3.10.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#08%E5%B0%81%E8%A3%85_%E7%AE%80%E6%98%93axios-%E8%8E%B7%E5%8F%96%E7%9C%81%E4%BB%BD%E5%88%97%E8%A1%A8"><span class="toc-number">3.11.</span> <span class="toc-text">08. 封装_简易 axios - 获取省份列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-37"><span class="toc-number">3.11.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-37"><span class="toc-number">3.11.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-37"><span class="toc-number">3.11.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#09%E5%B0%81%E8%A3%85_%E7%AE%80%E6%98%93axios-%E8%8E%B7%E5%8F%96%E5%9C%B0%E5%8C%BA%E5%88%97%E8%A1%A8"><span class="toc-number">3.12.</span> <span class="toc-text">09. 封装_简易 axios - 获取地区列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-38"><span class="toc-number">3.12.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-38"><span class="toc-number">3.12.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-38"><span class="toc-number">3.12.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E5%B0%81%E8%A3%85_%E7%AE%80%E6%98%93axios-%E6%B3%A8%E5%86%8C%E7%94%A8%E6%88%B7"><span class="toc-number">3.13.</span> <span class="toc-text">10. 封装_简易 axios - 注册用户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-39"><span class="toc-number">3.13.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-39"><span class="toc-number">3.13.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-39"><span class="toc-number">3.13.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-12%E6%A1%88%E4%BE%8B_%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5-%E9%BB%98%E8%AE%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">3.14.</span> <span class="toc-text">11-12. 案例_天气预报 - 默认数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-40"><span class="toc-number">3.14.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-40"><span class="toc-number">3.14.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-40"><span class="toc-number">3.14.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E6%A1%88%E4%BE%8B_%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5-%E6%90%9C%E7%B4%A2%E5%9F%8E%E5%B8%82%E5%88%97%E8%A1%A8"><span class="toc-number">3.15.</span> <span class="toc-text">13. 案例_天气预报 - 搜索城市列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-41"><span class="toc-number">3.15.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-41"><span class="toc-number">3.15.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-41"><span class="toc-number">3.15.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E6%A1%88%E4%BE%8B_%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5-%E5%B1%95%E7%A4%BA%E5%9F%8E%E5%B8%82%E5%A4%A9%E6%B0%94"><span class="toc-number">3.16.</span> <span class="toc-text">14. 案例_天气预报 - 展示城市天气</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-42"><span class="toc-number">3.16.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-42"><span class="toc-number">3.16.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-42"><span class="toc-number">3.16.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E9%87%8D%E7%82%B9%E5%BF%85%E9%A1%BB%E4%BC%9A-3"><span class="toc-number">3.17.</span> <span class="toc-text">今日重点 (必须会)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-ajax%E8%BF%9B%E9%98%B6"><span class="toc-number">4.</span> <span class="toc-text">四、AJAX 进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%87%AA%E6%B5%8B-4"><span class="toc-number">4.1.</span> <span class="toc-text">知识点自测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95-4"><span class="toc-number">4.2.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-4"><span class="toc-number">4.3.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#01%E5%90%8C%E6%AD%A5%E4%BB%A3%E7%A0%81%E5%92%8C%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81"><span class="toc-number">4.4.</span> <span class="toc-text">01. 同步代码和异步代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-43"><span class="toc-number">4.4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-43"><span class="toc-number">4.4.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-43"><span class="toc-number">4.4.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E5%9C%B0%E7%8B%B1"><span class="toc-number">4.5.</span> <span class="toc-text">02. 回调函数地狱</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-44"><span class="toc-number">4.5.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-44"><span class="toc-number">4.5.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-44"><span class="toc-number">4.5.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03promise-%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8"><span class="toc-number">4.6.</span> <span class="toc-text">03.Promise - 链式调用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-45"><span class="toc-number">4.6.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-45"><span class="toc-number">4.6.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-45"><span class="toc-number">4.6.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04promise-%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8_%E8%A7%A3%E5%86%B3%E5%9B%9E%E8%B0%83%E5%9C%B0%E7%8B%B1"><span class="toc-number">4.7.</span> <span class="toc-text">04.Promise - 链式调用_解决回调地狱</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-46"><span class="toc-number">4.7.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-46"><span class="toc-number">4.7.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-46"><span class="toc-number">4.7.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05async-%E5%87%BD%E6%95%B0%E5%92%8C-await"><span class="toc-number">4.8.</span> <span class="toc-text">05.async 函数和 await</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-47"><span class="toc-number">4.8.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-47"><span class="toc-number">4.8.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-47"><span class="toc-number">4.8.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06async-%E5%87%BD%E6%95%B0%E5%92%8C-await-%E6%8D%95%E8%8E%B7%E9%94%99%E8%AF%AF"><span class="toc-number">4.9.</span> <span class="toc-text">06.async 函数和 await 捕获错误</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-48"><span class="toc-number">4.9.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-48"><span class="toc-number">4.9.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-48"><span class="toc-number">4.9.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">4.10.</span> <span class="toc-text">07. 事件循环</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-49"><span class="toc-number">4.10.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-49"><span class="toc-number">4.10.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-49"><span class="toc-number">4.10.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#08%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF-%E7%BB%83%E4%B9%A0"><span class="toc-number">4.11.</span> <span class="toc-text">08. 事件循环 - 练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-50"><span class="toc-number">4.11.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-50"><span class="toc-number">4.11.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-50"><span class="toc-number">4.11.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#09%E5%AE%8F%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%BE%AE%E4%BB%BB%E5%8A%A1"><span class="toc-number">4.12.</span> <span class="toc-text">09. 宏任务与微任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-51"><span class="toc-number">4.12.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-51"><span class="toc-number">4.12.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-51"><span class="toc-number">4.12.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF-%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">4.13.</span> <span class="toc-text">10. 事件循环 - 经典面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-52"><span class="toc-number">4.13.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-52"><span class="toc-number">4.13.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-52"><span class="toc-number">4.13.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11promiseall-%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-number">4.14.</span> <span class="toc-text">11.Promise.all 静态方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-53"><span class="toc-number">4.14.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-53"><span class="toc-number">4.14.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-53"><span class="toc-number">4.14.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E6%A1%88%E4%BE%8B-%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB"><span class="toc-number">4.15.</span> <span class="toc-text">12. 案例 - 商品分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-54"><span class="toc-number">4.15.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-54"><span class="toc-number">4.15.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-54"><span class="toc-number">4.15.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E6%A1%88%E4%BE%8B-%E5%AD%A6%E4%B9%A0%E5%8F%8D%E9%A6%88-%E7%9C%81%E5%B8%82%E5%8C%BA%E5%88%87%E6%8D%A2"><span class="toc-number">4.16.</span> <span class="toc-text">13. 案例 - 学习反馈 - 省市区切换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-55"><span class="toc-number">4.16.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-55"><span class="toc-number">4.16.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-55"><span class="toc-number">4.16.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E6%A1%88%E4%BE%8B-%E5%AD%A6%E4%B9%A0%E5%8F%8D%E9%A6%88-%E6%95%B0%E6%8D%AE%E6%8F%90%E4%BA%A4"><span class="toc-number">4.17.</span> <span class="toc-text">14. 案例 - 学习反馈 - 数据提交</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-56"><span class="toc-number">4.17.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-56"><span class="toc-number">4.17.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-56"><span class="toc-number">4.17.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E9%87%8D%E7%82%B9%E5%BF%85%E9%A1%BB%E4%BC%9A-4"><span class="toc-number">4.18.</span> <span class="toc-text">今日重点 (必须会)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94-%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1-%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0"><span class="toc-number">5.</span> <span class="toc-text">五、黑马头条 - 数据管理平台</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#01%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D"><span class="toc-number">5.1.</span> <span class="toc-text">01. 项目介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-57"><span class="toc-number">5.1.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-57"><span class="toc-number">5.1.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-57"><span class="toc-number">5.1.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02%E9%A1%B9%E7%9B%AE%E5%87%86%E5%A4%87"><span class="toc-number">5.2.</span> <span class="toc-text">02. 项目准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-58"><span class="toc-number">5.2.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-58"><span class="toc-number">5.2.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-58"><span class="toc-number">5.2.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03%E9%AA%8C%E8%AF%81%E7%A0%81%E7%99%BB%E5%BD%95"><span class="toc-number">5.3.</span> <span class="toc-text">03. 验证码登录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-59"><span class="toc-number">5.3.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-59"><span class="toc-number">5.3.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-59"><span class="toc-number">5.3.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04%E9%AA%8C%E8%AF%81%E7%A0%81%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B"><span class="toc-number">5.4.</span> <span class="toc-text">04. 验证码登录流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-60"><span class="toc-number">5.4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-60"><span class="toc-number">5.4.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-60"><span class="toc-number">5.4.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05token-%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">5.5.</span> <span class="toc-text">05.token 的介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-61"><span class="toc-number">5.5.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-61"><span class="toc-number">5.5.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-61"><span class="toc-number">5.5.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE%E5%92%8C-axios-%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">5.6.</span> <span class="toc-text">06. 个人信息设置和 axios 请求拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-62"><span class="toc-number">5.6.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-62"><span class="toc-number">5.6.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-62"><span class="toc-number">5.6.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07-axios-%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8%E5%92%8C%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5"><span class="toc-number">5.7.</span> <span class="toc-text">07. axios 响应拦截器和身份验证失败</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-63"><span class="toc-number">5.7.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-63"><span class="toc-number">5.7.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-63"><span class="toc-number">5.7.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#08%E4%BC%98%E5%8C%96-axios-%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%9C"><span class="toc-number">5.8.</span> <span class="toc-text">08. 优化 axios 响应结果</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-64"><span class="toc-number">5.8.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-64"><span class="toc-number">5.8.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-64"><span class="toc-number">5.8.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#09%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0-%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">5.9.</span> <span class="toc-text">09. 发布文章 - 富文本编辑器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-65"><span class="toc-number">5.9.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-65"><span class="toc-number">5.9.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-65"><span class="toc-number">5.9.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0-%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8"><span class="toc-number">5.10.</span> <span class="toc-text">10. 发布文章 - 频道列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-66"><span class="toc-number">5.10.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-66"><span class="toc-number">5.10.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-66"><span class="toc-number">5.10.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0-%E5%B0%81%E9%9D%A2%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.11.</span> <span class="toc-text">11. 发布文章 - 封面设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-67"><span class="toc-number">5.11.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-67"><span class="toc-number">5.11.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-67"><span class="toc-number">5.11.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0-%E6%94%B6%E9%9B%86%E5%B9%B6%E4%BF%9D%E5%AD%98"><span class="toc-number">5.12.</span> <span class="toc-text">12. 发布文章 - 收集并保存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-68"><span class="toc-number">5.12.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-68"><span class="toc-number">5.12.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-68"><span class="toc-number">5.12.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA"><span class="toc-number">5.13.</span> <span class="toc-text">13. 内容管理 - 文章列表展示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-69"><span class="toc-number">5.13.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-69"><span class="toc-number">5.13.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-69"><span class="toc-number">5.13.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-%E7%AD%9B%E9%80%89%E5%8A%9F%E8%83%BD"><span class="toc-number">5.14.</span> <span class="toc-text">14. 内容管理 - 筛选功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-70"><span class="toc-number">5.14.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-70"><span class="toc-number">5.14.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-70"><span class="toc-number">5.14.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD"><span class="toc-number">5.15.</span> <span class="toc-text">15. 内容管理 - 分页功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-71"><span class="toc-number">5.15.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-71"><span class="toc-number">5.15.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-71"><span class="toc-number">5.15.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">5.16.</span> <span class="toc-text">16. 内容管理 - 删除功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-72"><span class="toc-number">5.16.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-72"><span class="toc-number">5.16.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-72"><span class="toc-number">5.16.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-%E5%88%A0%E9%99%A4%E6%9C%80%E5%90%8E%E4%B8%80%E6%9D%A1"><span class="toc-number">5.17.</span> <span class="toc-text">17. 内容管理 - 删除最后一条</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-73"><span class="toc-number">5.17.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-73"><span class="toc-number">5.17.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-73"><span class="toc-number">5.17.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-%E7%BC%96%E8%BE%91%E6%96%87%E7%AB%A0-%E5%9B%9E%E6%98%BE"><span class="toc-number">5.18.</span> <span class="toc-text">18. 内容管理 - 编辑文章 - 回显</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-74"><span class="toc-number">5.18.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-74"><span class="toc-number">5.18.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-74"><span class="toc-number">5.18.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-%E7%BC%96%E8%BE%91%E6%96%87%E7%AB%A0-%E4%BF%9D%E5%AD%98"><span class="toc-number">5.19.</span> <span class="toc-text">19. 内容管理 - 编辑文章 - 保存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-75"><span class="toc-number">5.19.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-75"><span class="toc-number">5.19.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-75"><span class="toc-number">5.19.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95"><span class="toc-number">5.20.</span> <span class="toc-text">20. 退出登录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-76"><span class="toc-number">5.20.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-76"><span class="toc-number">5.20.2.</span> <span class="toc-text">讲解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD-nodejs%E5%85%A5%E9%97%A8"><span class="toc-number">6.</span> <span class="toc-text">六、Node.js 入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%87%AA%E6%B5%8B-5"><span class="toc-number">6.1.</span> <span class="toc-text">知识点自测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E5%89%8D%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">提前安装软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#01%E4%BB%80%E4%B9%88%E6%98%AF-nodejs"><span class="toc-number">6.3.</span> <span class="toc-text">01. 什么是 Node.js</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-77"><span class="toc-number">6.3.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-77"><span class="toc-number">6.3.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-76"><span class="toc-number">6.3.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02fs%E6%A8%A1%E5%9D%97-%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6"><span class="toc-number">6.4.</span> <span class="toc-text">02.fs 模块 - 读写文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-78"><span class="toc-number">6.4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-78"><span class="toc-number">6.4.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-77"><span class="toc-number">6.4.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03path%E6%A8%A1%E5%9D%97-%E8%B7%AF%E5%BE%84%E5%A4%84%E7%90%86"><span class="toc-number">6.5.</span> <span class="toc-text">03.path 模块 - 路径处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-79"><span class="toc-number">6.5.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-79"><span class="toc-number">6.5.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-78"><span class="toc-number">6.5.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04%E6%A1%88%E4%BE%8B-%E5%8E%8B%E7%BC%A9%E5%89%8D%E7%AB%AFhtml"><span class="toc-number">6.6.</span> <span class="toc-text">04. 案例 - 压缩前端 html</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-80"><span class="toc-number">6.6.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-80"><span class="toc-number">6.6.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-79"><span class="toc-number">6.6.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05%E8%AE%A4%E8%AF%86url%E4%B8%AD%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">6.7.</span> <span class="toc-text">05. 认识 URL 中的端口号</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-81"><span class="toc-number">6.7.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-81"><span class="toc-number">6.7.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-80"><span class="toc-number">6.7.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06http%E6%A8%A1%E5%9D%97-%E5%88%9B%E5%BB%BAweb%E6%9C%8D%E5%8A%A1"><span class="toc-number">6.8.</span> <span class="toc-text">06.http 模块 - 创建 Web 服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-82"><span class="toc-number">6.8.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-82"><span class="toc-number">6.8.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-81"><span class="toc-number">6.8.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07%E6%A1%88%E4%BE%8B-%E6%B5%8F%E8%A7%88%E6%97%B6%E9%92%9F"><span class="toc-number">6.9.</span> <span class="toc-text">07. 案例 - 浏览时钟</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-83"><span class="toc-number">6.9.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-83"><span class="toc-number">6.9.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-82"><span class="toc-number">6.9.3.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83-nodejs%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">七、Node.js 模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%87%AA%E6%B5%8B-6"><span class="toc-number">7.1.</span> <span class="toc-text">知识点自测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#01%E6%A8%A1%E5%9D%97%E5%8C%96%E7%AE%80%E4%BB%8B"><span class="toc-number">7.2.</span> <span class="toc-text">01. 模块化简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-84"><span class="toc-number">7.2.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-84"><span class="toc-number">7.2.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-83"><span class="toc-number">7.2.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02ecmascript%E6%A0%87%E5%87%86-%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA%E5%92%8C%E5%AF%BC%E5%85%A5"><span class="toc-number">7.3.</span> <span class="toc-text">02.ECMAScript 标准 - 默认导出和导入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-85"><span class="toc-number">7.3.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-85"><span class="toc-number">7.3.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-84"><span class="toc-number">7.3.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03ecmascript%E6%A0%87%E5%87%86-%E5%91%BD%E5%90%8D%E5%AF%BC%E5%87%BA%E5%92%8C%E5%AF%BC%E5%85%A5"><span class="toc-number">7.4.</span> <span class="toc-text">03.ECMAScript 标准 - 命名导出和导入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-86"><span class="toc-number">7.4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-86"><span class="toc-number">7.4.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-85"><span class="toc-number">7.4.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04%E5%8C%85%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">7.5.</span> <span class="toc-text">04. 包的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-87"><span class="toc-number">7.5.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-87"><span class="toc-number">7.5.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-86"><span class="toc-number">7.5.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05npm%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">7.6.</span> <span class="toc-text">05.npm 软件包管理器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-88"><span class="toc-number">7.6.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-88"><span class="toc-number">7.6.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-87"><span class="toc-number">7.6.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06npm%E5%AE%89%E8%A3%85%E6%89%80%E6%9C%89%E4%BE%9D%E8%B5%96"><span class="toc-number">7.7.</span> <span class="toc-text">06.npm 安装所有依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-89"><span class="toc-number">7.7.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-89"><span class="toc-number">7.7.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-88"><span class="toc-number">7.7.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07npm%E5%85%A8%E5%B1%80%E8%BD%AF%E4%BB%B6%E5%8C%85-nodemon"><span class="toc-number">7.8.</span> <span class="toc-text">07.npm 全局软件包 - nodemon</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-90"><span class="toc-number">7.8.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-90"><span class="toc-number">7.8.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-89"><span class="toc-number">7.8.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#08nodejs%E6%A6%82%E5%BF%B5%E5%92%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93"><span class="toc-number">7.9.</span> <span class="toc-text">08.Node.js 概念和常用命令总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-91"><span class="toc-number">7.9.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-91"><span class="toc-number">7.9.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-90"><span class="toc-number">7.9.3.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB-webpack%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7"><span class="toc-number">8.</span> <span class="toc-text">八、Webpack 模块打包工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%87%AA%E6%B5%8B-7"><span class="toc-number">8.1.</span> <span class="toc-text">知识点自测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#01webpack-%E7%AE%80%E4%BB%8B%E4%BB%A5%E5%8F%8A%E4%BD%93%E9%AA%8C"><span class="toc-number">8.2.</span> <span class="toc-text">01.Webpack 简介以及体验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-92"><span class="toc-number">8.2.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-92"><span class="toc-number">8.2.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-91"><span class="toc-number">8.2.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02webpack-%E4%BF%AE%E6%94%B9%E5%85%A5%E5%8F%A3%E5%92%8C%E5%87%BA%E5%8F%A3"><span class="toc-number">8.3.</span> <span class="toc-text">02.Webpack 修改入口和出口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-93"><span class="toc-number">8.3.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-93"><span class="toc-number">8.3.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-92"><span class="toc-number">8.3.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03%E6%A1%88%E4%BE%8B-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E9%95%BF%E5%BA%A6%E5%88%A4%E6%96%AD"><span class="toc-number">8.4.</span> <span class="toc-text">03. 案例 - 用户登录 - 长度判断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-94"><span class="toc-number">8.4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-94"><span class="toc-number">8.4.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-93"><span class="toc-number">8.4.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04webpack-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90-html-%E6%96%87%E4%BB%B6"><span class="toc-number">8.5.</span> <span class="toc-text">04.Webpack 自动生成 html 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-95"><span class="toc-number">8.5.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-95"><span class="toc-number">8.5.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-94"><span class="toc-number">8.5.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05webpack-%E6%89%93%E5%8C%85-css-%E4%BB%A3%E7%A0%81"><span class="toc-number">8.6.</span> <span class="toc-text">05.Webpack - 打包 css 代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-96"><span class="toc-number">8.6.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-96"><span class="toc-number">8.6.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-95"><span class="toc-number">8.6.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#06%E4%BC%98%E5%8C%96-%E6%8F%90%E5%8F%96-css-%E4%BB%A3%E7%A0%81"><span class="toc-number">8.7.</span> <span class="toc-text">06. 优化 - 提取 css 代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-97"><span class="toc-number">8.7.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-97"><span class="toc-number">8.7.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-96"><span class="toc-number">8.7.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07%E4%BC%98%E5%8C%96%E5%8E%8B%E7%BC%A9%E8%BF%87%E7%A8%8B"><span class="toc-number">8.8.</span> <span class="toc-text">07. 优化压缩过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-98"><span class="toc-number">8.8.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-98"><span class="toc-number">8.8.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-97"><span class="toc-number">8.8.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#08webpack-%E6%89%93%E5%8C%85-less-%E4%BB%A3%E7%A0%81"><span class="toc-number">8.9.</span> <span class="toc-text">08.Webpack - 打包 less 代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-99"><span class="toc-number">8.9.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-99"><span class="toc-number">8.9.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-98"><span class="toc-number">8.9.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#09webpack-%E6%89%93%E5%8C%85%E5%9B%BE%E7%89%87"><span class="toc-number">8.10.</span> <span class="toc-text">09.Webpack - 打包图片</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-100"><span class="toc-number">8.10.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-100"><span class="toc-number">8.10.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-99"><span class="toc-number">8.10.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E6%A1%88%E4%BE%8B-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E5%AE%8C%E6%88%90%E5%8A%9F%E8%83%BD"><span class="toc-number">8.11.</span> <span class="toc-text">10. 案例 - 用户登录 - 完成功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-101"><span class="toc-number">8.11.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-101"><span class="toc-number">8.11.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-100"><span class="toc-number">8.11.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10webpack-%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">8.12.</span> <span class="toc-text">10.Webpack 搭建开发环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-102"><span class="toc-number">8.12.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-102"><span class="toc-number">8.12.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-101"><span class="toc-number">8.12.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11webpack-%E6%89%93%E5%8C%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">8.13.</span> <span class="toc-text">11.Webpack 打包模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-103"><span class="toc-number">8.13.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-103"><span class="toc-number">8.13.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-102"><span class="toc-number">8.13.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12webpack-%E6%89%93%E5%8C%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">8.14.</span> <span class="toc-text">12.Webpack 打包模式的应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-104"><span class="toc-number">8.14.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-104"><span class="toc-number">8.14.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-103"><span class="toc-number">8.14.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13webpack-%E5%89%8D%E7%AB%AF%E6%B3%A8%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">8.15.</span> <span class="toc-text">13.Webpack 前端注入环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-105"><span class="toc-number">8.15.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-105"><span class="toc-number">8.15.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-104"><span class="toc-number">8.15.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14webpack-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%B0%83%E9%94%99-source-map"><span class="toc-number">8.16.</span> <span class="toc-text">14.Webpack 开发环境调错 source map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-106"><span class="toc-number">8.16.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-106"><span class="toc-number">8.16.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-105"><span class="toc-number">8.16.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15webpack-%E8%AE%BE%E7%BD%AE%E8%A7%A3%E6%9E%90%E5%88%AB%E5%90%8D%E8%B7%AF%E5%BE%84"><span class="toc-number">8.17.</span> <span class="toc-text">15.Webpack 设置解析别名路径</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-107"><span class="toc-number">8.17.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-107"><span class="toc-number">8.17.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-106"><span class="toc-number">8.17.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16%E4%BC%98%E5%8C%96-cdn%E4%BD%BF%E7%94%A8"><span class="toc-number">8.18.</span> <span class="toc-text">16. 优化 - CDN 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-108"><span class="toc-number">8.18.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-108"><span class="toc-number">8.18.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-107"><span class="toc-number">8.18.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17webpack-%E5%A4%9A%E9%A1%B5%E9%9D%A2%E6%89%93%E5%8C%85"><span class="toc-number">8.19.</span> <span class="toc-text">17.Webpack 多页面打包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-109"><span class="toc-number">8.19.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-109"><span class="toc-number">8.19.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-108"><span class="toc-number">8.19.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18%E6%A1%88%E4%BE%8B-%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0%E9%A1%B5%E9%9D%A2%E6%89%93%E5%8C%85"><span class="toc-number">8.20.</span> <span class="toc-text">18. 案例 - 发布文章页面打包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-110"><span class="toc-number">8.20.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-110"><span class="toc-number">8.20.2.</span> <span class="toc-text">讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-109"><span class="toc-number">8.20.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19%E4%BC%98%E5%8C%96-%E5%88%86%E5%89%B2%E5%85%AC%E5%85%B1%E4%BB%A3%E7%A0%81"><span class="toc-number">8.21.</span> <span class="toc-text">19. 优化 - 分割公共代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-111"><span class="toc-number">8.21.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E8%A7%A3-111"><span class="toc-number">8.21.2.</span> <span class="toc-text">讲解</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="KangKang" data-src="/images/avatar.jpg"><p class="name" itemprop="name">KangKang</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">12</span> <span class="name">文章</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tLzBrYW5na2FuZzA=" title="https:&#x2F;&#x2F;github.com&#x2F;0kangkang0"><i class="ic i-github"></i></span> <span class="exturl item csdn" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE1MTY2NjU1" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_15166655"><i class="ic i-csdn"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9rYW5na2FuZy02OC0xOC04OQ==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;kangkang-68-18-89"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTE2MjE4MTczMjA=" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;1621817320"><i class="ic i-cloud-music"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/09/02/SpringBoot%E8%AE%B2%E4%B9%89/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/11/spring%E9%AB%98%E7%BA%A7/" title="spring高级">spring高级</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/11/06/AJAX+Node.js+Webpack/" title="AJAX+Node.js+Webpack">AJAX+Node.js+Webpack</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/01/01/Linux/" title="Linux">Linux</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/11/hello-world/" title="Hello World">Hello World</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/12/25/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/" title="软件测试基本原理与实践">软件测试基本原理与实践</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/23/SSM%E6%A1%86%E6%9E%B6/" title="SSM框架">SSM框架</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="计算机网络">计算机网络</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/09/02/SpringBoot%E8%AE%B2%E4%B9%89/" title="springboot2">springboot2</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/12/Java/" title="Java">Java</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/12/10/UML%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%88%86%E6%9E%90%E3%80%81%E5%BB%BA%E6%A8%A1%E4%B8%8E%E8%AE%BE%E8%AE%A1/" title="UML面向对象分析、建模与设计">UML面向对象分析、建模与设计</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2023 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">KangKang @ kangkang</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div><div class="beian"><a href="https://beian.miit.gov.cn/" target="_blank">闽ICP备2023012662号</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/11/06/AJAX+Node.js+Webpack/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="/js/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->