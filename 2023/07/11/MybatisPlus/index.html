<!-- build time:Mon Jan 01 2024 14:37:46 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="KangKang" href="https://blog.0kangkang0.top/rss.xml"><link rel="alternate" type="application/atom+xml" title="KangKang" href="https://blog.0kangkang0.top/atom.xml"><link rel="alternate" type="application/json" title="KangKang" href="https://blog.0kangkang0.top/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://blog.0kangkang0.top/2023/07/11/MybatisPlus/"><title>MybatisPlus | kangkang = KangKang</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">MybatisPlus</h1><div class="meta"><span class="item" title="创建时间：2023-07-11 22:18:29"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-07-11T22:18:29+08:00">2023-07-11</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>79k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>1:11</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">kangkang</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="/img/bb285cb6aca898fd1c501b6bed9a7578.png"></div><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div></header><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.0kangkang0.top/2023/07/11/MybatisPlus/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="KangKang"><meta itemprop="description" content=", "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="KangKang"></span><div class="body md" itemprop="articleBody"><h2 id="1-了解mybatis-plus"><a class="anchor" href="#1-了解mybatis-plus">#</a> 1、了解 Mybatis-Plus</h2><h3 id="11-mybatis-plus介绍"><a class="anchor" href="#11-mybatis-plus介绍">#</a> 1.1、Mybatis-Plus 介绍</h3><p>MyBatis-Plus（简称 MP）是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高 效率而生。<br>官网：<span class="exturl" data-url="aHR0cHM6Ly9teWJhdGlzLnBsdXMv">https://mybatis.plus/</span> 或 <span class="exturl" data-url="aHR0cHM6Ly9tcC5iYW9taWRvdS5jb20v">https://mp.baomidou.com/</span></p><p><img data-src="/img/mybatis_plus_001.png" alt=""></p><blockquote><p>愿景 我们的愿景是成为 MyBatis 最好的搭档，就像 魂斗罗 中的 1P、2P，基友搭配，效率翻倍。</p></blockquote><p><img data-src="/img/mybatis_plus_002.png" alt=""></p><h3 id="12-代码以及文档"><a class="anchor" href="#12-代码以及文档">#</a> 1.2、代码以及文档</h3><p>文档地址：<span class="exturl" data-url="aHR0cHM6Ly9teWJhdGlzLnBsdXMvZ3VpZGUv">https://mybatis.plus/guide/</span><br>源码地址：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Jhb21pZG91L215YmF0aXMtcGx1cw==">https://github.com/baomidou/mybatis-plus</span></p><h3 id="13-特性"><a class="anchor" href="#13-特性">#</a> 1.3、特性</h3><ul><li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li><li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li><li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作， 更有强大的条件构造器，满足各类使用需求</li><li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li><li><strong>支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、 SQLServer2005、SQLServer 等多种数据库 支持主键自动生成：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解 决主键问题</li><li><strong>支持 XML 热加载</strong>：Mapper 对应的 XML 支持热加载，对于简单的 CRUD 操作，甚至可以无 XML 启动</li><li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操 作</li><li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ） 支持关键词自动转义：支持数据库关键词（order、key......）自动转义，还可自定义关键词</li><li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码， 支持模板引擎，更有超多自定义配置等您来使用</li><li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li><li><strong>内置性能分析插件</strong>：可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li><li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li><li><strong>内置 Sql 注入剥离器</strong>：支持 Sql 注入剥离，有效预防 Sql 注入攻击</li></ul><h3 id="14-架构"><a class="anchor" href="#14-架构">#</a> 1.4、架构</h3><p><img data-src="/img/mybatis_plus_003.png" alt=""></p><h3 id="15-作者"><a class="anchor" href="#15-作者">#</a> 1.5、作者</h3><p>Mybatis-Plus 是由 baomidou（苞米豆）组织开发并且开源的，目前该组织大概有 30 人左右。<br>码云地址：<a href="/https://gitee.com/organizations/baomidou">https://gitee.com/organizations/baomidou</a></p><p><img data-src="/img/mybatis_plus_004.png" alt=""></p><h2 id="2-快速开始"><a class="anchor" href="#2-快速开始">#</a> 2、快速开始</h2><p>对于 Mybatis 整合 MP 有常常有三种用法，分别是 Mybatis+MP、Spring+Mybatis+MP、Spring Boot+Mybatis+MP。</p><h3 id="21-创建数据库以及表"><a class="anchor" href="#21-创建数据库以及表">#</a> 2.1、创建数据库以及表</h3><p><img data-src="/img/mybatis_plus_005.png" alt=""></p><pre><code class="language-sql">-- 创建测试表  
CREATE TABLE `tb_user`  
(  
    `id`        bigint(20)  NOT NULL AUTO_INCREMENT COMMENT '主键ID',  
    `user_name` varchar(20) NOT NULL COMMENT '用户名',  
    `password`  varchar(20) NOT NULL COMMENT '密码',  
    `name`      varchar(30) DEFAULT NULL COMMENT '姓名',  
    `age`       int(11)     DEFAULT NULL COMMENT '年龄',  
    `email`     varchar(50) DEFAULT NULL COMMENT '邮箱',  
    PRIMARY KEY (`id`)  
) ENGINE = InnoDB  
  AUTO_INCREMENT = 1  
  DEFAULT CHARSET = utf8;  
-- 插入测试数据  
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`)  
VALUES ('1', 'zhangsan', '123456', '张三', '18', 'test1@itcast.cn');  
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`)  
VALUES ('2', 'lisi', '123456', '李四', '20', 'test2@itcast.cn');  
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`)  
VALUES ('3', 'wangwu', '123456', '王五', '28', 'test3@itcast.cn');  
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`)  
VALUES ('4', 'zhaoliu', '123456', '赵六', '21', 'test4@itcast.cn');  
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`)  
VALUES ('5', 'sunqi', '123456', '孙七', '24', 'test5@itcast.cn');
</code></pre><h3 id="22-创建工程"><a class="anchor" href="#22-创建工程">#</a> 2.2、创建工程</h3><p><img data-src="/img/mybatis_plus_006.png" alt=""></p><p>导入依赖：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0  </span></pre></td></tr><tr><td data-num="5"></td><td><pre>http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.itcast.mp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mybatis-plus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">></span></span>itcast-mybatis-plus-simple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- mybatis-plus 插件依赖 --></span>  </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- MySql --></span>  </pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 连接池 --></span>  </pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 简化 bean 代码的工具包 --></span>  </pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.18.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="37"></td><td><pre>	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="42"></td><td><pre>	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="48"></td><td><pre>	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="49"></td><td><pre>		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>                </pre></td></tr><tr><td data-num="50"></td><td><pre>			    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="51"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="52"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>                    </pre></td></tr><tr><td data-num="53"></td><td><pre>	                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="54"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="55"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="56"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="23-mybatis-mp"><a class="anchor" href="#23-mybatis-mp">#</a> 2.3、Mybatis + MP</h3><p>下面演示，通过纯 Mybatis 与 Mybatis-Plus 整合。</p><p>2.3.1、创建子 Module</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0  </span></pre></td></tr><tr><td data-num="5"></td><td><pre>         http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="7"></td><td><pre>	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mybatis-plus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.itcast.mp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">></span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mybatis-plus-simple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>log4j.properties：</p><pre><code class="language-properties">log4j.rootLogger=DEBUG,A1  
log4j.appender.A1=org.apache.log4j.ConsoleAppender  
log4j.appender.A1.layout=org.apache.log4j.PatternLayout  
log4j.appender.A1.layout.ConversionPattern=[%t] [%c]-[%p] %m%n
</code></pre><p>2.3.2、Mybatis 实现查询 User</p><blockquote><p>第一步，编写 mybatis-config.xml 文件：</p></blockquote><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="11"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="12"></td><td><pre>                          <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>autoReconnect=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>allowMultiQueries=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useSSL=false<span class="token punctuation">"</span></span><span class="token punctuation">/></span>  </pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="14"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="19"></td><td><pre>	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UserMapper.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><blockquote><p>第二步，编写 User 实体对象：（这里使用 lombok 进行了进化 bean 操作）</p></blockquote><pre><code class="language-java">package cn.itcast.mp.simple.pojo;  
  
import lombok.AllArgsConstructor;  
import lombok.Data;  
import lombok.NoArgsConstructor;  
  
@Data  
@NoArgsConstructor  
@AllArgsConstructor  
public class User &#123;  
    private Long id;  
    private String userName;  
    private String password;  
    private String name;  
    private Integer age;  
    private String email;  
&#125;
</code></pre><blockquote><p>第三步，编写 UserMapper 接口：</p></blockquote><pre><code class="language-java">package cn.itcast.mp.simple.mapper;  
  
import cn.itcast.mp.simple.pojo.User;  
  
import java.util.List;  
  
public interface UserMapper &#123;  
    List&lt;User&gt; findAll();  
&#125;
</code></pre><blockquote><p>第四步，编写 UserMapper.xml 文件：</p></blockquote><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.simple.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>findAll<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.simple.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>        select * from tb_user    </pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><blockquote><p>第五步，编写 TestMybatis 测试用例：</p></blockquote><pre><code class="language-java">package cn.itcast.mp.simple;  
  
import cn.itcast.mp.simple.mapper.UserMapper;  
import cn.itcast.mp.simple.pojo.User;  
import org.apache.ibatis.io.Resources;  
import org.apache.ibatis.session.SqlSession;  
import org.apache.ibatis.session.SqlSessionFactory;  
import org.apache.ibatis.session.SqlSessionFactoryBuilder;  
import org.junit.Test;  
  
import java.io.InputStream;  
import java.util.List;  
  
public class TestMybatis &#123;  
    @Test  
    public void testUserList() throws Exception &#123;  
        String resource = &quot;mybatis-config.xml&quot;;  
        InputStream inputStream = Resources.getResourceAsStream(resource);  
        SqlSessionFactory sqlSessionFactory = new  
                SqlSessionFactoryBuilder().build(inputStream);  
        SqlSession sqlSession = sqlSessionFactory.openSession();  
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  
        List&lt;User&gt; list = userMapper.findAll();  
        for (User user : list) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><blockquote><p>测试结果：</p></blockquote><pre><code>[main] [cn.itcast.mp.simple.mapper.UserMapper.findAll]-[DEBUG] ==&gt; Parameters: 
[main] [cn.itcast.mp.simple.mapper.UserMapper.findAll]-[DEBUG] &lt;== Total: 5 
User(id=1, userName=null, password=123456, name=张三, age=18, email=test1@itcast.cn) 
User(id=2, userName=null, password=123456, name=李四, age=20, email=test2@itcast.cn) 
User(id=3, userName=null, password=123456, name=王五, age=28, email=test3@itcast.cn) 
User(id=4, userName=null, password=123456, name=赵六, age=21, email=test4@itcast.cn) 
User(id=5, userName=null, password=123456, name=孙七, age=24, email=test5@itcast.cn)
</code></pre><p>2.3.3、Mybatis+MP 实现查询 User</p><blockquote><p>第一步，将 UserMapper 继承 BaseMapper，将拥有了 BaseMapper 中的所有方法：</p></blockquote><pre><code class="language-java">package cn.itcast.mp.simple.mapper;  
  
import cn.itcast.mp.simple.pojo.User;  
import com.baomidou.mybatisplus.core.mapper.BaseMapper;  
  
import java.util.List;  
  
public interface UserMapper extends BaseMapper&lt;User&gt; &#123;  
    List&lt;User&gt; findAll();  
&#125;
</code></pre><blockquote><p>第二步，使用 MP 中的 MybatisSqlSessionFactoryBuilder 进程构建：</p></blockquote><pre><code class="language-java">package cn.itcast.mp.simple;  
  
import cn.itcast.mp.simple.mapper.UserMapper;  
import cn.itcast.mp.simple.pojo.User;  
import com.baomidou.mybatisplus.core.MybatisSqlSessionFactoryBuilder;  
import org.apache.ibatis.io.Resources;  
import org.apache.ibatis.session.SqlSession;  
import org.apache.ibatis.session.SqlSessionFactory;  
import org.apache.ibatis.session.SqlSessionFactoryBuilder;  
import org.junit.Test;  
  
import java.io.InputStream;  
import java.util.List;  
  
public class TestMybatisPlus &#123;  
    @Test  
    public void testUserList() throws Exception &#123;  
        String resource = &quot;mybatis-config.xml&quot;;  
        InputStream inputStream = Resources.getResourceAsStream(resource);  
		//这里使用的是MP中的MybatisSqlSessionFactoryBuilder  
        SqlSessionFactory sqlSessionFactory = new  
                MybatisSqlSessionFactoryBuilder().build(inputStream);  
        SqlSession sqlSession = sqlSessionFactory.openSession();  
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);  
		// 可以调用BaseMapper中定义的方法  
        List&lt;User&gt; list = userMapper.selectList(null);  
        for (User user : list) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><p>运行报错：</p><p><img data-src="/img/mybatis_plus_007.png" alt=""></p><p>解决：在 User 对象中添加 @TableName，指定数据库表名</p><p><img data-src="/img/mybatis_plus_008.png" alt=""></p><p>测试：</p><pre><code>[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user 
[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 
[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 5 
User(id=1, userName=zhangsan, password=123456, name=张三, age=18, email=test1@itcast.cn) 
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn) 
User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn) 
User(id=4, userName=zhaoliu, password=123456, name=赵六, age=21, email=test4@itcast.cn) 
User(id=5, userName=sunqi, password=123456, name=孙七, age=24, email=test5@itcast.cn)
</code></pre><p>简单说明：</p><ul><li>由于使用了 MybatisSqlSessionFactoryBuilder 进行了构建，继承的 BaseMapper 中的方法就载入到了 SqlSession 中，所以就可以直接使用相关的方法；</li><li>如图：</li></ul><p><img data-src="/img/mybatis_plus_009.png" alt=""></p><h3 id="24-spring-mybatis-mp"><a class="anchor" href="#24-spring-mybatis-mp">#</a> 2.4、Spring + Mybatis + MP</h3><p>引入了 Spring 框架，数据源、构建等工作就交给了 Spring 管理。</p><h4 id="241-创建子module"><a class="anchor" href="#241-创建子module">#</a> 2.4.1、创建子 Module</h4><h4 id="242-实现查询user"><a class="anchor" href="#242-实现查询user">#</a> 2.4.2、实现查询 User</h4><p>第一步，编写 jdbc.properties</p><pre><code class="language-properties">jdbc.driver=com.mysql.jdbc.Driver 
jdbc.url=jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL =false jdbc.username=root 
jdbc.password=root
</code></pre><p>第二步，编写 applicationContext.xml</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans  </span></pre></td></tr><tr><td data-num="6"></td><td><pre>       http://www.springframework.org/schema/beans/spring-beans.xsd       </pre></td></tr><tr><td data-num="7"></td><td><pre>       http://www.springframework.org/schema/context       </pre></td></tr><tr><td data-num="8"></td><td><pre>       http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span><span class="token punctuation">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:*.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">&lt;!-- 定义数据源 --></span>  </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="12"></td><td><pre>          <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.url&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.username&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.password&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.driver&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxActive<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>minIdle<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 这里使用 MP 提供的 sqlSessionFactory，完成了 Spring 与 MP 的整合 --></span>  </pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="21"></td><td><pre>          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 扫描 mapper 接口，使用的依然是 Mybatis 原生的扫描器 --></span>  </pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>basePackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.simple.mapper<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>第三步，编写 User 对象以及 UserMapper 接口：</p><pre><code class="language-java">package cn.itcast.mp.simple.pojo;  
  
import com.baomidou.mybatisplus.annotation.TableName;  
import lombok.AllArgsConstructor;  
import lombok.Data;  
import lombok.NoArgsConstructor;  
  
@Data  
@NoArgsConstructor  
@AllArgsConstructor  
@TableName(&quot;tb_user&quot;)  
public class User &#123;  
    private Long id;  
    private String userName;  
    private String password;  
    private String name;  
    private Integer age;  
    private String email;  
&#125;
</code></pre><pre><code class="language-java">package cn.itcast.mp.simple.mapper;  
import cn.itcast.mp.simple.pojo.User;  
import com.baomidou.mybatisplus.core.mapper.BaseMapper;  
public interface UserMapper extends BaseMapper&lt;User&gt; &#123;  
&#125;
</code></pre><p>第四步，编写测试用例：</p><pre><code class="language-java">package cn.itcast.mp.simple;  
  
import cn.itcast.mp.simple.mapper.UserMapper;  
import cn.itcast.mp.simple.pojo.User;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.test.context.ContextConfiguration;  
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;  
  
import java.util.List;  
  
@RunWith(SpringJUnit4ClassRunner.class)  
@ContextConfiguration(locations = &quot;classpath:applicationContext.xml&quot;)  
public class TestSpringMP &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelectList() &#123;  
        List&lt;User&gt; users = this.userMapper.selectList(null);  
        for (User user : users) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><p>测试：</p><pre><code>[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user 
[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 
[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 5 
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74287ea3] 
User(id=1, userName=zhangsan, password=123456, name=张三, age=18, email=test1@itcast.cn) 
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn) 
User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn) 
User(id=4, userName=zhaoliu, password=123456, name=赵六, age=21, email=test4@itcast.cn) 
User(id=5, userName=sunqi, password=123456, name=孙七, age=24, email=test5@itcast.cn)
</code></pre><h3 id="25-springboot-mybatis-mp"><a class="anchor" href="#25-springboot-mybatis-mp">#</a> 2.5、SpringBoot + Mybatis + MP</h3><p>使用 SpringBoot 将进一步的简化 MP 的整合，需要注意的是，由于使用 SpringBoot 需要继承 parent，所以需要重新创 建工程，并不是创建子 Module。</p><h4 id="251-创建工程"><a class="anchor" href="#251-创建工程">#</a> 2.5.1、创建工程</h4><p><img data-src="/img/mybatis_plus_010.png" alt=""></p><h4 id="252-导入依赖"><a class="anchor" href="#252-导入依赖">#</a> 2.5.2、导入依赖</h4><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0  </span></pre></td></tr><tr><td data-num="5"></td><td><pre>         http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="8"></td><td><pre>	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.itcast.mp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mp-springboot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="17"></td><td><pre>	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>                </pre></td></tr><tr><td data-num="20"></td><td><pre>	            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>                    </pre></td></tr><tr><td data-num="21"></td><td><pre>		            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="22"></td><td><pre>	                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 简化代码的工具包 --></span>  </pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--mybatis-plus 的 springboot 支持 --></span>  </pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--mysql 驱动 --></span>  </pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="47"></td><td><pre>	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="52"></td><td><pre>	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="53"></td><td><pre>		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>                </pre></td></tr><tr><td data-num="54"></td><td><pre>			    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="55"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="56"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>log4j.properties：</p><pre><code class="language-properties">log4j.rootLogger=DEBUG,A1  
log4j.appender.A1=org.apache.log4j.ConsoleAppender  
log4j.appender.A1.layout=org.apache.log4j.PatternLayout  
log4j.appender.A1.layout.ConversionPattern=[%t] [%c]-[%p] %m%n
</code></pre><h4 id="253-编写applicationproperties"><a class="anchor" href="#253-编写applicationproperties">#</a> 2.5.3、编写 application.properties</h4><pre><code class="language-properties">spring.application.name=itcast-mp-springboot  
spring.datasource.driver-class-name=com.mysql.jdbc.Driver  
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/mp?  
useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL=false  
spring.datasource.username=root  
spring.datasource.password=root
</code></pre><h4 id="254-编写pojo"><a class="anchor" href="#254-编写pojo">#</a> 2.5.4、编写 pojo</h4><pre><code class="language-java">package cn.itcast.mp.pojo;  
  
import com.baomidou.mybatisplus.annotation.TableName;  
import lombok.AllArgsConstructor;  
import lombok.Data;  
import lombok.NoArgsConstructor;  
  
@Data  
@NoArgsConstructor  
@AllArgsConstructor  
@TableName(&quot;tb_user&quot;)  
public class User &#123;  
    private Long id;  
    private String userName;  
    private String password;  
    private String name;  
    private Integer age;  
    private String email;  
&#125;
</code></pre><h4 id="255-编写mapper"><a class="anchor" href="#255-编写mapper">#</a> 2.5.5、编写 mapper</h4><pre><code class="language-java">package cn.itcast.mp.mapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.mapper.BaseMapper;  
public interface UserMapper extends BaseMapper&lt;User&gt; &#123;  
&#125;
</code></pre><h4 id="256-编写启动类"><a class="anchor" href="#256-编写启动类">#</a> 2.5.6、编写启动类</h4><pre><code class="language-java">package cn.itcast.mp;  
  
import org.mybatis.spring.annotation.MapperScan;  
import org.springframework.boot.SpringApplication;  
import org.springframework.boot.WebApplicationType;  
import org.springframework.boot.autoconfigure.SpringBootApplication;  
import org.springframework.boot.builder.SpringApplicationBuilder;  
  
@MapperScan(&quot;cn.itcast.mp.mapper&quot;) //设置mapper接口的扫描包  
@SpringBootApplication  
public class MyApplication &#123;  
    public static void main(String[] args) &#123;  
        SpringApplication.run(MyApplication.class, args);  
    &#125;  
&#125;
</code></pre><h4 id="257-编写测试用例"><a class="anchor" href="#257-编写测试用例">#</a> 2.5.7、编写测试用例</h4><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelect() &#123;  
        List&lt;User&gt; userList = userMapper.selectList(null);  
        for (User user : userList) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><p>测试：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user 
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 5 
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14faa38c] 
User(id=1, userName=zhangsan, password=123456, name=张三, age=18, email=test1@itcast.cn) 
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn) 
User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn) 
User(id=4, userName=zhaoliu, password=123456, name=赵六, age=21, email=test4@itcast.cn) 
User(id=5, userName=sunqi, password=123456, name=孙七, age=24, email=test5@itcast.cn)
</code></pre><h2 id="3-通用crud"><a class="anchor" href="#3-通用crud">#</a> 3、通用 CRUD</h2><p>通过前面的学习，我们了解到通过继承 BaseMapper 就可以获取到各种各样的单表操作，接下来我们将详细讲解这些 操作。</p><p><img data-src="/img/mybatis_plus_011.png" alt=""></p><h3 id="31-插入操作"><a class="anchor" href="#31-插入操作">#</a> 3.1、插入操作</h3><h4 id="311-方法定义"><a class="anchor" href="#311-方法定义">#</a> 3.1.1、方法定义</h4><pre><code class="language-java">/** 
* 插入一条记录 
* 
* @param entity 实体对象 
*/ 
int insert(T entity);
</code></pre><h4 id="312-测试用例"><a class="anchor" href="#312-测试用例">#</a> 3.1.2、测试用例</h4><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testInsert() &#123;  
        User user = new User();  
        user.setAge(20);  
        user.setEmail(&quot;test@itcast.cn&quot;);  
        user.setName(&quot;曹操&quot;);  
        user.setUserName(&quot;caocao&quot;);  
        user.setPassword(&quot;123456&quot;);  
        int result = this.userMapper.insert(user); //返回的result是受影响的行数，并不是自增  
        后的id  
        System.out.println(&quot;result = &quot; + result);  
        System.out.println(user.getId()); //自增后的id会回填到对象中  
    &#125;  
&#125;
</code></pre><h4 id="313-测试"><a class="anchor" href="#313-测试">#</a> 3.1.3、测试</h4><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Preparing: INSERT INTO tb_user ( id, user_name, password, name, age, email ) VALUES ( ?, ?, ?, ?, ?, ? ) 
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Parameters: 1122045867793072130(Long), caocao(String), 123456(String), 曹操(String), 20(Integer), test@itcast.cn(String) 
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] &lt;== Updates: 1 
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@411291e5] result = 1 1122045867793072130
</code></pre><p><img data-src="/img/mybatis_plus_012.png" alt=""></p><p>可以看到，数据已经写入到了数据库，但是，id 的值不正确，我们期望的是数据库自增长，实际是 MP 生成了 id 的值 写入到了数据库。</p><p>如何设置 id 的生成策略呢？</p><p>MP 支持的 id 策略：</p><pre><code class="language-java">package com.baomidou.mybatisplus.annotation;  
import lombok.Getter;  
/**  
 * 生成ID类型枚举类  
 *  
 * @author hubin  
 * @since 2015-11-10  
 */@Getter  
public enum IdType &#123;  
    /**  
     * 数据库ID自增  
     */  
    AUTO(0),  
    /**  
     * 该类型为未设置主键类型  
     */  
    NONE(1),  
    /**  
     * 用户输入ID  
     * &lt;p&gt;该类型可以通过自己注册自动填充插件进行填充&lt;/p&gt;  
     */  
    INPUT(2),  
    /* 以下3种类型、只有当插入对象ID 为空，才自动填充。 */    /**  
     * 全局唯一ID (idWorker)  
     */    
     ID_WORKER(3),  
    /**  
     * 全局唯一ID (UUID)  
     */    
     UUID(4),  
    /**  
     * 字符串全局唯一ID (idWorker 的字符串表示)  
     */    
     ID_WORKER_STR(5); 
      
     private final int key;  
     
     IdType(int key) &#123;  
        this.key = key;  
    &#125;  
&#125;
</code></pre><p>修改 User 对象：</p><pre><code class="language-java">package cn.itcast.mp.pojo;  
  
import com.baomidou.mybatisplus.annotation.IdType;  
import com.baomidou.mybatisplus.annotation.TableId;  
import com.baomidou.mybatisplus.annotation.TableName;  
import lombok.AllArgsConstructor;  
import lombok.Data;  
import lombok.NoArgsConstructor;  
  
@Data  
@NoArgsConstructor  
@AllArgsConstructor  
@TableName(&quot;tb_user&quot;)  
public class User &#123;  
    @TableId(type = IdType.AUTO) //指定id类型为自增长  
    private Long id;  
    private String userName;  
    private String password;  
    private String name;  
    private Integer age;  
    private String email;  
&#125;
</code></pre><p>数据插入成功：</p><p><img data-src="/img/mybatis_plus_013.png" alt=""></p><h4 id="314-tablefield"><a class="anchor" href="#314-tablefield">#</a> 3.1.4、@TableField</h4><p>在 MP 中通过 @TableField 注解可以指定字段的一些属性，常常解决的问题有 2 个：<br>1、对象中的属性名和字段名不一致的问题（非驼峰）<br>2、对象中的属性字段在表中不存在的问题 使用：</p><p><img data-src="/img/mybatis_plus_013.png" alt=""></p><p>其他用法，如大字段不加入查询字段：</p><p><img data-src="/img/mybatis_plus_014.png" alt=""></p><p>效果：</p><p><img data-src="/img/mybatis_plus_016.png" alt=""></p><h3 id="32-更新操作"><a class="anchor" href="#32-更新操作">#</a> 3.2、更新操作</h3><p>在 MP 中，更新操作有 2 种，一种是根据 id 更新，另一种是根据条件更新。</p><h4 id="321-根据id更新"><a class="anchor" href="#321-根据id更新">#</a> 3.2.1、根据 id 更新</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 根据 ID 修改 
* 
* @param entity 实体对象 
*/ 
int updateById(@Param(Constants.ENTITY) T entity);
</code></pre><p>测试：</p><pre><code class="language-java">@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testUpdateById() &#123;  
        User user = new User();  
        user.setId(6L); //主键  
        user.setAge(21); //更新的字段  
        //根据id更新，更新不为null的字段  
        this.userMapper.updateById(user);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Preparing: UPDATE tb_user SET age=? WHERE id=? 
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Parameters: 21(Integer), 6(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] &lt;== Updates: 1
</code></pre><p><img data-src="/img/mybatis_plus_017.png" alt=""></p><h4 id="322-根据条件更新"><a class="anchor" href="#322-根据条件更新">#</a> 3.2.2、根据条件更新</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 根据 whereEntity 条件，更新记录 
* 
* @param entity 实体对象 (set 条件值,可以为 null) 
* @param updateWrapper 实体对象封装操作类（可以为 null,里面的 entity 用于生成 where 语句） 
*/ 
int update(@Param(Constants.ENTITY) T entity, @Param(Constants.WRAPPER) Wrapper updateWrapper);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.Wrapper;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper;  
import net.minidev.json.writer.UpdaterMapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testUpdate() &#123;  
        User user = new User();  
        user.setAge(22); //更新的字段  
        //更新的条件  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();  
        wrapper.eq(&quot;id&quot;, 6);  
        //执行更新操作  
        int result = this.userMapper.update(user, wrapper);  
        System.out.println(&quot;result = &quot; + result);  
    &#125;  
&#125;
</code></pre><p>或者，通过 UpdateWrapper 进行更新：</p><pre><code class="language-java">@Test  
public void testUpdate()&#123;  
    //更新的条件以及字段  
    UpdateWrapper&lt;User&gt; wrapper=new UpdateWrapper&lt;&gt;();  
    wrapper.eq(&quot;id&quot;,6).set(&quot;age&quot;,23);  
    //执行更新操作  
    int result=this.userMapper.update(null,wrapper);  
    System.out.println(&quot;result = &quot;+result);  
&#125;
</code></pre><p>测试结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.update]-[DEBUG] ==&gt; Preparing: UPDATE tb_user SET age=? WHERE id = ? 
[main] [cn.itcast.mp.mapper.UserMapper.update]-[DEBUG] ==&gt; Parameters: 23(Integer), 6(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.update]-[DEBUG] &lt;== Updates: 1
</code></pre><p>均可达到更新的效果。<br>关于 wrapper 更多的用法后面会详细讲解。</p><h3 id="33-删除操作"><a class="anchor" href="#33-删除操作">#</a> 3.3、删除操作</h3><h4 id="331-deletebyid-方法定义"><a class="anchor" href="#331-deletebyid-方法定义">#</a> 3.3.1、deleteById 方法定义：</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 根据 ID 删除 
* 
* @param id 主键ID 
*/ 
int deleteById(Serializable id);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testDeleteById() &#123;  
//执行删除操作  
        int result = this.userMapper.deleteById(6L);  
        System.out.println(&quot;result = &quot; + result);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Preparing: DELETE FROM tb_user WHERE id=? 
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Parameters: 6(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] &lt;== Updates: 1
</code></pre><p><img data-src="/img/mybatis_plus_018.png" alt=""></p><p>数据被删除。</p><h4 id="332-deletebymap"><a class="anchor" href="#332-deletebymap">#</a> 3.3.2、deleteByMap</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 根据 columnMap 条件，删除记录 
* 
* @param columnMap 表字段 map 对象 
*/ 
int deleteByMap(@Param(Constants.COLUMN_MAP) Map columnMap);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.HashMap;  
import java.util.Map;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testDeleteByMap() &#123;  
        Map&lt;String, Object&gt; columnMap = new HashMap&lt;&gt;();  
        columnMap.put(&quot;age&quot;, 20);  
        columnMap.put(&quot;name&quot;, &quot;张三&quot;);  
        //将columnMap中的元素设置为删除的条件，多个之间为and关系  
        int result = this.userMapper.deleteByMap(columnMap);  
        System.out.println(&quot;result = &quot; + result);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.deleteByMap]-[DEBUG] ==&gt; Preparing: DELETE FROM tb_user WHERE name = ? AND age = ? 
[main] [cn.itcast.mp.mapper.UserMapper.deleteByMap]-[DEBUG] ==&gt; Parameters: 张三 (String), 20(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.deleteByMap]-[DEBUG] &lt;== Updates: 0
</code></pre><h4 id="333-delete"><a class="anchor" href="#333-delete">#</a> 3.3.3、delete</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 根据 entity 条件，删除记录 
* 
* @param wrapper 实体对象封装操作类（可以为 null） 
*/ 
int delete(@Param(Constants.WRAPPER) Wrapper wrapper);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.HashMap;  
import java.util.Map;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testDeleteByMap() &#123;  
        User user = new User();  
        user.setAge(20);  
        user.setName(&quot;张三&quot;);  
        //将实体对象进行包装，包装为操作条件  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;(user);  
        int result = this.userMapper.delete(wrapper);  
        System.out.println(&quot;result = &quot; + result);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.delete]-[DEBUG] ==&gt; Preparing: DELETE FROM tb_user WHERE name=? AND age=? 
[main] [cn.itcast.mp.mapper.UserMapper.delete]-[DEBUG] ==&gt; Parameters: 张三(String), 20(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.delete]-[DEBUG] &lt;== Updates: 0
</code></pre><h4 id="334-deletebatchids"><a class="anchor" href="#334-deletebatchids">#</a> 3.3.4、deleteBatchIds</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 删除（根据ID 批量删除） 
* 
* @param idList 主键ID列表(不能为 null 以及 empty) 
*/ 
int deleteBatchIds(@Param(Constants.COLLECTION) Collection idList);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.Arrays;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testDeleteByMap() &#123;  
        //根据id集合批量删除  
        int result = this.userMapper.deleteBatchIds(Arrays.asList(1L, 10L, 20L));  
        System.out.println(&quot;result = &quot; + result);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.deleteBatchIds]-[DEBUG] ==&gt; Preparing: DELETE FROM tb_user WHERE id IN ( ? , ? , ? ) 
[main] [cn.itcast.mp.mapper.UserMapper.deleteBatchIds]-[DEBUG] ==&gt; Parameters: 1(Long), 10(Long), 20(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.deleteBatchIds]-[DEBUG] &lt;== Updates: 1
</code></pre><h3 id="34-查询操作"><a class="anchor" href="#34-查询操作">#</a> 3.4、查询操作</h3><p>MP 提供了多种查询操作，包括根据 id 查询、批量查询、查询单条数据、查询列表、分页查询等操作。</p><h4 id="341-selectbyid"><a class="anchor" href="#341-selectbyid">#</a> 3.4.1、selectById</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 根据 ID 查询 
* 
* @param id 主键ID 
*/ 
T selectById(Serializable id)
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelectById() &#123;  
        //根据id查询数据  
        User user = this.userMapper.selectById(2L);  
        System.out.println(&quot;result = &quot; + user);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user WHERE id=? 
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Parameters: 2(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] &lt;== Total: 1 
result = User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn, address=null)
</code></pre><h4 id="342-selectbatchids"><a class="anchor" href="#342-selectbatchids">#</a> 3.4.2、selectBatchIds</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 查询（根据ID 批量查询） 
* 
* @param idList 主键ID列表(不能为 null 以及 empty) 
*/ 
List selectBatchIds(@Param(Constants.COLLECTION) Collection idList);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.Arrays;  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelectBatchIds() &#123;  
        //根据id集合批量查询  
        List&lt;User&gt; users = this.userMapper.selectBatchIds(Arrays.asList(2L, 3L, 10L));  
        for (User user : users) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectBatchIds]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user WHERE id IN ( ? , ? , ? ) 
[main] [cn.itcast.mp.mapper.UserMapper.selectBatchIds]-[DEBUG] ==&gt; Parameters: 2(Long), 3(Long), 10(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.selectBatchIds]-[DEBUG] &lt;== Total: 2 
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn, address=null) 
User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn, address=null)
</code></pre><h4 id="343-selectone"><a class="anchor" href="#343-selectone">#</a> 3.4.3、selectOne</h4><p>方法定义：</p><pre><code class="language-java">/** 
* 根据 entity 条件，查询一条记录 
* 
* @param queryWrapper 实体对象封装操作类（可以为 null） 
*/ 
T selectOne(@Param(Constants.WRAPPER) Wrapper queryWrapper);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelectOne() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;();  
        wrapper.eq(&quot;name&quot;, &quot;李四&quot;);  
        //根据条件查询一条数据，如果结果超过一条会报错  
        User user = this.userMapper.selectOne(wrapper);  
        System.out.println(user);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectOne]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user WHERE name = ? 
[main] [cn.itcast.mp.mapper.UserMapper.selectOne]-[DEBUG] ==&gt; Parameters: 李四(String) 
[main] [cn.itcast.mp.mapper.UserMapper.selectOne]-[DEBUG] &lt;== Total: 1 
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn, address=null)
</code></pre><h4 id="344-selectcount"><a class="anchor" href="#344-selectcount">#</a> 3.4.4、selectCount</h4><p>方法定义：</p><pre><code class="language-java">/** 
 * 根据 Wrapper 条件，查询总记录数 
 * 
 * @param queryWrapper 实体对象封装操作类（可以为 null） 
 */ 
Integer selectCount(@Param(Constants.WRAPPER) Wrapper queryWrapper);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelectCount() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;();  
        wrapper.gt(&quot;age&quot;, 23); //年龄大于23岁  
        //根据条件查询数据条数  
        Integer count = this.userMapper.selectCount(wrapper);  
        System.out.println(&quot;count = &quot; + count);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectCount]-[DEBUG] ==&gt; Preparing: SELECT COUNT( 1 ) FROM tb_user WHERE age &gt; ? 
[main] [cn.itcast.mp.mapper.UserMapper.selectCount]-[DEBUG] ==&gt; Parameters: 23(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.selectCount]-[DEBUG] &lt;== Total: 1 
count = 2
</code></pre><h4 id="345-selectlist"><a class="anchor" href="#345-selectlist">#</a> 3.4.5、selectList</h4><p>方法定义：</p><pre><code class="language-java">/** 
 * 根据 entity 条件，查询全部记录 
 * 
 * @param queryWrapper 实体对象封装操作类（可以为 null） 
 */ 
List selectList(@Param(Constants.WRAPPER) Wrapper queryWrapper);
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelectList() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;();  
        wrapper.gt(&quot;age&quot;, 23); //年龄大于23岁  
        // 根据条件查询数据  
        List&lt;User&gt; users = this.userMapper.selectList(wrapper);  
        for (User user : users) &#123;  
            System.out.println(&quot;user = &quot; + user);  
        &#125;  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user WHERE age &gt; ? 
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 23(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 2 
user = User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn, address=null) 
user = User(id=5, userName=sunqi, password=123456, name=孙七, age=24, email=test5@itcast.cn, address=null)
</code></pre><h4 id="346-selectpage"><a class="anchor" href="#346-selectpage">#</a> 3.4.6、selectPage</h4><p>方法定义：</p><pre><code class="language-java">/**
 * 根据 entity 条件，查询全部记录（并翻页） 
 * 
 * @param page 分页查询条件（可以为 RowBounds.DEFAULT） 
 * @param queryWrapper 实体对象封装操作类（可以为 null） 
 */ 
IPage selectPage(IPage page, @Param(Constants.WRAPPER) Wrapper queryWrapper);
</code></pre><p>配置分页插件：</p><pre><code class="language-java">package cn.itcast.mp;  
import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;  
import org.mybatis.spring.annotation.MapperScan;  
import org.springframework.context.annotation.Bean;  
import org.springframework.context.annotation.Configuration;  
@Configuration  
@MapperScan(&quot;cn.itcast.mp.mapper&quot;) //设置mapper接口的扫描包  
public class MybatisPlusConfig &#123;  
    /**  
     * 分页插件  
     */  
    @Bean  
    public PaginationInterceptor paginationInterceptor() &#123;  
        return new PaginationInterceptor();  
    &#125;  
&#125;
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import com.baomidou.mybatisplus.core.metadata.IPage;  
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelectPage() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;();  
        wrapper.gt(&quot;age&quot;, 20); //年龄大于20岁  
        Page&lt;User&gt; page = new Page&lt;&gt;(1, 1);  
        //根据条件查询数据  
        IPage&lt;User&gt; iPage = this.userMapper.selectPage(page, wrapper);  
        System.out.println(&quot;数据总条数：&quot; + iPage.getTotal());  
        System.out.println(&quot;总页数：&quot; + iPage.getPages());  
        List&lt;User&gt; users = iPage.getRecords();  
        for (User user : users) &#123;  
            System.out.println(&quot;user = &quot; + user);  
        &#125;  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] ==&gt; Preparing: SELECT COUNT(1) FROM tb_user WHERE age &gt; ? 
[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] ==&gt; Parameters: 20(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user WHERE age &gt; ? LIMIT ?,? 
[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] ==&gt; Parameters: 20(Integer), 0(Long), 1(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] &lt;== Total: 1 
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ecd665] 
数据总条数：3 
总页数：3 
user = User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn, address=null)
</code></pre><h3 id="35-sql注入的原理"><a class="anchor" href="#35-sql注入的原理">#</a> 3.5、SQL 注入的原理</h3><p>前面我们已经知道，MP 在启动后会将 BaseMapper 中的一系列的方法注册到 meppedStatements 中，那么究竟是如 何注入的呢？流程又是怎么样的？下面我们将一起来分析下。</p><p>在 MP 中，ISqlInjector 负责 SQL 的注入工作，它是一个接口，AbstractSqlInjector 是它的实现类，实现关系如下：</p><p><img data-src="/img/mybatis_plus_019.png" alt=""></p><p>在 AbstractSqlInjector 中，主要是由 inspectInject () 方法进行注入的，如下：</p><pre><code class="language-java">@Override  
public void inspectInject(MapperBuilderAssistant builderAssistant, Class&lt;?&gt;  
        mapperClass) &#123;  
    Class&lt;?&gt; modelClass = extractModelClass(mapperClass);  
    if (modelClass != null) &#123;  
        String className = mapperClass.toString();  
        Set&lt;String&gt; mapperRegistryCache =  
                GlobalConfigUtils.getMapperRegistryCache(builderAssistant.getConfiguration());  
        if (!mapperRegistryCache.contains(className)) &#123;  
            List&lt;AbstractMethod&gt; methodList = this.getMethodList();  
            if (CollectionUtils.isNotEmpty(methodList)) &#123;  
                TableInfo tableInfo = TableInfoHelper.initTableInfo(builderAssistant,  
                        modelClass);  
                // 循环注入自定义方法  
                methodList.forEach(m -&gt; m.inject(builderAssistant, mapperClass,  
                        modelClass, tableInfo));  
            &#125; else &#123;  
                logger.debug(mapperClass.toString() + &quot;, No effective injection method  
                        was found.&quot;);  
            &#125;  
            mapperRegistryCache.add(className);  
        &#125;  
    &#125;  
&#125;
</code></pre><p>在实现方法中， methodList.forEach (m -&gt; m.inject (builderAssistant, mapperClass, modelClass, tableInfo)); 是关键，循环遍历方法，进行注入。</p><p>最终调用抽象方法 injectMappedStatement 进行真正的注入：</p><pre><code class="language-java">/** 
 * 注入自定义 MappedStatement 
 * 
 * @param mapperClass mapper 接口 
 * @param modelClass mapper 泛型 
 * @param tableInfo 数据库表反射信息 
 * @return MappedStatement 
 */ 
public abstract MappedStatement injectMappedStatement(Class mapperClass, Class modelClass, TableInfo tableInfo);
</code></pre><p>查看该方法的实现：</p><p><img data-src="/img/mybatis_plus_020.png" alt=""></p><p>以 SelectById 为例查看：</p><pre><code class="language-java">public class SelectById extends AbstractMethod &#123;  
    @Override  
    public MappedStatement injectMappedStatement(Class&lt;?&gt; mapperClass, Class&lt;?&gt;  
            modelClass, TableInfo tableInfo) &#123;  
        SqlMethod sqlMethod = SqlMethod.LOGIC_SELECT_BY_ID;  
        SqlSource sqlSource = new RawSqlSource(configuration,  
                String.format(sqlMethod.getSql(),  
                        sqlSelectColumns(tableInfo, false),  
                        tableInfo.getTableName(), tableInfo.getKeyColumn(),  
                        tableInfo.getKeyProperty(),  
                        tableInfo.getLogicDeleteSql(true, false)), Object.class);  
        return this.addSelectMappedStatement(mapperClass, sqlMethod.getMethod(),  
                sqlSource, modelClass, tableInfo);  
    &#125;  
&#125;
</code></pre><p>可以看到，生成了 SqlSource 对象，再将 SQL 通过 addSelectMappedStatement 方法添加到 meppedStatements 中。</p><p><img data-src="/img/mybatis_plus_021.png" alt=""></p><h2 id="4-配置"><a class="anchor" href="#4-配置">#</a> 4、配置</h2><p>在 MP 中有大量的配置，其中有一部分是 Mybatis 原生的配置，另一部分是 MP 的配置，详情 [<span class="exturl" data-url="aHR0cHM6Ly9teWJhdGlzLnBsdXMvYw==">https://mybatis.plus/c</span> onfig/ ](/<span class="exturl" data-url="aHR0cHM6Ly9teWJhdGlzLnBsdXMvYw==">https://mybatis.plus/c</span> onfig/ )<br>下面我们对常用的配置做讲解。</p><h3 id="41-基本配置"><a class="anchor" href="#41-基本配置">#</a> 4.1、基本配置</h3><h4 id="411-configlocation"><a class="anchor" href="#411-configlocation">#</a> 4.1.1、configLocation</h4><p>MyBatis 配置文件位置，如果您有单独的 MyBatis 配置，请将其路径配置到 configLocation 中。 MyBatis Configuration 的具体内容请参考 MyBatis 官方文档</p><p>Spring Boot：</p><pre><code class="language-properties">mybatis-plus.config-location = classpath:mybatis-config.xml
</code></pre><p>Spring MVC：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>configLocation<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:mybatis-config.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h4 id="412-mapperlocations"><a class="anchor" href="#412-mapperlocations">#</a> 4.1.2、mapperLocations</h4><p>MyBatis Mapper 所对应的 XML 文件位置，如果您在 Mapper 中有自定义方法（XML 中有自定义实现），需要进行 该配置，告诉 Mapper 所对应的 XML 文件位置。</p><p>Spring Boot：</p><pre><code class="language-properties">mybatis-plus.mapper-locations = classpath*:mybatis/*.xml
</code></pre><p>Spring MVC：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mapperLocations<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath*:mybatis/*.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><blockquote><p>Maven 多模块项目的扫描路径需以 classpath*: 开头 （即加载多个 jar 包下的 XML 文件）</p></blockquote><blockquote><p>测试：</p></blockquote><p>UserMapper.xml：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>findById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>        select * from tb_user where id = #&#123;id&#125;  </pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><pre><code class="language-java">package cn.itcast.mp.mapper;  
  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.mapper.BaseMapper;  
  
public interface UserMapper extends BaseMapper&lt;User&gt; &#123;  
    User findById(Long id);  
&#125;
</code></pre><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testSelectPage() &#123;  
        User user = this.userMapper.findById(2L);  
        System.out.println(user);  
    &#125;  
&#125;
</code></pre><p>运行结果：</p><p><img data-src="/img/mybatis_plus_022.png" alt=""></p><h4 id="413-typealiasespackage"><a class="anchor" href="#413-typealiasespackage">#</a> 4.1.3、typeAliasesPackage</h4><p>MyBaits 别名包扫描路径，通过该属性可以给包中的类注册别名，注册后在 Mapper 对应的 XML 文件中可以直接使 用类名，而不用使用全限定的类名（即 XML 中调用的时候不用包含包名）。</p><p>Spring Boot：</p><pre><code class="language-properties">mybatis-plus.type-aliases-package = cn.itcast.mp.pojo
</code></pre><p>Spring MVC：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>typeAliasesPackage<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="4"></td><td><pre>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.samples.quickstart.entity<span class="token punctuation">"</span></span><span class="token punctuation">/></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="42-进阶配置"><a class="anchor" href="#42-进阶配置">#</a> 4.2、进阶配置</h3><p>本部分（Configuration）的配置大都为 MyBatis 原生支持的配置，这意味着您可以通过 MyBatis XML 配置文件的形 式进行配置。</p><h4 id="421-mapunderscoretocamelcase"><a class="anchor" href="#421-mapunderscoretocamelcase">#</a> 4.2.1、mapUnderscoreToCamelCase</h4><ul><li>类型： boolean</li><li>默认值： true</li></ul><p>是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN（下划线命名） 到经典 Java 属 性名 aColumn（驼峰命名） 的类似映射。</p><blockquote><p>注意：<br>此属性在 MyBatis 中原默认值为 false，在 MyBatis-Plus 中，此属性也将用于生成最终的 SQL 的 select body 如果您的数据库命名符合规则无需使用 @TableField 注解指定数据库字段名</p></blockquote><p>示例（SpringBoot）：</p><pre><code class="language-properties">#关闭自动驼峰映射，该参数不能和mybatis-plus.config-location同时存在 mybatis-plus.configuration.map-underscore-to-camel-case=false
</code></pre><h4 id="422-cacheenabled"><a class="anchor" href="#422-cacheenabled">#</a> 4.2.2、cacheEnabled</h4><ul><li>类型： boolean<br>默认值： true</li></ul><p>全局地开启或关闭配置文件中的所有映射器已经配置的任何缓存，默认为 true。</p><p>示例：</p><pre><code class="language-properties">mybatis-plus.configuration.cache-enabled=false
</code></pre><h3 id="43-db-策略配置"><a class="anchor" href="#43-db-策略配置">#</a> 4.3、DB 策略配置</h3><h4 id="431-idtype"><a class="anchor" href="#431-idtype">#</a> 4.3.1、idType</h4><ul><li>类型： com.baomidou.mybatisplus.annotation.IdType</li><li>默认值： ID_WORKER</li></ul><p>全局默认主键类型，设置后，即可省略实体对象中的 @TableId (type = IdType.AUTO) 配置。</p><p>示例：</p><p>SpringBoot：</p><pre><code class="language-properties">mybatis-plus.global-config.db-config.id-type=auto
</code></pre><p>SpringMVC：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- 这里使用 MP 提供的 sqlSessionFactory，完成了 Spring 与 MP 的整合 --></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>globalConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.core.config.GlobalConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dbConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span>                        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>idType<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>AUTO<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h4 id="432-tableprefix"><a class="anchor" href="#432-tableprefix">#</a> 4.3.2、tablePrefix</h4><ul><li>类型： String</li><li>默认值： null</li></ul><p>表名前缀，全局配置后可省略 @TableName () 配置。</p><p>SpringBoot：</p><pre><code class="language-properties">mybatis-plus.global-config.db-config.table-prefix=tb_
</code></pre><p>SpringMVC：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>globalConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.core.config.GlobalConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dbConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span>                        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>idType<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>AUTO<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tablePrefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tb_<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="5-条件构造器"><a class="anchor" href="#5-条件构造器">#</a> 5、条件构造器</h2><p>在 MP 中，Wrapper 接口的实现类关系如下：</p><p><img data-src="/img/mybatis_plus_023.png" alt=""></p><p>可以看到，AbstractWrapper 和 AbstractChainWrapper 是重点实现，接下来我们重点学习 AbstractWrapper 以及其 子类。</p><blockquote><p>说明:<br>QueryWrapper (LambdaQueryWrapper) 和 UpdateWrapper (LambdaUpdateWrapper) 的父类 用于生成 sql 的 where 条件，entity 属性也用于生成 sql 的 where 条件 注意: entity 生成的 where 条件与 使用各个 api 生成 的 where 条件 ** 没有任何关联行为 **</p></blockquote><p>官网文档地址：<a href="/https://mybatis.plus/guide/wrapper.html">https://mybatis.plus/guide/wrapper.html</a></p><h3 id="51-alleq"><a class="anchor" href="#51-alleq">#</a> 5.1、allEq</h3><h4 id="511-说明"><a class="anchor" href="#511-说明">#</a> 5.1.1、说明</h4><pre><code class="language-java">allEq(Map params) 
allEq(Map params, boolean null2IsNull) 
allEq(boolean condition, Map params, boolean null2IsNull)
</code></pre><ul><li>全部 eq (或个别 isNull)</li></ul><blockquote><p>个别参数说明: params : key 为数据库字段名，value 为字段值 null2IsNull : 为 true 则在 map 的 value 为 null 时用 isNull 方法，为 false 时则忽略 value 为 null 的</p><ul><li>例 1: allEq ({id:1,name:&quot;老王&quot;,age:null}) ---&gt; id = 1 and name = ' 老王 ' and age is null</li><li>例 2: allEq ({id:1,name:&quot;老王&quot;,age:null}, false) ---&gt; id = 1 and name = ' 老王'</li></ul></blockquote><pre><code class="language-java">allEq(BiPredicate filter, Map params) 
allEq(BiPredicate filter, Map params, boolean null2IsNull) 
allEq(boolean condition, BiPredicate filter, Map params, boolean null2IsNull)
</code></pre><blockquote><p>个别参数说明: filter : 过滤函数，是否允许字段传入比对条件中 params 与 null2IsNull : 同上</p><ul><li>例 1: allEq ((k,v) -&gt; k.indexOf (&quot;a&quot;) &gt; 0, {id:1,name:&quot;老王&quot;,age:null}) ---&gt; name = ' 老王 ' and age is null</li><li>例 2: allEq ((k,v) -&gt; k.indexOf (&quot;a&quot;) &gt; 0, {id:1,name:&quot;老王&quot;,age:null}, false) ---&gt; name = ' 老王'</li></ul></blockquote><h4 id="512-测试用例"><a class="anchor" href="#512-测试用例">#</a> 5.1.2、测试用例</h4><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.HashMap;  
import java.util.List;  
import java.util.Map;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testWrapper() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();  
        //设置条件  
        Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();  
        params.put(&quot;name&quot;, &quot;曹操&quot;);  
        params.put(&quot;age&quot;, &quot;20&quot;);  
        params.put(&quot;password&quot;, null);  
        // wrapper.allEq(params);//SELECT * FROM tb_user WHERE password IS NULL AND  
        name = ?AND age = ?  
        // wrapper.allEq(params,false); //SELECT * FROM tb_user WHERE name = ? AND age= ?  
        // wrapper.allEq((k, v) -&gt; (k.equals(&quot;name&quot;) || k.equals(&quot;age&quot;)),params);// SELECT * FROM tb_user WHERE name = ? AND age = ?        
        List&lt;User&gt; users = this.userMapper.selectList(wrapper);  
        for (User user : users) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><h3 id="52-基本比较操作"><a class="anchor" href="#52-基本比较操作">#</a> 5.2、基本比较操作</h3><ul><li>eq<ul><li>等于 =</li></ul></li><li>ne<ul><li>不等于 &lt;&gt;</li></ul></li><li>gt<ul><li>大于 &gt;</li></ul></li><li>ge<ul><li>大于等于 &gt;=</li></ul></li><li>lt<ul><li>小于 &lt;</li></ul></li><li>le<ul><li>小于等于 &lt;=</li></ul></li><li>between<ul><li>BETWEEN 值 1 AND 值 2</li></ul></li><li>notBetween<ul><li>NOT BETWEEN 值 1 AND 值 2</li></ul></li><li>in<ul><li>字段 IN (value.get (0), value.get (1), ...)</li></ul></li><li>notIn<ul><li>字段 NOT IN (v0, v1, ...)</li></ul></li></ul><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testEq() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();  
        //SELECT id,user_name,password,name,age,email FROM tb_user WHERE password = ?  
        AND age &gt;= ?AND name IN( ?,?,?)  
        wrapper.eq(&quot;password&quot;, &quot;123456&quot;)  
                .ge(&quot;age&quot;, 20)  
                .in(&quot;name&quot;, &quot;李四&quot;, &quot;王五&quot;, &quot;赵六&quot;);  
        List&lt;User&gt; users = this.userMapper.selectList(wrapper);  
        for (User user : users) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><h3 id="53-模糊查询"><a class="anchor" href="#53-模糊查询">#</a> 5.3、模糊查询</h3><ul><li>like<ul><li>LIKE '% 值 %'</li><li>例: like (&quot;name&quot;, &quot;王&quot;) ---&gt; name like '% 王 %'</li></ul></li><li>notLike<ul><li>NOT LIKE '% 值 %'</li><li>例: notLike (&quot;name&quot;, &quot;王&quot;) ---&gt; name not like '% 王 %'</li></ul></li><li>likeLeft<ul><li>LIKE '% 值'</li><li>例: likeLeft (&quot;name&quot;, &quot;王&quot;) ---&gt; name like '% 王'<br>likeRight<br>LIKE ' 值 %'<br>例: likeRight (&quot;name&quot;, &quot;王&quot;) ---&gt; name like ' 王 %'</li></ul></li></ul><p>测试用例：</p><h3 id="54-排序"><a class="anchor" href="#54-排序">#</a> 5.4、排序</h3><ul><li>orderBy<ul><li>排序：ORDER BY 字段，...</li><li>例: orderBy (true, true, &quot;id&quot;, &quot;name&quot;) ---&gt; order by id ASC,name ASC</li></ul></li><li>orderByAsc<ul><li>排序：ORDER BY 字段，... ASC</li><li>例: orderByAsc (&quot;id&quot;, &quot;name&quot;) ---&gt; order by id ASC,name ASC</li></ul></li><li>orderByDesc<ul><li>排序：ORDER BY 字段，... DESC</li><li>例: orderByDesc (&quot;id&quot;, &quot;name&quot;) ---&gt; order by id DESC,name DESC</li></ul></li></ul><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testWrapper() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();  
        //SELECT id,user_name,password,name,age,email FROM tb_user ORDER BY age DESC  
        wrapper.orderByDesc(&quot;age&quot;);  
        List&lt;User&gt; users = this.userMapper.selectList(wrapper);  
        for (User user : users) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><h3 id="55-逻辑查询"><a class="anchor" href="#55-逻辑查询">#</a> 5.5、逻辑查询</h3><ul><li>or<ul><li>拼接 OR</li><li>主动调用 or 表示紧接着下一个方法不是用 and 连接！(不调用 or 则默认为使用 and 连接)</li></ul></li><li>and<ul><li>AND 嵌套</li><li>例: and (i -&gt; i.eq (&quot;name&quot;, &quot;李白&quot;).ne (&quot;status&quot;, &quot;活着&quot;)) ---&gt; and (name = ' 李白 ' and status &lt;&gt; ' 活着 ')</li></ul></li></ul><p>测试用例：</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testWrapper() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();  
        //SELECT id,user_name,password,name,age,email FROM tb_user WHERE name = ? OR age = ?  
        wrapper.eq(&quot;name&quot;, &quot;李四&quot;).or().eq(&quot;age&quot;, 24);  
        List&lt;User&gt; users = this.userMapper.selectList(wrapper);  
        for (User user : users) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><h3 id="56-select"><a class="anchor" href="#56-select">#</a> 5.6、select</h3><p>在 MP 查询中，默认查询所有的字段，如果有需要也可以通过 select 方法进行指定字段。</p><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testWrapper() &#123;  
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();  
        //SELECT id,name,age FROM tb_user WHERE name = ? OR age = ?  
        wrapper.eq(&quot;name&quot;, &quot;李四&quot;)  
                .or()  
                .eq(&quot;age&quot;, 24)  
                .select(&quot;id&quot;, &quot;name&quot;, &quot;age&quot;);  
        List&lt;User&gt; users = this.userMapper.selectList(wrapper);  
        for (User user : users) &#123;  
            System.out.println(user);  
        &#125;  
    &#125;  
&#125;
</code></pre><h2 id="6-activerecord"><a class="anchor" href="#6-activerecord">#</a> 6、ActiveRecord</h2><p>ActiveRecord（简称 AR）一直广受动态语言（ PHP 、 Ruby 等）的喜爱，而 Java 作为准静态语言，对于 ActiveRecord 往往只能感叹其优雅，所以我们也在 AR 道路上进行了一定的探索，喜欢大家能够喜欢。 什么是 ActiveRecord？</p><blockquote><p>ActiveRecord 也属于 ORM（对象关系映射）层，由 Rails 最早提出，遵循标准的 ORM 模型：表映射到记 录，记录映射到对象，字段映射到对象属性。配合遵循的命名和配置惯例，能够很大程度的快速实现模型的操作，而且简洁易懂。</p><p>ActiveRecord 的主要思想是：</p><ul><li>每一个数据库表对应创建一个类，类的每一个对象实例对应于数据库中表的一行记录；通常表的每个字段在类中都有相应的 Field；</li><li>ActiveRecord 同时负责把自己持久化，在 ActiveRecord 中封装了对数据库的访问，即 CURD;；</li><li>ActiveRecord 是一种领域模型 (Domain Model)，封装了部分业务逻辑；</li></ul></blockquote><h3 id="61-开启ar之旅"><a class="anchor" href="#61-开启ar之旅">#</a> 6.1、开启 AR 之旅</h3><p>在 MP 中，开启 AR 非常简单，只需要将实体对象继承 Model 即可。</p><pre><code class="language-java">package cn.itcast.mp.pojo;

import com.baomidou.mybatisplus.annotation.IdType;
import com.baomidou.mybatisplus.annotation.TableField;
import com.baomidou.mybatisplus.annotation.TableId;
import com.baomidou.mybatisplus.annotation.TableName;
import com.baomidou.mybatisplus.extension.activerecord.Model;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class User extends Model&lt;User&gt; &#123;
	private Long id;
	private String userName;
	private String password;
	private String name;
	private Integer age;
	private String email;
&#125;
</code></pre><h3 id="62-根据主键查询"><a class="anchor" href="#62-根据主键查询">#</a> 6.2、根据主键查询</h3><pre><code class="language-java">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest &#123;

	@Autowired
	private UserMapper userMapper;
	
	@Test
	public void testAR() &#123;
		User user = new User();
		user.setId(2L);
		User user2 = user.selectById();
		System.out.println(user2);
	&#125;
&#125;
</code></pre><h3 id="63-新增数据"><a class="anchor" href="#63-新增数据">#</a> 6.3、新增数据</h3><pre><code class="language-java">@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testAR() &#123;  
        User user = new User();  
        user.setName(&quot;刘备&quot;);  
        user.setAge(30);  
        user.setPassword(&quot;123456&quot;);  
        user.setUserName(&quot;liubei&quot;);  
        user.setEmail(&quot;liubei@itcast.cn&quot;);  
        boolean insert = user.insert();  
        System.out.println(insert);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Preparing: INSERT INTO tb_user ( user_name, password, name, age, email ) VALUES ( ?, ?, ?, ?, ? ) 
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Parameters: liubei(String), 123456(String), 刘备(String), 30(Integer), liubei@itcast.cn(String) 
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] &lt;== Updates: 1
</code></pre><p><img data-src="/img/mybatis_plus_024.png" alt=""></p><h3 id="64-更新操作"><a class="anchor" href="#64-更新操作">#</a> 6.4、更新操作</h3><pre><code class="language-java">@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testAR() &#123;  
        User user = new User();  
        user.setId(8L);  
        user.setAge(35);  
        boolean update = user.updateById();  
        System.out.println(update);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Preparing: UPDATE tb_user SET age=? WHERE id=? 
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Parameters: 35(Integer), 8(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] &lt;== Updates: 1
</code></pre><p><img data-src="/img/mybatis_plus_025.png" alt=""></p><h3 id="65-删除操作"><a class="anchor" href="#65-删除操作">#</a> 6.5、删除操作</h3><pre><code class="language-java">@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testAR() &#123;  
        User user = new User();  
        user.setId(7L);  
        boolean delete = user.deleteById();  
        System.out.println(delete);  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Preparing: DELETE FROM tb_user WHERE id=? 
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Parameters: 7(Long) [main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] &lt;== Updates: 1
</code></pre><h3 id="66-根据条件查询"><a class="anchor" href="#66-根据条件查询">#</a> 6.6、根据条件查询</h3><pre><code class="language-java">@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testAR() &#123;  
        User user = new User();  
        QueryWrapper&lt;User&gt; userQueryWrapper = new QueryWrapper&lt;&gt;();  
        userQueryWrapper.le(&quot;age&quot;, &quot;20&quot;);  
        List&lt;User&gt; users = user.selectList(userQueryWrapper);  
        for (User user1 : users) &#123;  
            System.out.println(user1);  
        &#125;  
    &#125;  
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email FROM tb_user WHERE age &lt;= ? 
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 20(String) 
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 2 
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn, address=null) 
User(id=6, userName=caocao, password=123456, name=曹操, age=20, email=test@itcast.cn, address=null)
</code></pre><h2 id="7-oracle-主键sequence"><a class="anchor" href="#7-oracle-主键sequence">#</a> 7、Oracle 主键 Sequence</h2><p>在 mysql 中，主键往往是自增长的，这样使用起来是比较方便的，如果使用的是 Oracle 数据库，那么就不能使用自增长了，就得使用 Sequence 序列生成 id 值了。</p><h3 id="71-部署oracle环境"><a class="anchor" href="#71-部署oracle环境">#</a> 7.1、部署 Oracle 环境</h3><p>为了简化环境部署，这里使用 Docker 环境进行部署安装 Oracle。</p><pre><code class="language-shell">#拉取镜像  
docker pull sath89/oracle-12c  
  
#创建容器  
docker create --name oracle -p 1521:1521 sath89/oracle-12c  
  
#启动  
docker start oracle &amp;&amp; docker logs -f oracle  
  
#下面是启动过程  
Database not initialized. Initializing database.  
Starting tnslsnr  
Copying database files  
1% complete  
3% complete  
11% complete  
18% complete  
26% complete  
37% complete  
Creating and starting Oracle instance  
40% complete  
45% complete  
50% complete  
55% complete  
56% complete  
60% complete  
62% complete  
Completing Database Creation  
66% complete  
70% complete  
73% complete  
85% complete  
96% complete  
100% complete  
Look at the log file &quot;/u01/app/oracle/cfgtoollogs/dbca/xe/xe.log&quot; for further details.  
Configuring Apex console  
Database initialized. Please visit http://#containeer:8080/em  
http://#containeer:8080/apex for extra configuration if needed  
Starting web management console  
  
PL/SQL procedure successfully completed.  
  
Starting import from '/docker-entrypoint-initdb.d':  
ls: cannot access /docker-entrypoint-initdb.d/*: No such file or directory  
Import finished  
  
Database ready to use. Enjoy! ;)  
#通过用户名密码即可登录  
用户名和密码为： system/oracle
</code></pre><p>下面使用 navicat12 进行连接并操作 oracle，使用资料中提供的安装包，可以试用 14 天。</p><blockquote><p>需要注意的是：由于安装的 Oracle 是 64 位版本，所以 navicat 也是需要使用 64 为版本，否则连接不成功。</p></blockquote><p><img data-src="/img/mybatis_plus_026.png" alt=""></p><p>连接成功：</p><p><img data-src="/img/mybatis_plus_027.png" alt=""></p><h3 id="72-创建表以及序列"><a class="anchor" href="#72-创建表以及序列">#</a> 7.2、创建表以及序列</h3><pre><code class="language-sql">-- 创建表，表名以及字段名都要大写  
CREATE TABLE &quot;TB_USER&quot;  
(  
    &quot;ID&quot; NUMBER (20) VISIBLE NOT NULL,  
    &quot;USER_NAME&quot; VARCHAR2 (255 BYTE) VISIBLE,  
    &quot;PASSWORD&quot; VARCHAR2 (255 BYTE) VISIBLE,  
    &quot;NAME&quot; VARCHAR2 (255 BYTE) VISIBLE,  
    &quot;AGE&quot; NUMBER (10) VISIBLE,  
    &quot;EMAIL&quot; VARCHAR2 (255 BYTE) VISIBLE  
);  
  
-- 创建序列  
CREATE  
SEQUENCE SEQ_USER START  
WITH 1 INCREMENT BY 1
</code></pre><h3 id="73-jdbc驱动包"><a class="anchor" href="#73-jdbc驱动包">#</a> 7.3、jdbc 驱动包</h3><p>由于版权原因，我们不能直接通过 maven 的中央仓库下载 oracle 数据库的 jdbc 驱动包，所以我们需要将驱动包安装到本地仓库。</p><pre><code class="language-shell">#ojdbc8.jar文件在资料中可以找到 
mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc8 -Dversion=12.1.0.1 -Dpackaging=jar -Dfile=ojdbc8.jar
</code></pre><p>安装完成后的坐标：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.oracle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>ojdbc8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>12.1.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="74-修改applicationproperties"><a class="anchor" href="#74-修改applicationproperties">#</a> 7.4、修改 application.properties</h3><p>对于 application.properties 的修改，需要修改 2 个位置，分别是：</p><pre><code class="language-properties">#数据库连接配置  
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver  
spring.datasource.url=jdbc:oracle:thin:@192.168.31.81:1521:xe  
spring.datasource.username=system  
spring.datasource.password=oracle  
#id生成策略  
mybatis-plus.global-config.db-config.id-type=input
</code></pre><h3 id="75-配置序列"><a class="anchor" href="#75-配置序列">#</a> 7.5、配置序列</h3><p>使用 Oracle 的序列需要做 2 件事情：</p><blockquote><p>第一，需要配置 MP 的序列生成器到 Spring 容器：</p></blockquote><pre><code class="language-java">package cn.itcast.mp;  
  
import com.baomidou.mybatisplus.extension.incrementer.OracleKeyGenerator;  
import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;  
import org.mybatis.spring.annotation.MapperScan;  
import org.springframework.context.annotation.Bean;  
import org.springframework.context.annotation.Configuration;  
  
@Configuration  
@MapperScan(&quot;cn.itcast.mp.mapper&quot;) //设置mapper接口的扫描包  
public class MybatisPlusConfig &#123;  
    /**  
     * 分页插件  
     */  
    @Bean  
    public PaginationInterceptor paginationInterceptor() &#123;  
        return new PaginationInterceptor();  
    &#125;  
  
    /**  
     * 序列生成器  
     */  
    @Bean  
    public OracleKeyGenerator oracleKeyGenerator() &#123;  
        return new OracleKeyGenerator();  
    &#125;  
&#125;
</code></pre><blockquote><p>第二，在实体对象中指定序列的名称：</p></blockquote><pre><code class="language-java">@KeySequence(value = &quot;SEQ_USER&quot;, clazz = Long.class)  
public class User &#123;  
    ......  
&#125;
</code></pre><h3 id="76-测试"><a class="anchor" href="#76-测试">#</a> 7.6、测试</h3><pre><code class="language-java">package cn.itcast.mp;  
  
import cn.itcast.mp.mapper.UserMapper;  
import cn.itcast.mp.pojo.User;  
import org.junit.Test;  
import org.junit.runner.RunWith;  
import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.boot.test.context.SpringBootTest;  
import org.springframework.test.context.junit4.SpringRunner;  
  
import java.util.List;  
  
@RunWith(SpringRunner.class)  
@SpringBootTest  
public class UserMapperTest &#123;  
    @Autowired  
    private UserMapper userMapper;  
  
    @Test  
    public void testInsert() &#123;  
        User user = new User();  
        user.setAge(20);  
        user.setEmail(&quot;test@itcast.cn&quot;);  
        user.setName(&quot;曹操&quot;);  
        user.setUserName(&quot;caocao&quot;);  
        user.setPassword(&quot;123456&quot;);  
        int result = this.userMapper.insert(user); //返回的result是受影响的行数，并不是自增后的id  
        System.out.println(&quot;result = &quot; + result);  
        System.out.println(user.getId()); //自增后的id会回填到对象中  
    &#125;  
  
    @Test  
    public void testSelectById() &#123;  
        User user = this.userMapper.selectById(8L);  
        System.out.println(user);  
    &#125;  
&#125;
</code></pre><h2 id="8-插件"><a class="anchor" href="#8-插件">#</a> 8、插件</h2><h3 id="81-mybatis的插件机制"><a class="anchor" href="#81-mybatis的插件机制">#</a> 8.1、mybatis 的插件机制</h3><p>MyBatis 允许你在已映射语句执行过程中的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法</p><p>调用包括：</p><ol><li><p>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</p></li><li><p>ParameterHandler (getParameterObject, setParameters)</p></li><li><p>ResultSetHandler (handleResultSets, handleOutputParameters)</p></li><li><p>StatementHandler (prepare, parameterize, batch, update, query)</p></li></ol><p>我们看到了可以拦截 Executor 接口的部分方法，比如 update，query，commit，rollback 等方法，还有其他接口的一些方法等。</p><p>总体概括为：</p><ol><li><p>拦截执行器的方法</p></li><li><p>拦截参数的处理</p></li><li><p>拦截结果集的处理</p></li><li><p>拦截 Sql 语法构建的处理</p></li></ol><p>拦截器示例：</p><pre><code class="language-java">package cn.itcast.mp.plugins;  
  
import org.apache.ibatis.executor.Executor;  
import org.apache.ibatis.mapping.MappedStatement;  
import org.apache.ibatis.plugin.*;  
  
import java.util.Properties;  
  
@Intercepts(&#123;@Signature(  
        type = Executor.class,  
        method = &quot;update&quot;,  
        args = &#123;MappedStatement.class, Object.class&#125;)&#125;)  
public class MyInterceptor implements Interceptor &#123;  
      
    @Override  
    public Object intercept(Invocation invocation) throws Throwable &#123;  
        //拦截方法，具体业务逻辑编写的位置  
        return invocation.proceed();  
    &#125;  
  
    @Override  
    public Object plugin(Object target) &#123;  
        //创建target对象的代理对象,目的是将当前拦截器加入到该对象中  
        return Plugin.wrap(target, this);  
    &#125;  
  
    @Override  
    public void setProperties(Properties properties) &#123;  
        //属性设置  
    &#125;  
&#125;
</code></pre><p>注入到 Spring 容器：</p><pre><code class="language-java">/**  
 * 自定义拦截器  
 */  
@Bean  
public MyInterceptor myInterceptor()&#123;  
        return new MyInterceptor();  
&#125;
</code></pre><p>或者通过 xml 配置，mybatis-config.xml：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="7"></td><td><pre>	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.plugins.MyInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="82-执行分析插件"><a class="anchor" href="#82-执行分析插件">#</a> 8.2、执行分析插件</h3><p>在 MP 中提供了对 SQL 执行的分析的插件，可用作阻断全表更新、删除的操作，注意：该插件仅适用于开发环境，不适用于生产环境。</p><p>SpringBoot 配置：</p><pre><code class="language-java">@Bean  
public SqlExplainInterceptor sqlExplainInterceptor()&#123;  
    SqlExplainInterceptor sqlExplainInterceptor=new SqlExplainInterceptor();  
    List&lt;ISqlParser&gt; sqlParserList=new ArrayList&lt;&gt;();  
    // 攻击 SQL 阻断解析器、加入解析链  
    sqlParserList.add(new BlockAttackSqlParser());  
    sqlExplainInterceptor.setSqlParserList(sqlParserList);  
    return sqlExplainInterceptor;  
&#125;
</code></pre><p>测试：</p><pre><code class="language-java">@Test  
public void testUpdate()&#123;  
    User user=new User();  
    user.setAge(20);  
    
    int result=this.userMapper.update(user,null);  
    System.out.println(&quot;result = &quot;+result);  
&#125;
</code></pre><p>结果：</p><pre><code>Caused by: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: Prohibition of table update operation 
at com.baomidou.mybatisplus.core.toolkit.ExceptionUtils.mpe(ExceptionUtils.java:49) 
at com.baomidou.mybatisplus.core.toolkit.Assert.isTrue(Assert.java:38) 
at com.baomidou.mybatisplus.core.toolkit.Assert.notNull(Assert.java:72) 
at com.baomidou.mybatisplus.extension.parsers.BlockAttackSqlParser.processUpdate(BlockAtt ackSqlParser.java:45) 
at com.baomidou.mybatisplus.core.parser.AbstractJsqlParser.processParser(AbstractJsqlPars er.java:92) 
at com.baomidou.mybatisplus.core.parser.AbstractJsqlParser.parser(AbstractJsqlParser.java :67) 
at com.baomidou.mybatisplus.extension.handlers.AbstractSqlParserHandler.sqlParser(Abstrac tSqlParserHandler.java:76) 
at com.baomidou.mybatisplus.extension.plugins.SqlExplainInterceptor.intercept(SqlExplainI nterceptor.java:63) at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61) 
at com.sun.proxy.$Proxy70.update(Unknown Source) 
at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197 ) 
... 41 more
</code></pre><p>可以看到，当执行全表更新时，会抛出异常，这样有效防止了一些误操作。</p><h3 id="83-性能分析插件"><a class="anchor" href="#83-性能分析插件">#</a> 8.3、性能分析插件</h3><p>性能分析拦截器，用于输出每条 SQL 语句及其执行时间，可以设置最大执行时间，超过时间会抛出异常。</p><blockquote><p>该插件只用于开发环境，不建议生产环境使用。</p></blockquote><p>配置：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- SQL 执行性能分析，开发环境使用，线上不推荐。 maxTime 指的是 sql 最大执行时长 --></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.plugins.PerformanceInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxTime<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token comment">&lt;!--SQL 是否格式化 默认 false--></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>format<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  </pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>执行结果：</p><pre><code>Time：11 ms - ID：cn.itcast.mp.mapper.UserMapper.selectById 
Execute SQL： 
	SELECT 
		id, 
		user_name, 
		password, 
		name, 
		age, 
		email 
	FROM 
		tb_user 
	WHERE 
		id=7
</code></pre><p>可以看到，执行时间为 11ms。如果将 maxTime 设置为 1 ，那么，该操作会抛出异常。</p><pre><code>Caused by: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: The SQL execution time is too large, please optimize ! 
	at com.baomidou.mybatisplus.core.toolkit.ExceptionUtils.mpe(ExceptionUtils.java:49) 
	at com.baomidou.mybatisplus.core.toolkit.Assert.isTrue(Assert.java:38) ................
</code></pre><h3 id="84-乐观锁插件"><a class="anchor" href="#84-乐观锁插件">#</a> 8.4、乐观锁插件</h3><h4 id="841-主要适用场景"><a class="anchor" href="#841-主要适用场景">#</a> 8.4.1、主要适用场景</h4><p>意图：</p><p>当要更新一条记录的时候，希望这条记录没有被别人更新</p><p>乐观锁实现方式：</p><ul><li>取出记录时，获取当前 version</li><li>更新时，带上这个 version</li><li>执行更新时， set version = newVersion where version = oldVersion</li><li>如果 version 不对，就更新失败</li></ul><h4 id="842-插件配置"><a class="anchor" href="#842-插件配置">#</a> 8.4.2、插件配置</h4><p>spring xml:</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.plugins.OptimisticLockerInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr></table></figure><p>spring boot:</p><pre><code class="language-java">@Bean 
public OptimisticLockerInterceptor optimisticLockerInterceptor() &#123; 
	return new OptimisticLockerInterceptor(); 
&#125;
</code></pre><h4 id="843-注解实体字段"><a class="anchor" href="#843-注解实体字段">#</a> 8.4.3、注解实体字段</h4><p>需要为实体字段添加 @Version 注解。</p><blockquote><p>第一步，为表添加 version 字段，并且设置初始值为 1 ：</p></blockquote><pre><code class="language-sql">ALTER TABLE `tb_user` 
ADD COLUMN `version` int(10) NULL AFTER `email`; 


UPDATE `tb_user` SET `version`='1';
</code></pre><blockquote><p>第二步，为 User 实体对象添加 version 字段，并且添加 @Version 注解：</p></blockquote><pre><code class="language-java">@Version 
private Integer version;
</code></pre><h4 id="844-测试"><a class="anchor" href="#844-测试">#</a> 8.4.4、测试</h4><p>测试用例：</p><pre><code class="language-java">@Test  
public void testUpdate()&#123;  
    User user = new User();  
    user.setAge(30);  
    user.setId(2L);  
    user.setVersion(1); //获取到version为1  
        
    int result = this.userMapper.updateById(user);  
    System.out.println(&quot;result = &quot; + result);  
&#125;
</code></pre><p>执行日志：</p><pre><code>[main] [com.baomidou.mybatisplus.extension.parsers.BlockAttackSqlParser]-[DEBUG] Original SQL: UPDATE tb_user SET age=?, version=? WHERE id=? AND version=? 
[main] [com.baomidou.mybatisplus.extension.parsers.BlockAttackSqlParser]-[DEBUG] parser sql: UPDATE tb_user SET age = ?, version = ? WHERE id = ? AND version = ? 
[main] [org.springframework.jdbc.datasource.DataSourceUtils]-[DEBUG] Fetching JDBC Connection from DataSource 
[main] [org.mybatis.spring.transaction.SpringManagedTransaction]-[DEBUG] JDBC Connection [HikariProxyConnection@540206885 wrapping com.mysql.jdbc.JDBC4Connection@27e0f2f5] will not be managed by Spring 
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Preparing: UPDATE tb_user SET age=?, version=? WHERE id=? AND version=? 
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Parameters: 30(Integer), 2(Integer), 2(Long), 1(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] &lt;== Updates: 1 
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30135202] 
result = 1
</code></pre><p>可以看到，更新的条件中有 version 条件，并且更新的 version 为 2 。</p><p>如果再次执行，更新则不成功。这样就避免了多人同时更新时导致数据的不一致。</p><h4 id="845-特别说明"><a class="anchor" href="#845-特别说明">#</a> 8.4.5、特别说明</h4><ul><li><strong>支持的数据类型只有:int,Integer,long,Long,Date,Timestamp,LocalDateTime</strong></li><li>整数类型下 <code>newVersion = oldVersion + 1</code></li><li><code>newVersion</code> 会回写到 <code>entity</code> 中</li><li>仅支持 <code>updateById(id)</code> 与 <code>update(entity, wrapper)</code> 方法</li><li><strong>在 update (entity, wrapper) 方法下，wrapper 不能复用！！！</strong></li></ul><h2 id="9-sql-注入器"><a class="anchor" href="#9-sql-注入器">#</a> 9、Sql 注入器</h2><p>我们已经知道，在 MP 中，通过 AbstractSqlInjector 将 BaseMapper 中的方法注入到了 Mybatis 容器，这样这些方法才可以正常执行。</p><p>那么，如果我们需要扩充 BaseMapper 中的方法，又该如何实现呢？</p><p>下面我们以扩展 findAll 方法为例进行学习。</p><h3 id="81-编写mybasemapper"><a class="anchor" href="#81-编写mybasemapper">#</a> 8.1、编写 MyBaseMapper</h3><pre><code class="language-java">package cn.itcast.mp.mapper;  
  
import com.baomidou.mybatisplus.core.mapper.BaseMapper;  
  
import java.util.List;  
  
public interface MyBaseMapper&lt;T&gt; extends BaseMapper&lt;T&gt; &#123;  
    List&lt;T&gt; findAll();  
&#125;
</code></pre><p>其他的 Mapper 都可以继承该 Mapper，这样实现了统一的扩展。</p><p>如：</p><pre><code class="language-java">package cn.itcast.mp.mapper;  
  
import cn.itcast.mp.pojo.User;  
  
public interface UserMapper extends MyBaseMapper&lt;User&gt; &#123;  
    User findById(Long id);  
&#125;
</code></pre><h3 id="82-编写mysqlinjector"><a class="anchor" href="#82-编写mysqlinjector">#</a> 8.2、编写 MySqlInjector</h3><p>如果直接继承 AbstractSqlInjector 的话，原有的 BaseMapper 中的方法将失效，所以我们选择继承 DefaultSqlInjector 进行扩展。</p><pre><code class="language-java">package cn.itcast.mp.sqlInjector;  
  
import com.baomidou.mybatisplus.core.injector.AbstractMethod;  
import com.baomidou.mybatisplus.core.injector.DefaultSqlInjector;  
  
import java.util.List;  
  
public class MySqlInjector extends DefaultSqlInjector &#123;  
    @Override  
    public List&lt;AbstractMethod&gt; getMethodList() &#123;  
        List&lt;AbstractMethod&gt; methodList = super.getMethodList();  
        methodList.add(new FindAll());  
        // 再扩充自定义的方法  
        list.add(new FindAll());  
        return methodList;  
    &#125;  
&#125;
</code></pre><h3 id="83-编写findall"><a class="anchor" href="#83-编写findall">#</a> 8.3、编写 FindAll</h3><pre><code class="language-java">package cn.itcast.mp.sqlInjector;  
  
import com.baomidou.mybatisplus.core.enums.SqlMethod;  
import com.baomidou.mybatisplus.core.injector.AbstractMethod;  
import com.baomidou.mybatisplus.core.metadata.TableInfo;  
import org.apache.ibatis.mapping.MappedStatement;  
import org.apache.ibatis.mapping.SqlSource;  
  
public class FindAll extends AbstractMethod &#123;  
    @Override  
    public MappedStatement injectMappedStatement(Class&lt;?&gt; mapperClass, Class&lt;?&gt; modelClass, TableInfo tableInfo) &#123;  
        String sqlMethod = &quot;findAll&quot;;  
        String sql = &quot;select * from &quot; + tableInfo.getTableName();  
        SqlSource sqlSource = languageDriver.createSqlSource(configuration, sql, modelClass);  
        return this.addSelectMappedStatement(mapperClass, sqlMethod, sqlSource, modelClass, tableInfo);  
    &#125;  
&#125;
</code></pre><h3 id="84-注册到spring容器"><a class="anchor" href="#84-注册到spring容器">#</a> 8.4、注册到 Spring 容器</h3><pre><code class="language-java">/** 
 * 自定义SQL注入器 
 */ 
@Bean 
public MySqlInjector mySqlInjector()&#123; 
	return new MySqlInjector(); 
&#125;
</code></pre><h3 id="85-测试"><a class="anchor" href="#85-测试">#</a> 8.5、测试</h3><pre><code class="language-java">@Test 
public void testFindAll()&#123; 
	List users = this.userMapper.findAll(); 
	for (User user : users) &#123; 
		System.out.println(user); 
	&#125; 
&#125;
</code></pre><p>输出的 SQL：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.findAll]-[DEBUG] ==&gt; Preparing: select * from tb_user 
[main] [cn.itcast.mp.mapper.UserMapper.findAll]-[DEBUG] ==&gt; Parameters: 
[main] [cn.itcast.mp.mapper.UserMapper.findAll]-[DEBUG] &lt;== Total: 10
</code></pre><p>至此，我们实现了全局扩展 SQL 注入器。</p><h2 id="10-自动填充功能"><a class="anchor" href="#10-自动填充功能">#</a> 10、自动填充功能</h2><p>有些时候我们可能会有这样的需求，插入或者更新数据时，希望有些字段可以自动填充数据，比如密码、version 等。在 MP 中提供了这样的功能，可以实现自动填充。</p><h3 id="101-添加tablefield注解"><a class="anchor" href="#101-添加tablefield注解">#</a> 10.1、添加 @TableField 注解</h3><pre><code class="language-java">@TableField(fill = FieldFill.INSERT) //插入数据时进行填充 
private String password;
</code></pre><p>为 password 添加自动填充功能，在新增数据时有效。</p><p>FieldFill 提供了多种模式选择：</p><pre><code class="language-java">public enum FieldFill &#123;  
    /**  
     * 默认不处理  
     */  
    DEFAULT,  
    /**  
     * 插入时填充字段  
     */  
    INSERT,  
    /**  
     * 更新时填充字段  
     */  
    UPDATE,  
    /**  
     * 插入和更新时填充字段  
     */  
    INSERT_UPDATE  
&#125;
</code></pre><h3 id="102-编写mymetaobjecthandler"><a class="anchor" href="#102-编写mymetaobjecthandler">#</a> 10.2、编写 MyMetaObjectHandler</h3><pre><code class="language-java">package cn.itcast.mp.handler;  
  
import com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;  
import org.apache.ibatis.reflection.MetaObject;  
import org.springframework.stereotype.Component;  
  
@Component  
public class MyMetaObjectHandler implements MetaObjectHandler &#123;  
    @Override  
    public void insertFill(MetaObject metaObject) &#123;  
        Object password = getFieldValByName(&quot;password&quot;, metaObject);  
        if (null == password) &#123;  
            //字段为空，可以进行填充  
            setFieldValByName(&quot;password&quot;, &quot;123456&quot;, metaObject);  
        &#125;  
    &#125;  
  
    @Override  
    public void updateFill(MetaObject metaObject) &#123;  
  
    &#125;  
&#125;
</code></pre><h3 id="103-测试"><a class="anchor" href="#103-测试">#</a> 10.3、测试</h3><pre><code class="language-java">@Test  
public void testInsert()&#123;  
    User user=new User();  
    user.setName(&quot;关羽&quot;);  
    user.setUserName(&quot;guanyu&quot;);  
    user.setAge(30);  
    user.setEmail(&quot;guanyu@itast.cn&quot;);  
    user.setVersion(1);  
    
    int result=this.userMapper.insert(user);  
    System.out.println(&quot;result = &quot;+result);  
&#125;
</code></pre><p>结果：</p><p><img data-src="/img/mybatis_plus_028.png" alt=""></p><h2 id="11-逻辑删除"><a class="anchor" href="#11-逻辑删除">#</a> 11、 逻辑删除</h2><p>开发系统时，有时候在实现功能时，删除操作需要实现逻辑删除，所谓逻辑删除就是将数据标记为删除，而并非真正的物理删除（非 DELETE 操作），查询时需要携带状态条件，确保被标记的数据不被查询到。这样做的目的就是避免数据被真正的删除。</p><p>MP 就提供了这样的功能，方便我们使用，接下来我们一起学习下。</p><h3 id="111-修改表结构"><a class="anchor" href="#111-修改表结构">#</a> 11.1、修改表结构</h3><p>为 tb_user 表增加 deleted 字段，用于表示数据是否被删除， 1 代表删除， 0 代表未删除。</p><pre><code class="language-sql">ALTER TABLE 
`tb_user` ADD COLUMN `deleted` int(1) NULL DEFAULT 0 COMMENT '1代表删除，0代表未删除' AFTER `version`;
</code></pre><p>同时，也修改 User 实体，增加 deleted 属性并且添加 @TableLogic 注解：</p><pre><code class="language-java">@TableLogic 
private Integer deleted;
</code></pre><h3 id="112-配置"><a class="anchor" href="#112-配置">#</a> 11.2、配置</h3><p>application.properties：</p><pre><code class="language-properties"># 逻辑已删除值(默认为 1)
mybatis-plus.global-config.db-config.logic-delete-value=1  
# 逻辑未删除值(默认为 0)
mybatis-plus.global-config.db-config.logic-not-delete-value=0
</code></pre><h3 id="113-测试"><a class="anchor" href="#113-测试">#</a> 11.3、测试</h3><pre><code class="language-java">@Test 
public void testDeleteById()&#123; 
	this.userMapper.deleteById(2L); 
&#125;
</code></pre><p>执行的 SQL：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Preparing: UPDATE tb_user SET deleted=1 WHERE id=? AND deleted=0 
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Parameters: 2(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] &lt;== Updates: 1
</code></pre><p><img data-src="/img/mybatis_plus_029.png" alt=""></p><p>测试查询：</p><pre><code class="language-java">@Test 
public void testSelectById()&#123; 
	User user = this.userMapper.selectById(2L); 
	System.out.println(user); 
&#125;
</code></pre><p>执行的 SQL：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email,version,deleted FROM tb_user WHERE id=? AND deleted=0
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Parameters: 2(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] &lt;== Total: 0
</code></pre><p>可见，已经实现了逻辑删除。</p><h2 id="12-通用枚举"><a class="anchor" href="#12-通用枚举">#</a> 12、 通用枚举</h2><p>解决了繁琐的配置，让 mybatis 优雅的使用枚举属性！</p><h3 id="121-修改表结构"><a class="anchor" href="#121-修改表结构">#</a> 12.1、修改表结构</h3><pre><code class="language-sql">ALTER TABLE 
`tb_user` ADD COLUMN `sex` int(1) NULL DEFAULT 1 COMMENT '1-男，2-女' AFTER `deleted`;
</code></pre><h3 id="122-定义枚举"><a class="anchor" href="#122-定义枚举">#</a> 12.2、定义枚举</h3><pre><code class="language-java">package cn.itcast.mp.enums;  
  
import com.baomidou.mybatisplus.core.enums.IEnum;  
import com.fasterxml.jackson.annotation.JsonValue;  
  
public enum SexEnum implements IEnum&lt;Integer&gt; &#123;  
      
    MAN(1, &quot;男&quot;),  
    WOMAN(2, &quot;女&quot;);  
    private int value;  
    private String desc;  
  
    SexEnum(int value, String desc) &#123;  
        this.value = value;  
        this.desc = desc;  
    &#125;  
  
    @Override  
    public Integer getValue() &#123;  
        return this.value;  
    &#125;  
  
    @Override  
    public String toString() &#123;  
        return this.desc;  
    &#125;  
&#125;
</code></pre><h3 id="123-配置"><a class="anchor" href="#123-配置">#</a> 12.3、配置</h3><pre><code class="language-properties"># 枚举包扫描 
mybatis-plus.type-enums-package=cn.itcast.mp.enums
</code></pre><h3 id="124-修改实体"><a class="anchor" href="#124-修改实体">#</a> 12.4、修改实体</h3><pre><code class="language-java">private SexEnum sex;
</code></pre><h3 id="125-测试"><a class="anchor" href="#125-测试">#</a> 12.5、测试</h3><p>测试插入数据：</p><pre><code class="language-java">@Test 
public void testInsert()&#123; 
	User user = new User(); 
	user.setName(&quot;貂蝉&quot;); 
	user.setUserName(&quot;diaochan&quot;); 
	user.setAge(20); 
	user.setEmail(&quot;diaochan@itast.cn&quot;); 
	user.setVersion(1); user.setSex(SexEnum.WOMAN); 
	
	int result = this.userMapper.insert(user); 
	System.out.println(&quot;result = &quot; + result); 
&#125;
</code></pre><p>SQL：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Preparing: INSERT INTO tb_user ( user_name, password, name, age, email, version, sex ) VALUES ( ?, ?, ?, ?, ?, ?, ? ) 
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Parameters: diaochan(String), 123456(String), 貂蝉(String), 20(Integer), diaochan@itast.cn(String), 1(Integer), 2(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] &lt;== Updates: 1
</code></pre><p><img data-src="/img/mybatis_plus_030.png" alt=""></p><p>查询：</p><pre><code class="language-java">@Test 
public void testSelectById()&#123; 
	User user = this.userMapper.selectById(2L); 
	System.out.println(user); 
&#125;
</code></pre><p>结果：</p><pre><code>[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email,version,deleted,sex FROM tb_user WHERE id=? AND deleted=0 
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Parameters: 2(Long) 
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] &lt;== Total: 1 

User(id=2, userName=lisi, password=123456, name=李四, age=30, email=test2@itcast.cn, address=null, version=2, deleted=0, sex=女)
</code></pre><p>从测试可以看出，可以很方便的使用枚举了。</p><p>查询条件时也是有效的：</p><pre><code class="language-java">@Test 
public void testSelectBySex() &#123; 
	QueryWrapper wrapper = new QueryWrapper&lt;&gt;(); 
	wrapper.eq(&quot;sex&quot;, SexEnum.WOMAN); 
	List users = this.userMapper.selectList(wrapper); 
	for (User user : users) &#123; 
		System.out.println(user); 
	&#125; 
&#125;
</code></pre><p>SQL：</p><pre><code class="language-java">[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT id,user_name,password,name,age,email,version,deleted,sex FROM tb_user WHERE deleted=0 AND sex = ? 
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 2(Integer) 
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 3
</code></pre><h2 id="13-代码生成器"><a class="anchor" href="#13-代码生成器">#</a> 13、代码生成器</h2><p>AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper XML、Service、Controller 等各个模块的代码，极大的提升了开发效率。</p><p>效果：</p><p><img data-src="/img/generator.gif" alt=""></p><h3 id="131-创建工程"><a class="anchor" href="#131-创建工程">#</a> 13.1、创建工程</h3><p>pom.xml：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>  </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>  </span></pre></td></tr><tr><td data-num="3"></td><td><pre>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>  </pre></td></tr><tr><td data-num="4"></td><td><pre>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0  </span></pre></td></tr><tr><td data-num="5"></td><td><pre>         http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span><span class="token punctuation">></span>  </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.itcast.mp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mp-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="14"></td><td><pre>	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="15"></td><td><pre>		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--mybatis-plus 的 springboot 支持 --></span>  </pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="25"></td><td><pre>	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="30"></td><td><pre>	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-freemarker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--mysql 驱动 --></span>  </pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="39"></td><td><pre>	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="44"></td><td><pre>	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>            </pre></td></tr><tr><td data-num="45"></td><td><pre>		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>                </pre></td></tr><tr><td data-num="46"></td><td><pre>			    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="47"></td><td><pre>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>  </pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        </pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>    </pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="132-代码"><a class="anchor" href="#132-代码">#</a> 13.2、代码</h3><pre><code class="language-java">package cn.itcast.mp.generator;  
  
import java.util.ArrayList;  
import java.util.List;  
import java.util.Scanner;  
  
import com.baomidou.mybatisplus.core.exceptions.MybatisPlusException;  
import com.baomidou.mybatisplus.core.toolkit.StringPool;  
import com.baomidou.mybatisplus.core.toolkit.StringUtils;  
import com.baomidou.mybatisplus.generator.AutoGenerator;  
import com.baomidou.mybatisplus.generator.InjectionConfig;  
import com.baomidou.mybatisplus.generator.config.DataSourceConfig;  
import com.baomidou.mybatisplus.generator.config.FileOutConfig;  
import com.baomidou.mybatisplus.generator.config.GlobalConfig;  
import com.baomidou.mybatisplus.generator.config.PackageConfig;  
import com.baomidou.mybatisplus.generator.config.StrategyConfig;  
import com.baomidou.mybatisplus.generator.config.TemplateConfig;  
import com.baomidou.mybatisplus.generator.config.po.TableInfo;  
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;  
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;  
  
/**  
 * &lt;p&gt;  
 * mysql 代码生成器演示例子  
 * &lt;/p&gt;  
 */  
public class MysqlGenerator &#123;  
    /**  
     * &lt;p&gt;  
     * 读取控制台内容  
     * &lt;/p&gt;  
     */  
    public static String scanner(String tip) &#123;  
        Scanner scanner = new Scanner(System.in);  
        StringBuilder help = new StringBuilder();  
        help.append(&quot;请输入&quot; + tip + &quot;：&quot;);  
        System.out.println(help.toString());  
        if (scanner.hasNext()) &#123;  
            String ipt = scanner.next();  
            if (StringUtils.isNotEmpty(ipt)) &#123;  
                return ipt;  
            &#125;  
        &#125;  
        throw new MybatisPlusException(&quot;请输入正确的&quot; + tip + &quot;！&quot;);  
    &#125;  
  
    /**  
     * RUN THIS     */    public static void main(String[] args) &#123;  
        // 代码生成器  
        AutoGenerator mpg = new AutoGenerator();  
        // 全局配置  
        GlobalConfig gc = new GlobalConfig();  
        String projectPath = System.getProperty(&quot;user.dir&quot;);  
        gc.setOutputDir(projectPath + &quot;/src/main/java&quot;);  
        gc.setAuthor(&quot;itcast&quot;);  
        gc.setOpen(false);  
        mpg.setGlobalConfig(gc);  
        // 数据源配置  
        DataSourceConfig dsc = new DataSourceConfig();  
        dsc.setUrl(&quot;jdbc:mysql://127.0.0.1:3306/mp? useUnicode = true &amp; useSSL = false &amp; characterEncoding = utf8&quot;);  
        // dsc.setSchemaName(&quot;public&quot;);  
        dsc.setDriverName(&quot;com.mysql.jdbc.Driver&quot;);  
        dsc.setUsername(&quot;root&quot;);  
        dsc.setPassword(&quot;root&quot;);  
        mpg.setDataSource(dsc);  
        // 包配置  
        PackageConfig pc = new PackageConfig();  
        pc.setModuleName(scanner(&quot;模块名&quot;));  
        pc.setParent(&quot;cn.itcast.mp.generator&quot;);  
        mpg.setPackageInfo(pc);  
        // 自定义配置  
        InjectionConfig cfg = new InjectionConfig() &#123;  
            @Override  
            public void initMap() &#123;  
                // to do nothing  
            &#125;  
        &#125;;  
        List&lt;FileOutConfig&gt; focList = new ArrayList&lt;&gt;();  
        focList.add(new FileOutConfig(&quot;/templates/mapper.xml.ftl&quot;) &#123;  
            @Override  
            public String outputFile(TableInfo tableInfo) &#123;  
                // 自定义输入文件名称  
                return projectPath + &quot;/itcast-mp-generator/src/main/resources/mapper/&quot; + pc.getModuleName() + &quot;/&quot; + tableInfo.getEntityName() + &quot;Mapper&quot; + StringPool.DOT_XML;  
            &#125;  
        &#125;);  
        cfg.setFileOutConfigList(focList);  
        mpg.setCfg(cfg);  
        mpg.setTemplate(new TemplateConfig().setXml(null));  
        // 策略配置  
        StrategyConfig strategy = new StrategyConfig();  
        strategy.setNaming(NamingStrategy.underline_to_camel);  
        strategy.setColumnNaming(NamingStrategy.underline_to_camel);  
        //strategy.setSuperEntityClass(&quot;com.baomidou.mybatisplus.samples.generator.common.BaseEntity&quot;);  
        strategy.setEntityLombokModel(true);  
        //strategy.setSuperControllerClass(&quot;com.baomidou.mybatisplus.samples.generator.common.B aseController&quot;);  
        strategy.setInclude(scanner(&quot;表名&quot;));  
        strategy.setSuperEntityColumns(&quot;id&quot;);  
        strategy.setControllerMappingHyphenStyle(true);  
        strategy.setTablePrefix(pc.getModuleName() + &quot;_&quot;);  
        mpg.setStrategy(strategy);  
        // 选择 freemarker 引擎需要指定如下加，注意 pom 依赖必须有！  
        mpg.setTemplateEngine(new FreemarkerTemplateEngine());  
        mpg.execute();  
    &#125;  
&#125;
</code></pre><h4 id="133-测试"><a class="anchor" href="#133-测试">#</a> 13.3、测试</h4><p><img data-src="/img/mybatis_plus_031.png" alt=""></p><p>代码已生成：</p><p><img data-src="/img/mybatis_plus_032.png" alt=""></p><p>实体对象：</p><p><img data-src="/img/mybatis_plus_033.png" alt=""></p><h1 id="14-mybatisx-快速开发插件"><a class="anchor" href="#14-mybatisx-快速开发插件">#</a> 14、MybatisX 快速开发插件</h1><p>MybatisX 是一款基于 IDEA 的快速开发插件，为效率而生。</p><p>安装方法：打开 IDEA，进入 File -&gt; Settings -&gt; Plugins -&gt; Browse Repositories，输入 mybatisx 搜索并安装。</p><p>功能：</p><ul><li><p>Java 与 XML 调回跳转</p></li><li><p>Mapper 方法自动生成 XML</p></li></ul><p><img data-src="/img/mybatisx-jump.gif" alt=""></p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-08-24 18:27:56" itemprop="dateModified" datetime="2023-08-24T18:27:56+08:00">2023-08-24</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="KangKang 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="KangKang 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>kangkang <i class="ic i-at"><em>@</em></i>KangKang</li><li class="link"><strong>本文链接：</strong> <a href="https://blog.0kangkang0.top/2023/07/11/MybatisPlus/" title="MybatisPlus">https://blog.0kangkang0.top/2023/07/11/MybatisPlus/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/07/11/hello-world/" itemprop="url" rel="prev" data-background-image="&#x2F;img&#x2F;00042-3006885864.png" title="Hello World"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>Hello World</h3></a></div><div class="item right"><a href="/2023/07/11/spring%E9%AB%98%E7%BA%A7/" itemprop="url" rel="next" data-background-image="&#x2F;img&#x2F;v2-f35943a6d87c5f9f10f45eee4941deb3_720w.jpg" title="spring高级"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>spring高级</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BA%86%E8%A7%A3mybatis-plus"><span class="toc-number">1.</span> <span class="toc-text">1、了解 Mybatis-Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-mybatis-plus%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">1.1、Mybatis-Plus 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E4%BB%A3%E7%A0%81%E4%BB%A5%E5%8F%8A%E6%96%87%E6%A1%A3"><span class="toc-number">1.2.</span> <span class="toc-text">1.2、代码以及文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E7%89%B9%E6%80%A7"><span class="toc-number">1.3.</span> <span class="toc-text">1.3、特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%9E%B6%E6%9E%84"><span class="toc-number">1.4.</span> <span class="toc-text">1.4、架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E4%BD%9C%E8%80%85"><span class="toc-number">1.5.</span> <span class="toc-text">1.5、作者</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="toc-number">2.</span> <span class="toc-text">2、快速开始</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%A5%E5%8F%8A%E8%A1%A8"><span class="toc-number">2.1.</span> <span class="toc-text">2.1、创建数据库以及表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">2.2、创建工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-mybatis-mp"><span class="toc-number">2.3.</span> <span class="toc-text">2.3、Mybatis + MP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-spring-mybatis-mp"><span class="toc-number">2.4.</span> <span class="toc-text">2.4、Spring + Mybatis + MP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#241-%E5%88%9B%E5%BB%BA%E5%AD%90module"><span class="toc-number">2.4.1.</span> <span class="toc-text">2.4.1、创建子 Module</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#242-%E5%AE%9E%E7%8E%B0%E6%9F%A5%E8%AF%A2user"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.4.2、实现查询 User</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-springboot-mybatis-mp"><span class="toc-number">2.5.</span> <span class="toc-text">2.5、SpringBoot + Mybatis + MP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#251-%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-number">2.5.1.</span> <span class="toc-text">2.5.1、创建工程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#252-%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">2.5.2.</span> <span class="toc-text">2.5.2、导入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#253-%E7%BC%96%E5%86%99applicationproperties"><span class="toc-number">2.5.3.</span> <span class="toc-text">2.5.3、编写 application.properties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#254-%E7%BC%96%E5%86%99pojo"><span class="toc-number">2.5.4.</span> <span class="toc-text">2.5.4、编写 pojo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#255-%E7%BC%96%E5%86%99mapper"><span class="toc-number">2.5.5.</span> <span class="toc-text">2.5.5、编写 mapper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#256-%E7%BC%96%E5%86%99%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="toc-number">2.5.6.</span> <span class="toc-text">2.5.6、编写启动类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#257-%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-number">2.5.7.</span> <span class="toc-text">2.5.7、编写测试用例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%80%9A%E7%94%A8crud"><span class="toc-number">3.</span> <span class="toc-text">3、通用 CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#31-%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C"><span class="toc-number">3.1.</span> <span class="toc-text">3.1、插入操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#311-%E6%96%B9%E6%B3%95%E5%AE%9A%E4%B9%89"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1、方法定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#312-%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2、测试用例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#313-%E6%B5%8B%E8%AF%95"><span class="toc-number">3.1.3.</span> <span class="toc-text">3.1.3、测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#314-tablefield"><span class="toc-number">3.1.4.</span> <span class="toc-text">3.1.4、@TableField</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C"><span class="toc-number">3.2.</span> <span class="toc-text">3.2、更新操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#321-%E6%A0%B9%E6%8D%AEid%E6%9B%B4%E6%96%B0"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1、根据 id 更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#322-%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9B%B4%E6%96%B0"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2、根据条件更新</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33-%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">3.3.</span> <span class="toc-text">3.3、删除操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#331-deletebyid-%E6%96%B9%E6%B3%95%E5%AE%9A%E4%B9%89"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1、deleteById 方法定义：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#332-deletebymap"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2、deleteByMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#333-delete"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.3、delete</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#334-deletebatchids"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.3.4、deleteBatchIds</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C"><span class="toc-number">3.4.</span> <span class="toc-text">3.4、查询操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#341-selectbyid"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1、selectById</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#342-selectbatchids"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.4.2、selectBatchIds</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#343-selectone"><span class="toc-number">3.4.3.</span> <span class="toc-text">3.4.3、selectOne</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#344-selectcount"><span class="toc-number">3.4.4.</span> <span class="toc-text">3.4.4、selectCount</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#345-selectlist"><span class="toc-number">3.4.5.</span> <span class="toc-text">3.4.5、selectList</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#346-selectpage"><span class="toc-number">3.4.6.</span> <span class="toc-text">3.4.6、selectPage</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#35-sql%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">3.5.</span> <span class="toc-text">3.5、SQL 注入的原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">4、配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#41-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">4.1.</span> <span class="toc-text">4.1、基本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#411-configlocation"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1、configLocation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#412-mapperlocations"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.2、mapperLocations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#413-typealiasespackage"><span class="toc-number">4.1.3.</span> <span class="toc-text">4.1.3、typeAliasesPackage</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.</span> <span class="toc-text">4.2、进阶配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#421-mapunderscoretocamelcase"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1、mapUnderscoreToCamelCase</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#422-cacheenabled"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2、cacheEnabled</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#43-db-%E7%AD%96%E7%95%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.</span> <span class="toc-text">4.3、DB 策略配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#431-idtype"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1、idType</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#432-tableprefix"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2、tablePrefix</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">5、条件构造器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#51-alleq"><span class="toc-number">5.1.</span> <span class="toc-text">5.1、allEq</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#511-%E8%AF%B4%E6%98%8E"><span class="toc-number">5.1.1.</span> <span class="toc-text">5.1.1、说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#512-%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-number">5.1.2.</span> <span class="toc-text">5.1.2、测试用例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#52-%E5%9F%BA%E6%9C%AC%E6%AF%94%E8%BE%83%E6%93%8D%E4%BD%9C"><span class="toc-number">5.2.</span> <span class="toc-text">5.2、基本比较操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#53-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.3.</span> <span class="toc-text">5.3、模糊查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#54-%E6%8E%92%E5%BA%8F"><span class="toc-number">5.4.</span> <span class="toc-text">5.4、排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#55-%E9%80%BB%E8%BE%91%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.5.</span> <span class="toc-text">5.5、逻辑查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#56-select"><span class="toc-number">5.6.</span> <span class="toc-text">5.6、select</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-activerecord"><span class="toc-number">6.</span> <span class="toc-text">6、ActiveRecord</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#61-%E5%BC%80%E5%90%AFar%E4%B9%8B%E6%97%85"><span class="toc-number">6.1.</span> <span class="toc-text">6.1、开启 AR 之旅</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#62-%E6%A0%B9%E6%8D%AE%E4%B8%BB%E9%94%AE%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.2.</span> <span class="toc-text">6.2、根据主键查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#63-%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE"><span class="toc-number">6.3.</span> <span class="toc-text">6.3、新增数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#64-%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C"><span class="toc-number">6.4.</span> <span class="toc-text">6.4、更新操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#65-%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">6.5.</span> <span class="toc-text">6.5、删除操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#66-%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.6.</span> <span class="toc-text">6.6、根据条件查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-oracle-%E4%B8%BB%E9%94%AEsequence"><span class="toc-number">7.</span> <span class="toc-text">7、Oracle 主键 Sequence</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#71-%E9%83%A8%E7%BD%B2oracle%E7%8E%AF%E5%A2%83"><span class="toc-number">7.1.</span> <span class="toc-text">7.1、部署 Oracle 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#72-%E5%88%9B%E5%BB%BA%E8%A1%A8%E4%BB%A5%E5%8F%8A%E5%BA%8F%E5%88%97"><span class="toc-number">7.2.</span> <span class="toc-text">7.2、创建表以及序列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#73-jdbc%E9%A9%B1%E5%8A%A8%E5%8C%85"><span class="toc-number">7.3.</span> <span class="toc-text">7.3、jdbc 驱动包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#74-%E4%BF%AE%E6%94%B9applicationproperties"><span class="toc-number">7.4.</span> <span class="toc-text">7.4、修改 application.properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#75-%E9%85%8D%E7%BD%AE%E5%BA%8F%E5%88%97"><span class="toc-number">7.5.</span> <span class="toc-text">7.5、配置序列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#76-%E6%B5%8B%E8%AF%95"><span class="toc-number">7.6.</span> <span class="toc-text">7.6、测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%8F%92%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">8、插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#81-mybatis%E7%9A%84%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6"><span class="toc-number">8.1.</span> <span class="toc-text">8.1、mybatis 的插件机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#82-%E6%89%A7%E8%A1%8C%E5%88%86%E6%9E%90%E6%8F%92%E4%BB%B6"><span class="toc-number">8.2.</span> <span class="toc-text">8.2、执行分析插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#83-%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%8F%92%E4%BB%B6"><span class="toc-number">8.3.</span> <span class="toc-text">8.3、性能分析插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#84-%E4%B9%90%E8%A7%82%E9%94%81%E6%8F%92%E4%BB%B6"><span class="toc-number">8.4.</span> <span class="toc-text">8.4、乐观锁插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#841-%E4%B8%BB%E8%A6%81%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">8.4.1.</span> <span class="toc-text">8.4.1、主要适用场景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#842-%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">8.4.2.</span> <span class="toc-text">8.4.2、插件配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#843-%E6%B3%A8%E8%A7%A3%E5%AE%9E%E4%BD%93%E5%AD%97%E6%AE%B5"><span class="toc-number">8.4.3.</span> <span class="toc-text">8.4.3、注解实体字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#844-%E6%B5%8B%E8%AF%95"><span class="toc-number">8.4.4.</span> <span class="toc-text">8.4.4、测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#845-%E7%89%B9%E5%88%AB%E8%AF%B4%E6%98%8E"><span class="toc-number">8.4.5.</span> <span class="toc-text">8.4.5、特别说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-sql-%E6%B3%A8%E5%85%A5%E5%99%A8"><span class="toc-number">9.</span> <span class="toc-text">9、Sql 注入器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#81-%E7%BC%96%E5%86%99mybasemapper"><span class="toc-number">9.1.</span> <span class="toc-text">8.1、编写 MyBaseMapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#82-%E7%BC%96%E5%86%99mysqlinjector"><span class="toc-number">9.2.</span> <span class="toc-text">8.2、编写 MySqlInjector</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#83-%E7%BC%96%E5%86%99findall"><span class="toc-number">9.3.</span> <span class="toc-text">8.3、编写 FindAll</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#84-%E6%B3%A8%E5%86%8C%E5%88%B0spring%E5%AE%B9%E5%99%A8"><span class="toc-number">9.4.</span> <span class="toc-text">8.4、注册到 Spring 容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#85-%E6%B5%8B%E8%AF%95"><span class="toc-number">9.5.</span> <span class="toc-text">8.5、测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E5%8A%9F%E8%83%BD"><span class="toc-number">10.</span> <span class="toc-text">10、自动填充功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#101-%E6%B7%BB%E5%8A%A0tablefield%E6%B3%A8%E8%A7%A3"><span class="toc-number">10.1.</span> <span class="toc-text">10.1、添加 @TableField 注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#102-%E7%BC%96%E5%86%99mymetaobjecthandler"><span class="toc-number">10.2.</span> <span class="toc-text">10.2、编写 MyMetaObjectHandler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#103-%E6%B5%8B%E8%AF%95"><span class="toc-number">10.3.</span> <span class="toc-text">10.3、测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="toc-number">11.</span> <span class="toc-text">11、 逻辑删除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#111-%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">11.1.</span> <span class="toc-text">11.1、修改表结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#112-%E9%85%8D%E7%BD%AE"><span class="toc-number">11.2.</span> <span class="toc-text">11.2、配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#113-%E6%B5%8B%E8%AF%95"><span class="toc-number">11.3.</span> <span class="toc-text">11.3、测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E9%80%9A%E7%94%A8%E6%9E%9A%E4%B8%BE"><span class="toc-number">12.</span> <span class="toc-text">12、 通用枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#121-%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">12.1.</span> <span class="toc-text">12.1、修改表结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#122-%E5%AE%9A%E4%B9%89%E6%9E%9A%E4%B8%BE"><span class="toc-number">12.2.</span> <span class="toc-text">12.2、定义枚举</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#123-%E9%85%8D%E7%BD%AE"><span class="toc-number">12.3.</span> <span class="toc-text">12.3、配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#124-%E4%BF%AE%E6%94%B9%E5%AE%9E%E4%BD%93"><span class="toc-number">12.4.</span> <span class="toc-text">12.4、修改实体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#125-%E6%B5%8B%E8%AF%95"><span class="toc-number">12.5.</span> <span class="toc-text">12.5、测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">13.</span> <span class="toc-text">13、代码生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#131-%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-number">13.1.</span> <span class="toc-text">13.1、创建工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#132-%E4%BB%A3%E7%A0%81"><span class="toc-number">13.2.</span> <span class="toc-text">13.2、代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#133-%E6%B5%8B%E8%AF%95"><span class="toc-number">13.2.1.</span> <span class="toc-text">13.3、测试</span></a></li></ol></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#14-mybatisx-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6"><span class="toc-number"></span> <span class="toc-text">14、MybatisX 快速开发插件</span></a></li></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="KangKang" data-src="/images/avatar.jpg"><p class="name" itemprop="name">KangKang</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">12</span> <span class="name">文章</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tLzBrYW5na2FuZzA=" title="https:&#x2F;&#x2F;github.com&#x2F;0kangkang0"><i class="ic i-github"></i></span> <span class="exturl item csdn" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE1MTY2NjU1" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_15166655"><i class="ic i-csdn"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9rYW5na2FuZy02OC0xOC04OQ==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;kangkang-68-18-89"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTE2MjE4MTczMjA=" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;1621817320"><i class="ic i-cloud-music"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/07/11/hello-world/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/07/11/spring%E9%AB%98%E7%BA%A7/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/2023/12/10/UML%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%88%86%E6%9E%90%E3%80%81%E5%BB%BA%E6%A8%A1%E4%B8%8E%E8%AE%BE%E8%AE%A1/" title="UML面向对象分析、建模与设计">UML面向对象分析、建模与设计</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="计算机网络">计算机网络</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/01/01/Linux/" title="Linux">Linux</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/09/02/SpringBoot%E8%AE%B2%E4%B9%89/" title="springboot2">springboot2</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/23/JavaWeb/" title="JavaWeb">JavaWeb</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/11/MybatisPlus/" title="MybatisPlus">MybatisPlus</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/12/25/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/" title="软件测试基本原理与实践">软件测试基本原理与实践</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/11/hello-world/" title="Hello World">Hello World</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/11/06/AJAX+Node.js+Webpack/" title="AJAX+Node.js+Webpack">AJAX+Node.js+Webpack</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/23/SSM%E6%A1%86%E6%9E%B6/" title="SSM框架">SSM框架</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">KangKang @ kangkang</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">1.2m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">18:32</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div><div class="beian"><a href="https://beian.miit.gov.cn/" target="_blank">闽ICP备2023012662号</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/07/11/MybatisPlus/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="/js/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->